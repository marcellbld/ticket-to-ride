{"version":3,"sources":["views/layout/Layout.js","domain/app.js","api/socket.js","state/socket/actions.js","state/lobby/actions.js","state/socket/reducer.js","views/main/ConnectGamePanel.js","views/main/NewGamePanel.js","views/main/MainPage.js","domain/colors.js","domain/card.js","domain/game.js","state/deck/actions.js","state/players/actions.js","state/game/actions.js","state/lobby/selector.js","views/lobby/LobbyPage.js","util/shuffle.js","data/ticket-to-ride-data.js","state/players/selector.js","util/pathfinder.js","views/game/map/CityMarker.js","views/game/map/ConnectionMarker.js","views/game/map/Map.js","state/deck/selector.js","views/game/panel/player-indicator/PlayerIndicator.js","views/game/panel/player-indicator/PlayerIndicatorPanel.js","state/game/selector.js","views/game/Card.js","views/game/panel/public-cards/PublicCardsPanel.js","views/game/panel/deck-panel/DeckPanel.js","views/game/TicketCard.js","views/game/panel/ticket-deck-panel/TicketDeckModal.js","views/game/panel/ticket-deck-panel/TicketDeckPanel.js","views/game/CurrentPlayerCard.js","views/game/panel/current-player-cards-panel/CurrentPlayerCardsPanel.js","views/game/panel/history-panel/HistoryPanel.js","views/game/panel/current-player-ticket-panel/CurrentPlayerTicketPanel.js","views/game/BuildModal.js","views/game/EndGameModal.js","views/game/NotificationModal.js","views/game/GamePage.js","App.js","reportWebVitals.js","state/deck/reducer.js","state/game/reducer.js","state/lobby/reducer.js","state/players/reducer.js","state/store.js","index.js"],"names":["Layout","children","isGamePage","type","name","className","style","backgroundImage","backgroundPosition","AppStates","ClientMessages","GameActionTypes","ServerMessages","WS_SUBSCRIBE","WS_UNSUBSCRIBE","WS_SEND_MESSAGE","wsSendMessage","channel","datas","ack","wsSubscribeChannel","callback","payload","SET_ROOM","setRoom","roomId","roomSize","players","socket","currentSocketId","id","ConnectGamePanel","setShowNewGamePanel","setAppState","idRef","useRef","nameRef","dispatch","useDispatch","socketId","useState","errorMessage","setErrorMessage","onSubmit","e","playerId","playerName","preventDefault","current","value","resp","status","message","console","log","gameRoom","JSON","parse","state","htmlFor","ref","required","color","href","onClick","NewGamePanel","numberOfPlayersRef","getState","lobbyRoom","lobby","defaultValue","width","MainPage","showNewGamePanel","src","alt","Colors","RED","BLUE","GREEN","ORANGE","PURPLE","WHITE","YELLOW","BLACK","LOCOMOTIVE","CardData","PropTypes","shape","number","isRequired","oneOf","Object","values","cardState","CardStates","PLAYERS","DECK","PUBLIC","REMOVED","GameStates","USER_BEGIN","DRAW_CARDS","DRAW_CARD2","BUILD_LINE","SELECT_CARDS","NEW_DESTINATIONS","END_GAME","SET_DECK","currentPlayerId","playerNumber","publicCards","arrayOf","gameState","endTurn","UPDATE_CARD","REMOVE_CARD_FROM_PLAYER","setDeck","deck","removeCard","amount","removeCardFromPlayer","game","updateCard","card","updateCardInDeck","SET_PLAYERS","ADD_BUILT_CONNECTION","ADD_TICKET","NEXT_PLAYER_TURN","ADD_HISTORY","ADD_COMPLETED_TICKET","addBuiltConnectionToPlayer","connectionId","addTicketToPlayer","ticket","addHistoryToPlayer","historyElement","addCompletedTicketToPlayer","addBuiltConnection","broadcast","addTicket","addHistory","addCompletedTicket","NEXT_TURN","SET_GAME","SET_GAME_STATE","SET_END_TURN","setEndGameTurn","setEndTurn","nextGameTurn","currentPlayer","find","player","round","setGameState","setState","selectLobbyRoom","startGame","length","map","i","playerTickets","push","Math","floor","random","long","randomId","points","remainingCars","cards","tickets","completedTickets","builtConnections","history","colorNumber","keys","cardId","randomDeck","Array","_","a","j","shuffle","LobbyPage","useSelector","initialValue","roomIsFull","setRoomIsFull","startTimer","setStartTimer","useEffect","timer","setInterval","clearInterval","changeRoomIsFull","newValue","useRoomIsFull","data","room","full","playerElements","unshift","top","filter","p","ticketToRideData","cities","connections","destinations","longDestinations","selectPlayers","selectCurrentPlayer","selectLocalPlayer","selectAllBuiltConnections","findPathBetweenCities","startCityId","citiesPI","fill","citiesD","checkedEdges","queue","currCity","includes","connection","from","to","cityId","shift","pi","d","CityMarker","city","setChosenCity","active","neighbour","ticketShow","left","x","y","motion","span","classNames","animate","transition","duration","scale","backgroundColor","borderColor","borderWidth","whileHover","borderStyle","ConnectionMarker","markers","elements","coordinate","Map","chosenCity","ticketData","showTicketCities","localPlayer","neighbours","fromCity","toCity","allBuiltConnections","showConnections","connectionElements","forEach","connectionData","findIndex","some","c","selectDeck","selectFreeCards","selectAllPlayerCards","output","getPlayerCards","selectLocalPlayerCards","selectPublicCards","selectTopCardOfDeck","outputCards","PlayerIndicator","cardSum","reduce","sum","PlayerIndicatorPanel","allPlayerCards","playerIndicators","selectGame","shadeColor","percent","R","parseInt","substring","G","B","toString","Card","cardData","clickable","destroy","setDestroy","setDestroyed","setTimeout","useDestroy","button","whileTap","variants","opacity","simple","background","PublicCardsPanel","changeShowNotificationModal","waiting","setWaiting","cardsComponents","DeckPanel","freeCardsNumber","topCardOfDeck","TicketCard","completed","size","TicketDeckModal","setShowModal","setShowTicketCities","selectedTickets","setSelectedTickets","ticketDatas","setTicketDatas","ticketElements","selected","t","findId","splice","onMouseEnter","onMouseLeave","zIndex","div","selectedTicket","disabled","TicketDeckPanel","showModal","CurrentPlayerCard","CurrentPlayerCardsPanel","currentPlayerCards","HistoryPanel","historyComponents","CurrentPlayerTicketPanel","currentTicketShow","changeCurrentTicketShow","BuildModal","closeModal","buildableConnection","combinationData","locomotives","min","colorTrains","missingTrains","len","toUpperCase","combinations","endCityId","hasConnectionBetweenCities","EndGameModal","summaryComponents","ticketsValues","height","NotificationModal","transform","padding","border","borderRadius","GamePage","action","localPlayerTickets","localPlayerCards","setCurrentTicketShow","changeValue","useCurrentTicketShow","showBuildModal","setShowBuildModal","setBuildableConnection","changeShowBuildModal","show","useBuildModalShow","showNotificationModal","setShowNotificationModal","notificationMessage","setNotificationMessage","useNotificationModalShow","occupiedConnections","flatMap","hasEnoughCards","renderPage","appState","App","host","process","BACKEND_SERVER","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","refreshPublicCards","newDeck","updatedCard","isPublicCard","updatedDeck","updatedCards","nextTurn","slice","CONNECTION_VALUES","store","createStore","combineReducers","nextPlayerId","newState","composeWithDevTools","applyMiddleware","thunk","next","close","io","transports","actions","on","handleSubscribeToChannel","removeAllListeners","emit","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f60f7775.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nfunction Layout({children}) {\r\n  const isGamePage = children.type.name === 'GamePage';\r\n  return (\r\n    <div className=\"container-fluid h-100 w-100 d-flex justify-content-center align-items-center\" style={{backgroundImage: !isGamePage ? `url(background.jpg)` : '', backgroundPosition: 'center'}}>\r\n        {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Layout;\r\n","export const AppStates = {\r\n    MAIN_PAGE: 0,\r\n    WAITING_FOR_PLAYERS: 1,\r\n    IN_GAME: 2\r\n}","export const ClientMessages = {\r\n  JOIN_ROOM: \"join-room\",\r\n  CREATE_ROOM: \"create-room\",\r\n  CLOSE_ROOM: \"close-room\",\r\n  LEAVE_ROOM: \"leave-room\",\r\n  SYNC_STATE: \"sync-state\",\r\n  SYNC_ACTION: \"sync-action\",\r\n  GET_STATE: \"get-state\",\r\n};\r\nexport const GameActionTypes = {\r\n  NEXT_TURN: \"NEXT_TURN\",\r\n  ADD_BUILT_CONNECTION: \"ADD_BUILT_CONNECTION\",\r\n  ADD_TICKET: \"ADD_TICKET\",\r\n  ADD_HISTORY: \"ADD_HISTORY\",\r\n  ADD_COMPLETED_TICKET: \"ADD_COMPLETED_TICKET\",\r\n  UPDATE_CARD: \"UPDATE_CARD\",\r\n  REMOVE_CARD: \"REMOVE_CARD\",\r\n  END_TURN: \"END_TURN\"\r\n};\r\nexport const ServerMessages = {\r\n  ROOM_IS_FULL: \"room-is-full\",\r\n  PLAYER_JOINED: \"player-joined\",\r\n  STATE_CHANGED: \"state-changed\",\r\n  ACTION_SENT: \"action-sent\",\r\n  PLAYER_LEFT: \"player-left\",\r\n};","export const WS_SUBSCRIBE = \"WS_SUBSCRIBE\";\r\nexport const WS_UNSUBSCRIBE = \"WS_UNSUBSCRIBE\";\r\nexport const WS_SEND_MESSAGE = \"WS_SEND_MESSAGE\";\r\n\r\nexport const wsConnect = (host) => ({ type: \"WS_CONNECT\", host });\r\nexport const wsDisconnect = (host) => ({ type: \"WS_DISCONNECT\", host });\r\n\r\nexport const wsSendMessage = (channel, datas, ack) => ({type: WS_SEND_MESSAGE, channel, datas, ack});\r\nexport const wsSubscribeChannel = (channel, callback) => ({type:WS_SUBSCRIBE, payload: {channel, callback}})\r\nexport const wsUnsubscribeChannel = (channel) => ({type:WS_UNSUBSCRIBE, payload: channel})","import { ClientMessages } from \"../../api/socket\";\r\nimport { wsSendMessage } from \"../socket/actions\";\r\n\r\nexport const SET_ROOM = \"CREATE_ROOM\";\r\nexport const JOIN_ROOM = \"JOIN_ROOM\";\r\n\r\nexport function setRoom(roomId, roomSize, players = []) {\r\n  return {\r\n    type: SET_ROOM,\r\n    payload: { roomId, roomSize, players },\r\n  };\r\n}\r\n\r\nexport function joinRoom(playerId, playerName, roomId, callback) {\r\n  return (dispatch) => {\r\n    const ack = function (resp) {\r\n      if (resp.status === \"ok\") {\r\n        dispatch(\r\n          wsSendMessage(ClientMessages.GET_STATE, [roomId], (resp) => {\r\n            const gameRoom = JSON.parse(resp.state);\r\n            gameRoom.players = [...gameRoom.players, {id: playerId, name: playerName}];\r\n            dispatch(\r\n              wsSendMessage(\r\n                ClientMessages.SYNC_STATE,\r\n                [gameRoom.roomId, gameRoom, false],\r\n                function () {}\r\n              )\r\n            );\r\n          })\r\n        );\r\n      }\r\n      callback(resp);\r\n    };\r\n    dispatch(wsSendMessage(ClientMessages.JOIN_ROOM, [roomId], ack));\r\n  };\r\n}\r\n\r\nexport function createRoom(playerId, playerName, roomSize, callback) {\r\n  return async (dispatch, getState) => {\r\n    dispatch(\r\n      wsSendMessage(ClientMessages.CREATE_ROOM, [roomSize], function (resp) {\r\n        dispatch(setRoom(resp.roomId, roomSize, [{id: playerId, name: playerName}]));\r\n        const lobbyRoom = getState().lobby;\r\n\r\n        dispatch(\r\n          wsSendMessage(\r\n            ClientMessages.SYNC_STATE,\r\n            [lobbyRoom.roomId, lobbyRoom, false],\r\n            function () {}\r\n          )\r\n        );\r\n\r\n        callback(resp);\r\n      })\r\n    );\r\n  };\r\n}\r\n","import * as actions from \"./actions\";\r\nimport io from \"socket.io-client\";\r\n\r\nlet socket = null;\r\n\r\nexport const socketMiddleware = () => (next) => (action) => {\r\n  switch (action.type) {\r\n    case \"WS_CONNECT\":\r\n      if (socket !== null) {\r\n        socket.close();\r\n      }\r\n\r\n      socket = io(action.host, {\r\n        transports: [\"websocket\", \"polling\", \"flashsocket\"],\r\n      });\r\n      break;\r\n    case actions.WS_SUBSCRIBE:\r\n      handleSubscribeToChannel(action.payload);\r\n      break;\r\n    case actions.WS_UNSUBSCRIBE:\r\n      handleUnsubscribeFromChannel(action.payload);\r\n      break;\r\n    case actions.WS_SEND_MESSAGE:\r\n      socket.emit(action.channel, ...action.datas, action.ack);\r\n      break;\r\n    case \"WS_DISCONNECT\":\r\n      if (socket !== null) {\r\n        socket.close();\r\n      }\r\n      socket = null;\r\n      console.log(\"websocket closed\");\r\n      break;\r\n    default:\r\n      return next(action);\r\n  }\r\n};\r\n\r\nexport function currentSocketId() {\r\n  return socket ? socket.id : null;\r\n}\r\n\r\nfunction handleSubscribeToChannel({ channel, callback }) {\r\n  socket.on(channel, (data) => callback(data));\r\n}\r\n\r\nfunction handleUnsubscribeFromChannel(channel) {\r\n  socket.removeAllListeners(channel);\r\n}\r\n","import React, { useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { AppStates } from \"../../domain/app\";\r\nimport { joinRoom } from \"../../state/lobby/actions\";\r\nimport { currentSocketId } from \"../../state/socket/reducer\";\r\n\r\nfunction ConnectGamePanel({ setShowNewGamePanel, setAppState }) {\r\n  const idRef = useRef(null);\r\n  const nameRef = useRef(null);\r\n\r\n  const dispatch = useDispatch();\r\n  const socketId = currentSocketId();\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  return (\r\n    <div className=\"card card-login mx-auto text-center\">\r\n      <div className=\"card-header mx-auto\">\r\n        <span className=\"logo_title mt-5\"> Csatlakozás játékhoz</span>\r\n      </div>\r\n      <div className=\"card-body\">\r\n        <form\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n\r\n            dispatch(\r\n              joinRoom(socketId, nameRef.current.value, idRef.current.value, (resp) => {\r\n                if (resp.status === \"ok\") {\r\n                  setAppState(AppStates.WAITING_FOR_PLAYERS);\r\n                } else {\r\n                  setErrorMessage(resp.message);\r\n                  console.log(resp.message);\r\n                }\r\n              })\r\n            );\r\n\r\n            idRef.current.value = \"\";\r\n            nameRef.current.value = \"\";\r\n          }}\r\n        >\r\n          <label htmlFor=\"room-id\">Szoba azonosító</label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"room-id\"\r\n            className=\"form-control input-orange w-50 mx-auto\"\r\n            ref={idRef}\r\n            required\r\n          />\r\n          <br />\r\n          <label htmlFor=\"player-name\">Játékos név</label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"player-name\"\r\n            className=\"form-control input-orange w-50 mx-auto\"\r\n            ref={nameRef}\r\n            required\r\n          />\r\n          <br />\r\n          <button type=\"submit\" className=\"btn button-orange px-5 mx-auto\">\r\n            Csatlakozás\r\n          </button>\r\n          <br />\r\n          {errorMessage && <div style={{color: 'red'}}>{errorMessage}</div>}\r\n        </form>\r\n      </div>\r\n      <a\r\n        href=\"/#\"\r\n        className=\"btn text-light mt-2\"\r\n        onClick={() => setShowNewGamePanel(true)}\r\n      >\r\n        Új játék indítása\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConnectGamePanel;\r\n","import React from \"react\";\r\nimport { AppStates } from \"../../domain/app\";\r\nimport { useRef } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { createRoom } from \"../../state/lobby/actions\";\r\nimport { currentSocketId } from \"../../state/socket/reducer\";\r\n\r\nfunction NewGamePanel({ setShowNewGamePanel, setAppState }) {\r\n  const numberOfPlayersRef = useRef(null);\r\n  const nameRef = useRef(null);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className=\"card card-login mx-auto text-center\">\r\n      <div className=\"card-header mx-auto\">\r\n        <span className=\"logo_title mt-5\"> Új játék indítása</span>\r\n      </div>\r\n      <div className=\"card-body\">\r\n        <form\r\n          onSubmit={(e) => {\r\n            const socketId = currentSocketId();\r\n            e.preventDefault();\r\n            dispatch(createRoom(socketId, nameRef.current.value, numberOfPlayersRef.current.value, (resp) => {\r\n\r\n              numberOfPlayersRef.current.value = \"1\";\r\n              nameRef.current.value = \"\";\r\n              setAppState(AppStates.WAITING_FOR_PLAYERS);\r\n\r\n            }));\r\n            \r\n          }}\r\n        >\r\n          <label htmlFor=\"player-number\">Játékosok száma</label>\r\n          <br />\r\n          <select\r\n            className=\"form-control mx-auto custom-select\"\r\n            name=\"player-number\"\r\n            defaultValue=\"1\"\r\n            style={{ width: \"auto\" }}\r\n            ref={numberOfPlayersRef}\r\n          >\r\n            <option value=\"1\">1</option>\r\n            <option value=\"2\">2</option>\r\n            <option value=\"3\">3</option>\r\n            <option value=\"4\">4</option>\r\n            <option value=\"5\">5</option>\r\n          </select>\r\n          <br />\r\n          <br />\r\n          <label htmlFor=\"player-name\">Játékos név</label>\r\n          <br />\r\n          <input\r\n            type=\"text\"\r\n            name=\"player-name\"\r\n            className=\"form-control input-orange w-50 mx-auto\"\r\n            ref={nameRef}\r\n            required\r\n          />\r\n          <br />\r\n          <button type=\"submit\" className=\"btn button-orange px-5 mx-auto\">\r\n            Indítás\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <a\r\n        href=\"/#\"\r\n        className=\"btn text-light mt-2\"\r\n        onClick={() => setShowNewGamePanel(false)}\r\n      >\r\n        Csatlakozás meglévő játékhoz\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewGamePanel;\r\n","import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport ConnectGamePanel from \"./ConnectGamePanel\";\r\nimport NewGamePanel from \"./NewGamePanel\";\r\n\r\nfunction MainPage({ setAppState }) {\r\n  const [showNewGamePanel, setShowNewGamePanel] = useState(true);\r\n  \r\n  return (\r\n    <div className=\"h-100 d-flex flex-column align-items-center\">\r\n      <div className=\"mt-4 position-absolute\">\r\n        <img src=\"logo.png\" alt=\"\" />\r\n      </div>\r\n      <div className=\"my-auto\">\r\n        {showNewGamePanel ? (\r\n          <NewGamePanel\r\n            setShowNewGamePanel={setShowNewGamePanel}\r\n            setAppState={setAppState}\r\n          ></NewGamePanel>\r\n        ) : (\r\n          <ConnectGamePanel\r\n            setShowNewGamePanel={setShowNewGamePanel}\r\n            setAppState={setAppState}\r\n          ></ConnectGamePanel>\r\n        )}\r\n      </div>\r\n      <div className=\"mb-2 text-center\">\r\n        <a\r\n          className=\"btn text-light\"\r\n          href=\"https://tarsasjatekrendeles.hu/shop_ordered/7237/pic/Compaya/Ticket_To_Ride_Europe.pdf\"\r\n        >\r\n          Játékszabályzat\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MainPage;\r\n","export const Colors = {\r\n  RED: \"#FF0000\",\r\n  BLUE: \"#0000FF\",\r\n  GREEN: \"#00FF00\",\r\n  ORANGE: \"#ffa500\",\r\n  PURPLE: \"#800080\",\r\n  WHITE: \"#FFFFFF\",\r\n  YELLOW: \"#ffff00\",\r\n  BLACK: \"#000000\",\r\n  LOCOMOTIVE: \"#708090\",\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport { Colors } from \"./colors\";\r\n\r\nexport const CardData = PropTypes.shape({\r\n  id: PropTypes.number.isRequired,\r\n  color: PropTypes.oneOf(Object.values(Colors)),\r\n  cardState: PropTypes.oneOf(Object.values(Colors)),\r\n});\r\n\r\nexport const CardStates = {\r\n  PLAYERS: [0, 1, 2, 3, 4],\r\n  DECK: -1,\r\n  PUBLIC: [-2, -3, -4, -5, -6],\r\n  REMOVED: -10,\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport { CardData } from \"./card\";\r\n\r\nexport const GameStates = {\r\n  USER_BEGIN: 0,\r\n  DRAW_CARDS: 1,\r\n  DRAW_CARD2: 2,\r\n  BUILD_LINE: 3,\r\n  SELECT_CARDS: 4,\r\n  NEW_DESTINATIONS: 5,\r\n  END_GAME: 9,\r\n}\r\n\r\nexport const GameData = PropTypes.shape({\r\n  id: PropTypes.number.isRequired,\r\n  currentPlayerId: PropTypes.number.isRequired,\r\n  playerNumber: PropTypes.number.isRequired,\r\n  publicCards: PropTypes.arrayOf(CardData).isRequired,\r\n  gameState: PropTypes.oneOf(Object.values(GameStates)).isRequired,\r\n  endTurn: PropTypes.number.isRequired\r\n});\r\n","import { ClientMessages } from \"../../api/socket\";\r\nimport { wsSendMessage } from \"../socket/actions\";\r\n\r\nexport const SET_DECK = \"SET_DECK\";\r\nexport const UPDATE_CARD = \"UPDATE_CARD\";\r\nexport const REMOVE_CARD_FROM_PLAYER = \"REMOVE_CARD_FROM_PLAYER\";\r\n\r\nfunction removeCardFromPlayer(playerId, color, amount) {\r\n  return {\r\n    type: \"REMOVE_CARD_FROM_PLAYER\",\r\n    payload: { playerId, color, amount },\r\n  };\r\n}\r\n\r\nexport function setDeck(deck) {\r\n  return {\r\n    type: \"SET_DECK\",\r\n    payload: deck,\r\n  };\r\n}\r\nfunction updateCardInDeck(card) {\r\n  return {\r\n    type: \"UPDATE_CARD\",\r\n    payload: card,\r\n  };\r\n}\r\nexport function removeCard(playerId, color, amount){\r\n  return (dispatch, getState) => {\r\n    dispatch(removeCardFromPlayer(playerId, color, amount));\r\n\r\n    dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [getState().game.id, {deck: getState().deck, players: getState().players}, true], function() {} ));\r\n  }\r\n}\r\n\r\nexport function updateCard(card) {\r\n  return (dispatch, getState) => {\r\n    dispatch(updateCardInDeck(card));\r\n    \r\n    dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [getState().game.id, {deck: getState().deck, players: getState().players}, true], function() {} ));\r\n  };\r\n}\r\n","import { ClientMessages, GameActionTypes } from \"../../api/socket\";\r\nimport { wsSendMessage } from \"../socket/actions\";\r\n\r\nexport const SET_PLAYERS = \"SET_PLAYERS\";\r\nexport const ADD_BUILT_CONNECTION = \"ADD_BUILT_CONNECTION\";\r\nexport const ADD_TICKET = \"ADD_TICKET\";\r\nexport const NEXT_PLAYER_TURN = \"NEXT_PLAYER_TURN\";\r\nexport const ADD_HISTORY = \"ADD_HISTORY\";\r\nexport const ADD_COMPLETED_TICKET = \"ADD_COMPLETED_TICKET\";\r\n\r\nexport function setPlayers(players) {\r\n  return {\r\n    type: SET_PLAYERS,\r\n    payload: players,\r\n  };\r\n}\r\n\r\nfunction addBuiltConnectionToPlayer(playerId, connectionId) {\r\n  return {\r\n    type: ADD_BUILT_CONNECTION,\r\n    payload: { playerId, connectionId },\r\n  };\r\n}\r\nexport function nextPlayerTurn(currentPlayerId) {\r\n  return {\r\n    type: NEXT_PLAYER_TURN,\r\n    payload: currentPlayerId,\r\n  };\r\n}\r\n\r\nfunction addTicketToPlayer(playerId, ticket) {\r\n  return {\r\n    type: ADD_TICKET,\r\n    payload: { playerId: playerId, ticket },\r\n  };\r\n}\r\n\r\nfunction addHistoryToPlayer(playerId, historyElement) {\r\n  return {\r\n    type: ADD_HISTORY,\r\n    payload: { playerId, historyElement },\r\n  };\r\n}\r\n\r\nfunction addCompletedTicketToPlayer(playerId, ticket) {\r\n  return {\r\n    type: ADD_COMPLETED_TICKET,\r\n    payload: { playerId, ticket },\r\n  };\r\n}\r\n\r\nexport function addBuiltConnection(playerId, connectionId, broadcast = false) {\r\n  return (dispatch, getState) => {\r\n    dispatch(addBuiltConnectionToPlayer(playerId, connectionId));\r\n\r\n    if (broadcast) {\r\n      dispatch(\r\n        wsSendMessage(\r\n          ClientMessages.SYNC_ACTION,\r\n          [\r\n            getState().game.id,\r\n            {\r\n              type: GameActionTypes.ADD_BUILT_CONNECTION,\r\n              payload: { playerId, connectionId },\r\n            },\r\n            true,\r\n          ],\r\n          function () {}\r\n        )\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport function addTicket(playerId, ticket, broadcast = false) {\r\n  return (dispatch, getState) => {\r\n    dispatch(addTicketToPlayer(playerId, ticket));\r\n\r\n    if (broadcast) {\r\n      dispatch(\r\n        wsSendMessage(\r\n          ClientMessages.SYNC_ACTION,\r\n          [\r\n            getState().game.id,\r\n            { type: GameActionTypes.ADD_TICKET, payload: { playerId, ticket } },\r\n            true,\r\n          ],\r\n          function () {}\r\n        )\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport function addHistory(playerId, historyElement, broadcast = false) {\r\n  return (dispatch, getState) => {\r\n    dispatch(addHistoryToPlayer(playerId, historyElement));\r\n\r\n    if (broadcast) {\r\n      dispatch(\r\n        wsSendMessage(\r\n          ClientMessages.SYNC_ACTION,\r\n          [\r\n            getState().game.id,\r\n            {\r\n              type: GameActionTypes.ADD_HISTORY,\r\n              payload: { playerId, historyElement },\r\n            },\r\n            true,\r\n          ],\r\n          function () {}\r\n        )\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport function addCompletedTicket(playerId, ticket, broadcast = false) {\r\n  return (dispatch, getState) => {\r\n    dispatch(addCompletedTicketToPlayer(playerId, ticket));\r\n\r\n    if (broadcast) {\r\n      dispatch(\r\n        wsSendMessage(\r\n          ClientMessages.SYNC_ACTION,\r\n          [\r\n            getState().game.id,\r\n            {\r\n              type: GameActionTypes.ADD_COMPLETED_TICKET,\r\n              payload: { playerId, ticket },\r\n            },\r\n            true,\r\n          ],\r\n          function () {}\r\n        )\r\n      );\r\n    }\r\n  };\r\n}\r\n","import { ClientMessages, GameActionTypes } from \"../../api/socket\";\r\nimport { GameStates } from \"../../domain/game\";\r\nimport { nextPlayerTurn } from \"../players/actions\";\r\nimport { wsSendMessage } from \"../socket/actions\";\r\n\r\nexport const NEXT_TURN = \"NEXT_TURN\";\r\nexport const SET_GAME = \"SET_GAME\";\r\nexport const SET_GAME_STATE = \"SET_GAME_STATE\";\r\nexport const SET_END_TURN = \"SET_END_TURN\";\r\n\r\nfunction setState(gameState) {\r\n  return {\r\n    type: SET_GAME_STATE,\r\n    payload: gameState,\r\n  };\r\n}\r\n\r\nexport function setGame(game) {\r\n  return {\r\n    type: SET_GAME,\r\n    payload: game,\r\n  };\r\n}\r\n\r\nfunction setEndGameTurn(endTurn) {\r\n  return {\r\n    type: SET_END_TURN,\r\n    payload: endTurn,\r\n  };\r\n}\r\n\r\nfunction nextTurn() {\r\n  return {\r\n    type: \"NEXT_TURN\",\r\n  };\r\n}\r\n\r\nexport function setEndTurn(endTurn, broadcast = false) {\r\n  return (dispatch, getState) => {\r\n    dispatch(setEndGameTurn(endTurn));\r\n    if (broadcast) {\r\n      dispatch(\r\n        wsSendMessage(\r\n          ClientMessages.SYNC_ACTION,\r\n          [\r\n            getState().game.id,\r\n            { type: GameActionTypes.END_TURN, payload: endTurn },\r\n            false,\r\n          ],\r\n          function () {}\r\n        )\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport function nextGameTurn() {\r\n  return (dispatch, getState) => {\r\n    dispatch(nextTurn());\r\n    dispatch(nextPlayerTurn(getState().game.currentPlayerId));\r\n\r\n    const endTurn = getState().game.endTurn;\r\n    const currentPlayer = getState().players.find(\r\n      (player) => player.id === getState().game.currentPlayerId\r\n    );\r\n\r\n    if (endTurn > -1 && currentPlayer.round >= endTurn) {\r\n      dispatch(setGameState(GameStates.END_GAME));\r\n    }\r\n  };\r\n}\r\n\r\nexport function setGameState(gameState) {\r\n  return (dispatch, getState) => {\r\n    dispatch(setState(gameState));\r\n\r\n    if (gameState === GameStates.DRAW_CARD2) {\r\n      dispatch(\r\n        wsSendMessage(\r\n          ClientMessages.SYNC_ACTION,\r\n          [getState().game.id, { type: GameActionTypes.NEXT_TURN }, false],\r\n          function () {}\r\n        )\r\n      );\r\n    }\r\n  };\r\n}\r\n","export function selectLobbyRoom(state) {\r\n    return state.lobby;\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages, ServerMessages } from \"../../api/socket\";\r\nimport { AppStates } from \"../../domain/app\";\r\nimport { CardStates } from \"../../domain/card\";\r\nimport { Colors } from \"../../domain/colors\";\r\nimport { GameStates } from \"../../domain/game\";\r\nimport { setDeck } from \"../../state/deck/actions\";\r\nimport { setGame } from \"../../state/game/actions\";\r\nimport { setRoom } from \"../../state/lobby/actions\";\r\nimport { selectLobbyRoom } from \"../../state/lobby/selector\";\r\nimport { setPlayers } from \"../../state/players/actions\";\r\nimport {\r\n  wsSendMessage,\r\n  wsSubscribeChannel,\r\n  wsUnsubscribeChannel,\r\n} from \"../../state/socket/actions\";\r\nimport { currentSocketId } from \"../../state/socket/reducer\";\r\nimport { shuffle } from \"../../util/shuffle\";\r\n\r\nfunction useRoomIsFull(initialValue, setAppState) {\r\n  const [roomIsFull, setRoomIsFull] = useState(initialValue);\r\n  const [startTimer, setStartTimer] = useState(1.0);\r\n\r\n  useEffect(() => {\r\n    const timer =\r\n      roomIsFull &&\r\n      setInterval(() => {\r\n        setStartTimer(startTimer - 1);\r\n        if (startTimer <= 0) {\r\n          clearInterval(timer);\r\n          setAppState(AppStates.IN_GAME);\r\n        }\r\n      }, 1000);\r\n    return () => clearInterval(timer);\r\n  }, [startTimer, roomIsFull, setAppState]);\r\n\r\n  const changeRoomIsFull = (newValue) => {\r\n    setRoomIsFull(newValue);\r\n  };\r\n\r\n  return {\r\n    startTimer,\r\n    roomIsFull,\r\n    changeRoomIsFull,\r\n  };\r\n}\r\nfunction startGame(dispatch, lobbyRoom) {\r\n  const game = {\r\n    id: lobbyRoom.roomId,\r\n    currentPlayerId: 0,\r\n    playerNumber: lobbyRoom.players.length,\r\n    publicCards: [],\r\n    gameState: GameStates.USER_BEGIN,\r\n    endTurn: -1,\r\n  };\r\n  const players = lobbyRoom.players.map((player, i) => {\r\n    const playerTickets = [];\r\n    playerTickets.push({\r\n      id: Math.floor(Math.random() * 6),\r\n      long: true,\r\n    });\r\n    while (playerTickets.length < 6) {\r\n      let randomId = Math.floor(Math.random() * 40);\r\n      if (\r\n        !playerTickets.find(\r\n          (ticket) => ticket.id === randomId && ticket.long === false\r\n        )\r\n      ) {\r\n        playerTickets.push({ id: randomId, long: false });\r\n      }\r\n    }\r\n    return {\r\n      id: i,\r\n      name: player.name,\r\n      socketId: player.id,\r\n      points: 0,\r\n      remainingCars: 45,\r\n      cards: [],\r\n      tickets: playerTickets,\r\n      completedTickets: [],\r\n      round: 0,\r\n      color: Object.values(Colors)[i],\r\n      builtConnections: [],\r\n      history: [],\r\n    };\r\n  });\r\n  players[0].round = 1;\r\n  const colorNumber = Object.keys(Colors).length - 1;\r\n  let cardId = 0;\r\n  const randomDeck = [...Array(colorNumber * 12).keys()].map((i) => {\r\n    return {\r\n      id: cardId++,\r\n      color: Object.values(Colors)[i % colorNumber],\r\n      cardState: CardStates.DECK,\r\n    };\r\n  });\r\n  randomDeck.push(\r\n    ...[...Array(14).keys()].map((_) => {\r\n      return {\r\n        id: cardId++,\r\n        color: Colors.LOCOMOTIVE,\r\n        cardState: CardStates.DECK,\r\n      };\r\n    })\r\n  );\r\n  shuffle(randomDeck);\r\n\r\n  for (let i = 0; i < players.length; i++) {\r\n    for (let j = 0; j < 5; j++) {\r\n      randomDeck[i * 5 + j].cardState = i;\r\n    }\r\n  }\r\n  for (let i = 0; i < 5; i++) {\r\n    randomDeck[players.length * 5 + i].cardState = CardStates.PUBLIC[i];\r\n  }\r\n\r\n  dispatch(\r\n    wsSendMessage(\r\n      ClientMessages.SYNC_STATE,\r\n      [game.id, { game: game, deck: randomDeck, players: players }, false],\r\n      function () {}\r\n    )\r\n  );\r\n}\r\n\r\nfunction LobbyPage({ setAppState }) {\r\n  const lobbyRoom = useSelector(selectLobbyRoom);\r\n  const { startTimer, roomIsFull, changeRoomIsFull } = useRoomIsFull(\r\n    false,\r\n    setAppState\r\n  );\r\n  const dispatch = useDispatch();\r\n  const socketId = currentSocketId();\r\n\r\n  useEffect(() => {\r\n    console.log(\"USE EFFECT\");\r\n    dispatch(\r\n      wsSubscribeChannel(ServerMessages.STATE_CHANGED, function (data) {\r\n        if (data.state.game) {\r\n          dispatch(setGame(data.state.game));\r\n          dispatch(setDeck(data.state.deck));\r\n          dispatch(setPlayers(data.state.players));\r\n\r\n          dispatch(wsUnsubscribeChannel(ServerMessages.STATE_CHANGED));\r\n        } else {\r\n          const room = data.state;\r\n          dispatch(setRoom(room.roomId, room.roomSize, room.players));\r\n        }\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  if (!roomIsFull) {\r\n    const full = lobbyRoom.players.length === +lobbyRoom.roomSize;\r\n\r\n    if (full) {\r\n      changeRoomIsFull(full);\r\n      if (lobbyRoom.players[0] && lobbyRoom.players[0].id === socketId) {\r\n        startGame(dispatch, lobbyRoom);\r\n      }\r\n    }\r\n  }\r\n\r\n  const playerElements = lobbyRoom.players.map(({ _, name }, i) => (\r\n    <div key={i + 1} className=\"text-center\">\r\n      {name}\r\n    </div>\r\n  ));\r\n  playerElements.unshift(<div key={0} className=\"text-orange\">Players</div>);\r\n\r\n  return (\r\n    <div className=\"h-100 d-flex flex-column align-items-center\">\r\n      <div className=\"mt-5 position-absolute col\">\r\n        <div className=\"text-center\">Szoba azonosító:</div>\r\n        <div className=\"h2 text-orange text-center\">{lobbyRoom.roomId}</div>\r\n      </div>\r\n      <div className=\"position-absolute\" style={{ top: \"40%\" }}>\r\n        <div className=\"position-relative text-center\">\r\n          {roomIsFull ? (\r\n            <>\r\n              <div>Kezdődik a játék</div>\r\n              <div>{startTimer}</div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"lds-ring\">\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n              </div>\r\n              <div>\r\n                <span>Waiting for players...</span>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"mt-auto text-center\">\r\n        <div>{playerElements}</div>\r\n        <div className=\"mb-2\">\r\n          {!roomIsFull && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn button-orange px-5 mx-auto\"\r\n              onClick={() => {\r\n                dispatch(\r\n                  wsSendMessage(\r\n                    ClientMessages.SYNC_STATE,\r\n                    [\r\n                      lobbyRoom.roomId,\r\n                      {\r\n                        ...lobbyRoom,\r\n                        players: lobbyRoom.players.filter(\r\n                          (p) => p.id !== socketId\r\n                        ),\r\n                      },\r\n                      false,\r\n                    ],\r\n                    function () {\r\n                      setAppState(AppStates.MAIN_PAGE);\r\n                    }\r\n                  )\r\n                );\r\n              }}\r\n            >\r\n              Vissza\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nLobbyPage.propTypes = {};\r\n\r\nexport default LobbyPage;\r\n","export function shuffle(a) {\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n}","export const ticketToRideData = {\r\n  cities: {\r\n    \"1\":{\"id\":\"1\",\"city\":\"Amsterdam\",\"today\":\"Amsterdam\",\"country\":\"Holland\",\"x\":31.874999999999996,\"y\":30.58161350844278},\r\n    \"2\":{\"id\":\"2\",\"city\":\"Angora\",\"today\":\"Ankara\",\"country\":\"Turkey\",\"x\":85.625,\"y\":89.8686679174484},\r\n    \"3\":{\"id\":\"3\",\"city\":\"Athina\",\"today\":\"Athens\",\"country\":\"Greece\",\"x\":66,\"y\":89.8686679174484},\r\n    \"4\":{\"id\":\"4\",\"city\":\"Barcelona\",\"today\":\"Barcelona\",\"country\":\"Spain\",\"x\":21.625,\"y\":84.42776735459663},\r\n    \"5\":{\"id\":\"5\",\"city\":\"Berlin\",\"today\":\"Berlin\",\"country\":\"Germany\",\"x\":49.125,\"y\":34.33395872420263},\r\n    \"6\":{\"id\":\"6\",\"city\":\"Brest\",\"today\":\"Brest\",\"country\":\"France\",\"x\":13.25,\"y\":47.27954971857411},\r\n    \"7\":{\"id\":\"7\",\"city\":\"Brindisi\",\"today\":\"Brindisi\",\"country\":\"Italy\",\"x\":54.37499999999999,\"y\":78.61163227016885},\r\n    \"8\":{\"id\":\"8\",\"city\":\"Bruxelles\",\"today\":\"Brussels\",\"country\":\"Belgium\",\"x\":29.625,\"y\":37.5234521575985},\r\n    \"9\":{\"id\":\"9\",\"city\":\"Bucuresti\",\"today\":\"Bucharest\",\"country\":\"Romania\",\"x\":73.5,\"y\":64.35272045028142},\r\n    \"10\":{\"id\":\"10\",\"city\":\"Budapest\",\"today\":\"Budapest\",\"country\":\"Hungary\",\"x\":59.12500000000001,\"y\":54.409005628517825},\r\n    \"11\":{\"id\":\"11\",\"city\":\"Cadiz\",\"today\":\"Cadiz\",\"country\":\"Spain\",\"x\":10.875,\"y\":93.62101313320825},\r\n    \"12\":{\"id\":\"12\",\"city\":\"Constantinople\",\"today\":\"Istanbul\",\"country\":\"Turkey\",\"x\":78.375,\"y\":81.98874296435272},\r\n    \"13\":{\"id\":\"13\",\"city\":\"Danzig\",\"today\":\"Gdansk\",\"country\":\"Poland\",\"x\":60,\"y\":23.076923076923077},\r\n    \"14\":{\"id\":\"14\",\"city\":\"Dieppe\",\"today\":\"Dieppe\",\"country\":\"France\",\"x\":21.75,\"y\":43.151969981238274},\r\n    \"15\":{\"id\":\"15\",\"city\":\"Edinburgh\",\"today\":\"Edinburgh\",\"country\":\"Scotland, UK\",\"x\":16.5,\"y\":8.818011257035648},\r\n    \"16\":{\"id\":\"16\",\"city\":\"Erzurum\",\"today\":\"Erzurum\",\"country\":\"Turkey\",\"x\":93.25,\"y\":86.49155722326454},\r\n    \"17\":{\"id\":\"17\",\"city\":\"Essen\",\"today\":\"Essen\",\"country\":\"Germany\",\"x\":39.625,\"y\":32.08255159474672},\r\n    \"18\":{\"id\":\"18\",\"city\":\"Frankfurt\",\"today\":\"Frankfurt\",\"country\":\"Germany\",\"x\":38.125,\"y\":42.21388367729831},\r\n    \"19\":{\"id\":\"19\",\"city\":\"Kharkov\",\"today\":\"Kharkov\",\"country\":\"Ukraine\",\"x\":91.625,\"y\":48.21763602251407},\r\n    \"20\":{\"id\":\"20\",\"city\":\"Kobenhavn\",\"today\":\"Copenhagen\",\"country\":\"Denmark\",\"x\":46.625,\"y\":17.073170731707318},\r\n    \"21\":{\"id\":\"21\",\"city\":\"Kyiv\",\"today\":\"Kiev\",\"country\":\"Ukraine\",\"x\":78.875,\"y\":40.52532833020638},\r\n    \"22\":{\"id\":\"22\",\"city\":\"Lisboa\",\"today\":\"Lisbon\",\"country\":\"Portugal\",\"x\":4.625,\"y\":86.49155722326454},\r\n    \"23\":{\"id\":\"23\",\"city\":\"London\",\"today\":\"London\",\"country\":\"England, UK\",\"x\":22.75,\"y\":30.393996247654787},\r\n    \"24\":{\"id\":\"24\",\"city\":\"Madrid\",\"today\":\"Madrid\",\"country\":\"Spain\",\"x\":10.875,\"y\":83.11444652908068},\r\n    \"25\":{\"id\":\"25\",\"city\":\"Marseille\",\"today\":\"Marseille\",\"country\":\"France\",\"x\":34.875,\"y\":70.73170731707317},\r\n    \"26\":{\"id\":\"26\",\"city\":\"Moskva\",\"today\":\"Moscow\",\"country\":\"Russia\",\"x\":93,\"y\":26.454033771106943},\r\n    \"27\":{\"id\":\"27\",\"city\":\"Munchen\",\"today\":\"Munich\",\"country\":\"Germany\",\"x\":43.625,\"y\":48.405253283302066},\r\n    \"28\":{\"id\":\"28\",\"city\":\"Palermo\",\"today\":\"Palermo\",\"country\":\"Italy\",\"x\":49.625,\"y\":93.80863039399625},\r\n    \"29\":{\"id\":\"29\",\"city\":\"Pamplona\",\"today\":\"Pamplona\",\"country\":\"Italy\",\"x\":20.375,\"y\":71.48217636022514},\r\n    \"30\":{\"id\":\"30\",\"city\":\"Paris\",\"today\":\"Paris\",\"country\":\"France\",\"x\":26.375,\"y\":49.71857410881801},\r\n    \"31\":{\"id\":\"31\",\"city\":\"Petrograd\",\"today\":\"St. Petersburg\",\"country\":\"Russia\",\"x\":83.875,\"y\":9.568480300187618},\r\n    \"32\":{\"id\":\"32\",\"city\":\"Riga\",\"today\":\"Riga\",\"country\":\"Latvia\",\"x\":67.75,\"y\":10.318949343339586},\r\n    \"33\":{\"id\":\"33\",\"city\":\"Roma\",\"today\":\"Rome\",\"country\":\"Italy\",\"x\":46,\"y\":74.85928705440901},\r\n    \"34\":{\"id\":\"34\",\"city\":\"Rostov\",\"today\":\"Rostov\",\"country\":\"Russia\",\"x\":95.625,\"y\":55.72232645403376},\r\n    \"35\":{\"id\":\"35\",\"city\":\"Sarajevo\",\"today\":\"Sarajevo\",\"country\":\"Bosnia and Herzegovina\",\"x\":61.375,\"y\":72.23264540337712},\r\n    \"36\":{\"id\":\"36\",\"city\":\"Sevastopol\",\"today\":\"Sevastopol\",\"country\":\"Ukraine\",\"x\":86.625,\"y\":66.60412757973734},\r\n    \"37\":{\"id\":\"37\",\"city\":\"Smolensk\",\"today\":\"Smolensk\",\"country\":\"Russia\",\"x\":85.125,\"y\":30.0187617260788},\r\n    \"38\":{\"id\":\"38\",\"city\":\"Smyrna\",\"today\":\"Izmir\",\"country\":\"Turkey\",\"x\":74.125,\"y\":93.24577861163228},\r\n    \"39\":{\"id\":\"39\",\"city\":\"Sochi\",\"today\":\"Sochi\",\"country\":\"Russia\",\"x\":95.125,\"y\":68.66791744840526},\r\n    \"40\":{\"id\":\"40\",\"city\":\"Sofia\",\"today\":\"Sofia\",\"country\":\"Bulgaria\",\"x\":67.625,\"y\":73.35834896810508},\r\n    \"41\":{\"id\":\"41\",\"city\":\"Stockholm\",\"today\":\"Stockholm\",\"country\":\"Sweden\",\"x\":56.25,\"y\":6.0037523452157595},\r\n    \"42\":{\"id\":\"42\",\"city\":\"Venezia\",\"today\":\"Venice\",\"country\":\"Italy\",\"x\":45.375,\"y\":62.10131332082551},\r\n    \"43\":{\"id\":\"43\",\"city\":\"Warszawa\",\"today\":\"Warsaw\",\"country\":\"Poland\",\"x\":64.625,\"y\":32.833020637898684},\r\n    \"44\":{\"id\":\"44\",\"city\":\"Wien\",\"today\":\"Vienna\",\"country\":\"Austria\",\"x\":54.75,\"y\":50.84427767354597},\r\n    \"45\":{\"id\":\"45\",\"city\":\"Wilno\",\"today\":\"Vilnius\",\"country\":\"Lithuania\",\"x\":75.125,\"y\":29.45590994371482},\r\n    \"46\":{\"id\":\"46\",\"city\":\"Zagrab\",\"today\":\"Zagreb\",\"country\":\"Croatia\",\"x\":53.37499999999999,\"y\":63.789868667917446},\r\n    \"47\":{\"id\":\"47\",\"city\":\"Zurich\",\"today\":\"Zurich\",\"country\":\"Switzerland\",\"x\":37.25,\"y\":57.410881801125704}\r\n  },\r\n  connections: {\r\n    \"1\": {\r\n      \"id\": 1,\r\n      \"from\": \"15\",\r\n      \"fromCity\": \"Edinburgh\",\r\n      \"to\": \"23\",\r\n      \"toCity\": \"London\",\r\n      \"elements\": [\r\n        { \"x\": 17, \"y\": 13.133208255159476 },\r\n        { \"x\": 18.375, \"y\": 17.636022514071296 },\r\n        { \"x\": 19.625, \"y\": 22.5140712945591 },\r\n        { \"x\": 21.125, \"y\": 27.392120075046904 }\r\n      ],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"2\": {\r\n      \"id\": 2,\r\n      \"from\": \"15\",\r\n      \"fromCity\": \"Edinburgh\",\r\n      \"to\": \"23\",\r\n      \"toCity\": \"London\",\r\n      \"elements\": [\r\n        { \"x\": 18.25, \"y\": 12.195121951219512 },\r\n        { \"x\": 19.5, \"y\": 17.26078799249531 },\r\n        { \"x\": 20.75, \"y\": 22.138836772983115 },\r\n        { \"x\": 22.375, \"y\": 26.82926829268293 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"3\": {\r\n      \"id\": 3,\r\n      \"from\": \"23\",\r\n      \"fromCity\": \"London\",\r\n      \"to\": \"14\",\r\n      \"toCity\": \"Dieppe\",\r\n      \"elements\": [\r\n        { \"x\": 21.5, \"y\": 34.146341463414636 },\r\n        { \"x\": 21.125, \"y\": 39.02439024390244 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"4\": {\r\n      \"id\": 4,\r\n      \"from\": \"23\",\r\n      \"fromCity\": \"London\",\r\n      \"to\": \"14\",\r\n      \"toCity\": \"Dieppe\",\r\n      \"elements\": [\r\n        { \"x\": 22.625, \"y\": 33.95872420262664 },\r\n        { \"x\": 22.375, \"y\": 39.21200750469043 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"5\": {\r\n      \"id\": 5,\r\n      \"from\": \"23\",\r\n      \"fromCity\": \"London\",\r\n      \"to\": \"1\",\r\n      \"toCity\": \"Amsterdam\",\r\n      \"elements\": [\r\n        { \"x\": 25.25, \"y\": 30.0187617260788 },\r\n        { \"x\": 28.625, \"y\": 30.206378986866795 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 2\r\n    },\r\n    \"6\": {\r\n      \"id\": 6,\r\n      \"from\": \"14\",\r\n      \"fromCity\": \"Dieppe\",\r\n      \"to\": \"6\",\r\n      \"toCity\": \"Brest\",\r\n      \"elements\": [\r\n        { \"x\": 18.75, \"y\": 42.77673545966229 },\r\n        { \"x\": 15.25, \"y\": 44.27767354596623 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"7\": {\r\n      \"id\": 7,\r\n      \"from\": \"6\",\r\n      \"fromCity\": \"Brest\",\r\n      \"to\": \"30\",\r\n      \"toCity\": \"Paris\",\r\n      \"elements\": [\r\n        { \"x\": 15.75, \"y\": 47.467166979362105 },\r\n        { \"x\": 19.125, \"y\": 48.21763602251407 },\r\n        { \"x\": 22.625, \"y\": 48.78048780487805 }\r\n      ],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"8\": {\r\n      \"id\": 8,\r\n      \"from\": \"14\",\r\n      \"fromCity\": \"Dieppe\",\r\n      \"to\": \"30\",\r\n      \"toCity\": \"Paris\",\r\n      \"elements\": [{ \"x\": 23.875, \"y\": 45.96622889305816 }],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"9\": {\r\n      \"id\": 9,\r\n      \"from\": \"14\",\r\n      \"fromCity\": \"Dieppe\",\r\n      \"to\": \"8\",\r\n      \"toCity\": \"Bruxelles\",\r\n      \"elements\": [\r\n        { \"x\": 24.375, \"y\": 41.46341463414634 },\r\n        { \"x\": 27.125, \"y\": 38.46153846153847 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"10\": {\r\n      \"id\": 10,\r\n      \"from\": \"1\",\r\n      \"fromCity\": \"Amsterdam\",\r\n      \"to\": \"8\",\r\n      \"toCity\": \"Bruxelles\",\r\n      \"elements\": [{ \"x\": 30.875000000000004, \"y\": 33.95872420262664 }],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"11\": {\r\n      \"id\": 11,\r\n      \"from\": \"8\",\r\n      \"fromCity\": \"Bruxelles\",\r\n      \"to\": \"30\",\r\n      \"toCity\": \"Paris\",\r\n      \"elements\": [\r\n        { \"x\": 28.499999999999996, \"y\": 40.71294559099437 },\r\n        { \"x\": 26.875, \"y\": 45.21575984990619 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"12\": {\r\n      \"id\": 12,\r\n      \"from\": \"8\",\r\n      \"fromCity\": \"Bruxelles\",\r\n      \"to\": \"30\",\r\n      \"toCity\": \"Paris\",\r\n      \"elements\": [\r\n        { \"x\": 29.5, \"y\": 41.651031894934334 },\r\n        { \"x\": 28.000000000000004, \"y\": 45.96622889305816 }\r\n      ],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"13\": {\r\n      \"id\": 13,\r\n      \"from\": \"1\",\r\n      \"fromCity\": \"Amsterdam\",\r\n      \"to\": \"18\",\r\n      \"toCity\": \"Frankfurt\",\r\n      \"elements\": [\r\n        { \"x\": 34, \"y\": 34.146341463414636 },\r\n        { \"x\": 36.5, \"y\": 37.89868667917448 }\r\n      ],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"14\": {\r\n      \"id\": 14,\r\n      \"from\": \"8\",\r\n      \"fromCity\": \"Bruxelles\",\r\n      \"to\": \"18\",\r\n      \"toCity\": \"Frankfurt\",\r\n      \"elements\": [\r\n        { \"x\": 32.25, \"y\": 37.5234521575985 },\r\n        { \"x\": 35.5, \"y\": 39.02439024390244 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"15\": {\r\n      \"id\": 15,\r\n      \"from\": \"1\",\r\n      \"fromCity\": \"Amsterdam\",\r\n      \"to\": \"17\",\r\n      \"toCity\": \"Essen\",\r\n      \"elements\": [\r\n        { \"x\": 32.125, \"y\": 27.204502814258912 },\r\n        { \"x\": 34.625, \"y\": 26.26641651031895 },\r\n        { \"x\": 37.75, \"y\": 29.268292682926827 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"16\": {\r\n      \"id\": 16,\r\n      \"from\": \"6\",\r\n      \"fromCity\": \"Brest\",\r\n      \"to\": \"29\",\r\n      \"toCity\": \"Pamplona\",\r\n      \"elements\": [\r\n        { \"x\": 15.5, \"y\": 49.906191369606 },\r\n        { \"x\": 18.25, \"y\": 53.47091932457786 },\r\n        { \"x\": 19.5, \"y\": 58.536585365853654 },\r\n        { \"x\": 19.75, \"y\": 63.977485928705434 }\r\n      ],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"17\": {\r\n      \"id\": 17,\r\n      \"from\": \"30\",\r\n      \"fromCity\": \"Paris\",\r\n      \"to\": \"29\",\r\n      \"toCity\": \"Pamplona\",\r\n      \"elements\": [\r\n        { \"x\": 24.25, \"y\": 52.5328330206379 },\r\n        { \"x\": 23.5, \"y\": 57.78611632270169 },\r\n        { \"x\": 22.375, \"y\": 62.6641651031895 },\r\n        { \"x\": 20.875, \"y\": 67.54221388367729 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"18\": {\r\n      \"id\": 18,\r\n      \"from\": \"30\",\r\n      \"fromCity\": \"Paris\",\r\n      \"to\": \"29\",\r\n      \"toCity\": \"Pamplona\",\r\n      \"elements\": [\r\n        { \"x\": 25.624999999999996, \"y\": 53.47091932457786 },\r\n        { \"x\": 24.75, \"y\": 58.536585365853654 },\r\n        { \"x\": 23.625, \"y\": 63.41463414634146 },\r\n        { \"x\": 21.875, \"y\": 68.29268292682927 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"19\": {\r\n      \"id\": 19,\r\n      \"from\": \"29\",\r\n      \"fromCity\": \"Pamplona\",\r\n      \"to\": \"24\",\r\n      \"toCity\": \"Madrid\",\r\n      \"elements\": [\r\n        { \"x\": 17.25, \"y\": 72.04502814258912 },\r\n        { \"x\": 14.499999999999998, \"y\": 75.60975609756098 },\r\n        { \"x\": 12.25, \"y\": 79.54971857410882 }\r\n      ],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"20\": {\r\n      \"id\": 20,\r\n      \"from\": \"29\",\r\n      \"fromCity\": \"Pamplona\",\r\n      \"to\": \"24\",\r\n      \"toCity\": \"Madrid\",\r\n      \"elements\": [\r\n        { \"x\": 18.125, \"y\": 73.54596622889305 },\r\n        { \"x\": 15.375, \"y\": 76.73545966228893 },\r\n        { \"x\": 13.125, \"y\": 80.86303939962477 }\r\n      ],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"21\": {\r\n      \"id\": 21,\r\n      \"from\": \"24\",\r\n      \"fromCity\": \"Madrid\",\r\n      \"to\": \"22\",\r\n      \"toCity\": \"Lisboa\",\r\n      \"elements\": [\r\n        { \"x\": 9, \"y\": 80.67542213883677 },\r\n        { \"x\": 5.375, \"y\": 78.79924953095684 },\r\n        { \"x\": 4.375, \"y\": 82.17636022514071 }\r\n      ],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"22\": {\r\n      \"id\": 22,\r\n      \"from\": \"24\",\r\n      \"fromCity\": \"Madrid\",\r\n      \"to\": \"11\",\r\n      \"toCity\": \"Cadiz\",\r\n      \"elements\": [\r\n        { \"x\": 13.125, \"y\": 85.55347091932458 },\r\n        { \"x\": 15, \"y\": 89.8686679174484 },\r\n        { \"x\": 13.25, \"y\": 92.4953095684803 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"23\": {\r\n      \"id\": 23,\r\n      \"from\": \"22\",\r\n      \"fromCity\": \"Lisboa\",\r\n      \"to\": \"11\",\r\n      \"toCity\": \"Cadiz\",\r\n      \"elements\": [\r\n        { \"x\": 5.625, \"y\": 89.49343339587243 },\r\n        { \"x\": 8.5, \"y\": 92.87054409005628 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"24\": {\r\n      \"id\": 24,\r\n      \"from\": \"24\",\r\n      \"fromCity\": \"Madrid\",\r\n      \"to\": \"4\",\r\n      \"toCity\": \"Barcelona\",\r\n      \"elements\": [\r\n        { \"x\": 15.125, \"y\": 83.67729831144464 },\r\n        { \"x\": 18.5, \"y\": 84.05253283302065 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"25\": {\r\n      \"id\": 25,\r\n      \"from\": \"29\",\r\n      \"fromCity\": \"Pamplona\",\r\n      \"to\": \"4\",\r\n      \"toCity\": \"Barcelona\",\r\n      \"elements\": [\r\n        { \"x\": 20.75, \"y\": 75.23452157598499 },\r\n        { \"x\": 21.125, \"y\": 80.48780487804879 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"26\": {\r\n      \"id\": 26,\r\n      \"from\": \"4\",\r\n      \"fromCity\": \"Barcelona\",\r\n      \"to\": \"25\",\r\n      \"toCity\": \"Marseille\",\r\n      \"elements\": [\r\n        { \"x\": 23.5, \"y\": 81.05065666041276 },\r\n        { \"x\": 25.874999999999996, \"y\": 77.6735459662289 },\r\n        { \"x\": 28.749999999999996, \"y\": 74.48405253283302 },\r\n        { \"x\": 31.874999999999996, \"y\": 72.23264540337712 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"27\": {\r\n      \"id\": 27,\r\n      \"from\": \"29\",\r\n      \"fromCity\": \"Pamplona\",\r\n      \"to\": \"25\",\r\n      \"toCity\": \"Marseille\",\r\n      \"elements\": [\r\n        { \"x\": 23.25, \"y\": 72.79549718574108 },\r\n        { \"x\": 25, \"y\": 70.1688555347092 },\r\n        { \"x\": 27.875, \"y\": 67.16697936210132 },\r\n        { \"x\": 31.374999999999996, \"y\": 68.29268292682927 }\r\n      ],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"28\": {\r\n      \"id\": 28,\r\n      \"from\": \"30\",\r\n      \"fromCity\": \"Paris\",\r\n      \"to\": \"25\",\r\n      \"toCity\": \"Marseille\",\r\n      \"elements\": [\r\n        { \"x\": 27, \"y\": 54.971857410881796 },\r\n        { \"x\": 28.375, \"y\": 60.0375234521576 },\r\n        { \"x\": 30.875000000000004, \"y\": 63.60225140712945 },\r\n        { \"x\": 33.625, \"y\": 67.3545966228893 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"29\": {\r\n      \"id\": 29,\r\n      \"from\": \"30\",\r\n      \"fromCity\": \"Paris\",\r\n      \"to\": \"47\",\r\n      \"toCity\": \"Zurich\",\r\n      \"elements\": [\r\n        { \"x\": 28.875, \"y\": 53.84615384615385 },\r\n        { \"x\": 31.5, \"y\": 57.223264540337716 },\r\n        { \"x\": 35, \"y\": 58.348968105065666 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"30\": {\r\n      \"id\": 30,\r\n      \"from\": \"47\",\r\n      \"fromCity\": \"Zurich\",\r\n      \"to\": \"25\",\r\n      \"toCity\": \"Marseille\",\r\n      \"elements\": [\r\n        { \"x\": 36.875, \"y\": 61.16322701688556 },\r\n        { \"x\": 36.125, \"y\": 66.22889305816135 }\r\n      ],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"31\": {\r\n      \"id\": 31,\r\n      \"from\": \"30\",\r\n      \"fromCity\": \"Paris\",\r\n      \"to\": \"18\",\r\n      \"toCity\": \"Frankfurt\",\r\n      \"elements\": [\r\n        { \"x\": 29.625, \"y\": 48.405253283302066 },\r\n        { \"x\": 33, \"y\": 46.34146341463415 },\r\n        { \"x\": 35.875, \"y\": 43.52720450281426 }\r\n      ],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"32\": {\r\n      \"id\": 32,\r\n      \"from\": \"30\",\r\n      \"fromCity\": \"Paris\",\r\n      \"to\": \"18\",\r\n      \"toCity\": \"Frankfurt\",\r\n      \"elements\": [\r\n        { \"x\": 30.125, \"y\": 50.28142589118198 },\r\n        { \"x\": 33.5, \"y\": 48.030018761726076 },\r\n        { \"x\": 36.5, \"y\": 45.0281425891182 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"33\": {\r\n      \"id\": 33,\r\n      \"from\": \"17\",\r\n      \"fromCity\": \"Essen\",\r\n      \"to\": \"18\",\r\n      \"toCity\": \"Frankfurt\",\r\n      \"elements\": [\r\n        { \"x\": 39.875, \"y\": 38.27392120075047 },\r\n        { \"x\": 41.5, \"y\": 35.45966228893058 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"34\": {\r\n      \"id\": 34,\r\n      \"from\": \"18\",\r\n      \"fromCity\": \"Frankfurt\",\r\n      \"to\": \"27\",\r\n      \"toCity\": \"Munchen\",\r\n      \"elements\": [\r\n        { \"x\": 39.125, \"y\": 45.77861163227016 },\r\n        { \"x\": 40.875, \"y\": 48.78048780487805 }\r\n      ],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"35\": {\r\n      \"id\": 35,\r\n      \"from\": \"47\",\r\n      \"fromCity\": \"Zurich\",\r\n      \"to\": \"27\",\r\n      \"toCity\": \"Munchen\",\r\n      \"elements\": [\r\n        { \"x\": 39.375, \"y\": 54.59662288930581 },\r\n        { \"x\": 41.875, \"y\": 51.21951219512195 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"36\": {\r\n      \"id\": 36,\r\n      \"from\": \"47\",\r\n      \"fromCity\": \"Zurich\",\r\n      \"to\": \"42\",\r\n      \"toCity\": \"Venezia\",\r\n      \"elements\": [\r\n        { \"x\": 39.625, \"y\": 59.09943714821764 },\r\n        { \"x\": 42.75, \"y\": 61.53846153846154 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"37\": {\r\n      \"id\": 37,\r\n      \"from\": \"27\",\r\n      \"fromCity\": \"Munchen\",\r\n      \"to\": \"42\",\r\n      \"toCity\": \"Venezia\",\r\n      \"elements\": [\r\n        { \"x\": 44, \"y\": 53.283302063789876 },\r\n        { \"x\": 44.75, \"y\": 58.16135084427767 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"38\": {\r\n      \"id\": 38,\r\n      \"from\": \"25\",\r\n      \"fromCity\": \"Marseille\",\r\n      \"to\": \"33\",\r\n      \"toCity\": \"Roma\",\r\n      \"elements\": [\r\n        { \"x\": 37.25, \"y\": 69.04315196998124 },\r\n        { \"x\": 40, \"y\": 65.85365853658537 },\r\n        { \"x\": 42.375, \"y\": 67.7298311444653 },\r\n        { \"x\": 44.375, \"y\": 72.04502814258912 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"39\": {\r\n      \"id\": 39,\r\n      \"from\": \"42\",\r\n      \"fromCity\": \"Venezia\",\r\n      \"to\": \"33\",\r\n      \"toCity\": \"Roma\",\r\n      \"elements\": [\r\n        { \"x\": 45.625, \"y\": 66.04127579737336 },\r\n        { \"x\": 46.375, \"y\": 70.91932457786116 }\r\n      ],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"40\": {\r\n      \"id\": 40,\r\n      \"from\": \"18\",\r\n      \"fromCity\": \"Frankfurt\",\r\n      \"to\": \"5\",\r\n      \"toCity\": \"Berlin\",\r\n      \"elements\": [\r\n        { \"x\": 40.5, \"y\": 40.150093808630395 },\r\n        { \"x\": 43.625, \"y\": 37.71106941838649 },\r\n        { \"x\": 46.75, \"y\": 35.647279549718576 }\r\n      ],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"41\": {\r\n      \"id\": 41,\r\n      \"from\": \"18\",\r\n      \"fromCity\": \"Frankfurt\",\r\n      \"to\": \"5\",\r\n      \"toCity\": \"Berlin\",\r\n      \"elements\": [\r\n        { \"x\": 41, \"y\": 41.651031894934334 },\r\n        { \"x\": 44.125, \"y\": 39.39962476547842 },\r\n        { \"x\": 47.25, \"y\": 37.3358348968105 }\r\n      ],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"42\": {\r\n      \"id\": 42,\r\n      \"from\": \"17\",\r\n      \"fromCity\": \"Essen\",\r\n      \"to\": \"5\",\r\n      \"toCity\": \"Berlin\",\r\n      \"elements\": [\r\n        { \"x\": 43.125, \"y\": 31.70731707317073 },\r\n        { \"x\": 46.5, \"y\": 32.270168855534706 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"43\": {\r\n      \"id\": 43,\r\n      \"from\": \"17\",\r\n      \"fromCity\": \"Essen\",\r\n      \"to\": \"20\",\r\n      \"toCity\": \"Kobenhavn\",\r\n      \"elements\": [\r\n        { \"x\": 40.375, \"y\": 28.142589118198874 },\r\n        { \"x\": 42.25, \"y\": 23.827392120075046 },\r\n        { \"x\": 44.25, \"y\": 19.324577861163228 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"44\": {\r\n      \"id\": 44,\r\n      \"from\": \"17\",\r\n      \"fromCity\": \"Essen\",\r\n      \"to\": \"20\",\r\n      \"toCity\": \"Kobenhavn\",\r\n      \"elements\": [\r\n        { \"x\": 41.5, \"y\": 29.080675422138835 },\r\n        { \"x\": 43.375, \"y\": 24.577861163227016 },\r\n        { \"x\": 45.25, \"y\": 20.26266416510319 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"45\": {\r\n      \"id\": 45,\r\n      \"from\": \"20\",\r\n      \"fromCity\": \"Kobenhavn\",\r\n      \"to\": \"41\",\r\n      \"toCity\": \"Stockholm\",\r\n      \"elements\": [\r\n        { \"x\": 47.875, \"y\": 13.696060037523452 },\r\n        { \"x\": 50.24999999999999, \"y\": 9.943714821763603 },\r\n        { \"x\": 53.37499999999999, \"y\": 6.941838649155723 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"46\": {\r\n      \"id\": 46,\r\n      \"from\": \"20\",\r\n      \"fromCity\": \"Kobenhavn\",\r\n      \"to\": \"41\",\r\n      \"toCity\": \"Stockholm\",\r\n      \"elements\": [\r\n        { \"x\": 48.75, \"y\": 15.196998123827393 },\r\n        { \"x\": 51.125, \"y\": 11.632270168855536 },\r\n        { \"x\": 54, \"y\": 8.442776735459661 }\r\n      ],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"47\": {\r\n      \"id\": 47,\r\n      \"from\": \"27\",\r\n      \"fromCity\": \"Munchen\",\r\n      \"to\": \"44\",\r\n      \"toCity\": \"Wien\",\r\n      \"elements\": [\r\n        { \"x\": 45.5, \"y\": 51.21951219512195 },\r\n        { \"x\": 48.75, \"y\": 53.65853658536586 },\r\n        { \"x\": 52.125, \"y\": 51.969981238273924 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"48\": {\r\n      \"id\": 48,\r\n      \"from\": \"42\",\r\n      \"fromCity\": \"Venezia\",\r\n      \"to\": \"46\",\r\n      \"toCity\": \"Zagrab\",\r\n      \"elements\": [\r\n        { \"x\": 47.875, \"y\": 60.60037523452158 },\r\n        { \"x\": 51.125, \"y\": 61.53846153846154 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"49\": {\r\n      \"id\": 49,\r\n      \"from\": \"33\",\r\n      \"fromCity\": \"Roma\",\r\n      \"to\": \"7\",\r\n      \"toCity\": \"Brindisi\",\r\n      \"elements\": [\r\n        { \"x\": 49.125, \"y\": 73.73358348968105 },\r\n        { \"x\": 52.37500000000001, \"y\": 75.79737335834896 }\r\n      ],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"50\": {\r\n      \"id\": 50,\r\n      \"from\": \"33\",\r\n      \"fromCity\": \"Roma\",\r\n      \"to\": \"28\",\r\n      \"toCity\": \"Palermo\",\r\n      \"elements\": [\r\n        { \"x\": 48.125, \"y\": 76.36022514071294 },\r\n        { \"x\": 51.125, \"y\": 80.1125703564728 },\r\n        { \"x\": 52, \"y\": 85.17823639774859 },\r\n        { \"x\": 50.74999999999999, \"y\": 90.2439024390244 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"51\": {\r\n      \"id\": 51,\r\n      \"from\": \"7\",\r\n      \"fromCity\": \"Brindisi\",\r\n      \"to\": \"28\",\r\n      \"toCity\": \"Palermo\",\r\n      \"elements\": [\r\n        { \"x\": 51.625, \"y\": 91.36960600375235 },\r\n        { \"x\": 54, \"y\": 87.4296435272045 },\r\n        { \"x\": 54.75, \"y\": 82.36397748592871 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"52\": {\r\n      \"id\": 52,\r\n      \"from\": \"7\",\r\n      \"fromCity\": \"Brindisi\",\r\n      \"to\": \"3\",\r\n      \"toCity\": \"Athina\",\r\n      \"elements\": [\r\n        { \"x\": 56.00000000000001, \"y\": 81.61350844277673 },\r\n        { \"x\": 57.375, \"y\": 86.30393996247655 },\r\n        { \"x\": 59.875, \"y\": 90.0562851782364 },\r\n        { \"x\": 63.5, \"y\": 90.61913696060037 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"53\": {\r\n      \"id\": 53,\r\n      \"from\": \"28\",\r\n      \"fromCity\": \"Palermo\",\r\n      \"to\": \"38\",\r\n      \"toCity\": \"Smyrna\",\r\n      \"elements\": [\r\n        { \"x\": 54, \"y\": 93.43339587242026 },\r\n        { \"x\": 57.375, \"y\": 93.24577861163228 },\r\n        { \"x\": 61, \"y\": 93.43339587242026 },\r\n        { \"x\": 64.5, \"y\": 93.43339587242026 },\r\n        { \"x\": 67.875, \"y\": 93.24577861163228 },\r\n        { \"x\": 71.625, \"y\": 93.43339587242026 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 2\r\n    },\r\n    \"54\": {\r\n      \"id\": 54,\r\n      \"from\": \"3\",\r\n      \"fromCity\": \"Athina\",\r\n      \"to\": \"38\",\r\n      \"toCity\": \"Smyrna\",\r\n      \"elements\": [\r\n        { \"x\": 68.375, \"y\": 89.49343339587243 },\r\n        { \"x\": 71.875, \"y\": 90.61913696060037 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"55\": {\r\n      \"id\": 55,\r\n      \"from\": \"5\",\r\n      \"fromCity\": \"Berlin\",\r\n      \"to\": \"13\",\r\n      \"toCity\": \"Danzig\",\r\n      \"elements\": [\r\n        { \"x\": 49.5, \"y\": 29.45590994371482 },\r\n        { \"x\": 51.125, \"y\": 24.202626641651033 },\r\n        { \"x\": 53.87499999999999, \"y\": 21.575984990619137 },\r\n        { \"x\": 57.49999999999999, \"y\": 21.575984990619137 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"56\": {\r\n      \"id\": 56,\r\n      \"from\": \"5\",\r\n      \"fromCity\": \"Berlin\",\r\n      \"to\": \"43\",\r\n      \"toCity\": \"Warszawa\",\r\n      \"elements\": [\r\n        { \"x\": 51.5, \"y\": 32.4577861163227 },\r\n        { \"x\": 54.87499999999999, \"y\": 31.51969981238274 },\r\n        { \"x\": 58.5, \"y\": 30.95684803001876 },\r\n        { \"x\": 62, \"y\": 31.51969981238274 }\r\n      ],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"57\": {\r\n      \"id\": 57,\r\n      \"from\": \"5\",\r\n      \"fromCity\": \"Berlin\",\r\n      \"to\": \"43\",\r\n      \"toCity\": \"Warszawa\",\r\n      \"elements\": [\r\n        { \"x\": 51.5, \"y\": 34.52157598499062 },\r\n        { \"x\": 55.00000000000001, \"y\": 33.39587242026266 },\r\n        { \"x\": 58.5, \"y\": 33.20825515947467 },\r\n        { \"x\": 61.875, \"y\": 33.39587242026266 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"58\": {\r\n      \"id\": 58,\r\n      \"from\": \"5\",\r\n      \"fromCity\": \"Berlin\",\r\n      \"to\": \"44\",\r\n      \"toCity\": \"Wien\",\r\n      \"elements\": [\r\n        { \"x\": 49.875, \"y\": 38.27392120075047 },\r\n        { \"x\": 51.24999999999999, \"y\": 42.964352720450286 },\r\n        { \"x\": 53, \"y\": 47.467166979362105 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"59\": {\r\n      \"id\": 59,\r\n      \"from\": \"13\",\r\n      \"fromCity\": \"Danzig\",\r\n      \"to\": \"43\",\r\n      \"toCity\": \"Warszawa\",\r\n      \"elements\": [\r\n        { \"x\": 62, \"y\": 24.765478424015008 },\r\n        { \"x\": 64, \"y\": 29.080675422138835 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"60\": {\r\n      \"id\": 60,\r\n      \"from\": \"13\",\r\n      \"fromCity\": \"Danzig\",\r\n      \"to\": \"32\",\r\n      \"toCity\": \"Riga\",\r\n      \"elements\": [\r\n        { \"x\": 60.62499999999999, \"y\": 19.324577861163228 },\r\n        { \"x\": 62.375, \"y\": 14.634146341463413 },\r\n        { \"x\": 65.375, \"y\": 11.25703564727955 }\r\n      ],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"61\": {\r\n      \"id\": 61,\r\n      \"from\": \"43\",\r\n      \"fromCity\": \"Warszawa\",\r\n      \"to\": \"44\",\r\n      \"toCity\": \"Wien\",\r\n      \"elements\": [\r\n        { \"x\": 56.49999999999999, \"y\": 48.21763602251407 },\r\n        { \"x\": 59.25, \"y\": 45.0281425891182 },\r\n        { \"x\": 61.625, \"y\": 41.088180112570356 },\r\n        { \"x\": 63.5, \"y\": 36.58536585365854 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"62\": {\r\n      \"id\": 62,\r\n      \"from\": \"44\",\r\n      \"fromCity\": \"Wien\",\r\n      \"to\": \"46\",\r\n      \"toCity\": \"Zagrab\",\r\n      \"elements\": [\r\n        { \"x\": 53.75, \"y\": 54.22138836772983 },\r\n        { \"x\": 53.5, \"y\": 59.66228893058161 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"63\": {\r\n      \"id\": 63,\r\n      \"from\": \"44\",\r\n      \"fromCity\": \"Wien\",\r\n      \"to\": \"10\",\r\n      \"toCity\": \"Budapest\",\r\n      \"elements\": [{ \"x\": 56.875, \"y\": 52.34521575984991 }],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"64\": {\r\n      \"id\": 64,\r\n      \"from\": \"44\",\r\n      \"fromCity\": \"Wien\",\r\n      \"to\": \"10\",\r\n      \"toCity\": \"Budapest\",\r\n      \"elements\": [{ \"x\": 56.25, \"y\": 54.03377110694184 }],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"65\": {\r\n      \"id\": 65,\r\n      \"from\": \"46\",\r\n      \"fromCity\": \"Zagrab\",\r\n      \"to\": \"10\",\r\n      \"toCity\": \"Budapest\",\r\n      \"elements\": [\r\n        { \"x\": 57.49999999999999, \"y\": 57.223264540337716 },\r\n        { \"x\": 55.375, \"y\": 61.53846153846154 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"66\": {\r\n      \"id\": 66,\r\n      \"from\": \"46\",\r\n      \"fromCity\": \"Zagrab\",\r\n      \"to\": \"35\",\r\n      \"toCity\": \"Sarajevo\",\r\n      \"elements\": [\r\n        { \"x\": 53.5, \"y\": 67.54221388367729 },\r\n        { \"x\": 55.50000000000001, \"y\": 72.04502814258912 },\r\n        { \"x\": 58.875, \"y\": 73.17073170731707 }\r\n      ],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"67\": {\r\n      \"id\": 67,\r\n      \"from\": \"10\",\r\n      \"fromCity\": \"Budapest\",\r\n      \"to\": \"35\",\r\n      \"toCity\": \"Sarajevo\",\r\n      \"elements\": [\r\n        { \"x\": 59.75, \"y\": 58.16135084427767 },\r\n        { \"x\": 60.25, \"y\": 63.22701688555347 },\r\n        { \"x\": 60.75000000000001, \"y\": 68.48030018761726 }\r\n      ],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"68\": {\r\n      \"id\": 68,\r\n      \"from\": \"35\",\r\n      \"fromCity\": \"Sarajevo\",\r\n      \"to\": \"3\",\r\n      \"toCity\": \"Athina\",\r\n      \"elements\": [\r\n        { \"x\": 61.25000000000001, \"y\": 75.79737335834896 },\r\n        { \"x\": 61.12499999999999, \"y\": 81.05065666041276 },\r\n        { \"x\": 60.75000000000001, \"y\": 86.11632270168855 },\r\n        { \"x\": 63.125, \"y\": 88.18011257035647 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"69\": {\r\n      \"id\": 69,\r\n      \"from\": \"35\",\r\n      \"fromCity\": \"Sarajevo\",\r\n      \"to\": \"40\",\r\n      \"toCity\": \"Sofia\",\r\n      \"elements\": [\r\n        { \"x\": 63.625, \"y\": 70.1688555347092 },\r\n        { \"x\": 66.25, \"y\": 70.1688555347092 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"70\": {\r\n      \"id\": 70,\r\n      \"from\": \"40\",\r\n      \"fromCity\": \"Sofia\",\r\n      \"to\": \"3\",\r\n      \"toCity\": \"Athina\",\r\n      \"elements\": [\r\n        { \"x\": 66.125, \"y\": 75.60975609756098 },\r\n        { \"x\": 64.375, \"y\": 81.05065666041276 },\r\n        { \"x\": 65.25, \"y\": 85.92870544090057 }\r\n      ],\r\n      \"color\": \"purple\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"71\": {\r\n      \"id\": 71,\r\n      \"from\": \"40\",\r\n      \"fromCity\": \"Sofia\",\r\n      \"to\": \"12\",\r\n      \"toCity\": \"Constantinople\",\r\n      \"elements\": [\r\n        { \"x\": 69.75, \"y\": 75.23452157598499 },\r\n        { \"x\": 72.875, \"y\": 77.86116322701689 },\r\n        { \"x\": 75.875, \"y\": 80.30018761726079 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"72\": {\r\n      \"id\": 72,\r\n      \"from\": \"12\",\r\n      \"fromCity\": \"Constantinople\",\r\n      \"to\": \"38\",\r\n      \"toCity\": \"Smyrna\",\r\n      \"elements\": [\r\n        { \"x\": 76.75, \"y\": 84.9906191369606 },\r\n        { \"x\": 75.125, \"y\": 89.6810506566604 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"73\": {\r\n      \"id\": 73,\r\n      \"from\": \"40\",\r\n      \"fromCity\": \"Sofia\",\r\n      \"to\": \"9\",\r\n      \"toCity\": \"Bucuresti\",\r\n      \"elements\": [\r\n        { \"x\": 72.375, \"y\": 67.7298311444653 },\r\n        { \"x\": 70.125, \"y\": 71.48217636022514 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"74\": {\r\n      \"id\": 74,\r\n      \"from\": \"10\",\r\n      \"fromCity\": \"Budapest\",\r\n      \"to\": \"9\",\r\n      \"toCity\": \"Bucuresti\",\r\n      \"elements\": [\r\n        { \"x\": 61.625, \"y\": 55.34709193245778 },\r\n        { \"x\": 64.75, \"y\": 57.78611632270169 },\r\n        { \"x\": 67.75, \"y\": 60.41275797373359 },\r\n        { \"x\": 70.875, \"y\": 62.6641651031895 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"75\": {\r\n      \"id\": 75,\r\n      \"from\": \"9\",\r\n      \"fromCity\": \"Bucuresti\",\r\n      \"to\": \"12\",\r\n      \"toCity\": \"Constantinople\",\r\n      \"elements\": [\r\n        { \"x\": 74.5, \"y\": 68.10506566604127 },\r\n        { \"x\": 75.875, \"y\": 72.79549718574108 },\r\n        { \"x\": 77.125, \"y\": 77.6735459662289 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"76\": {\r\n      \"id\": 76,\r\n      \"from\": \"10\",\r\n      \"fromCity\": \"Budapest\",\r\n      \"to\": \"21\",\r\n      \"toCity\": \"Kyiv\",\r\n      \"elements\": [\r\n        { \"x\": 60.375, \"y\": 50.84427767354597 },\r\n        { \"x\": 63.24999999999999, \"y\": 47.091932457786115 },\r\n        { \"x\": 66.125, \"y\": 44.27767354596623 },\r\n        { \"x\": 69.375, \"y\": 42.40150093808631 },\r\n        { \"x\": 72.75, \"y\": 41.275797373358344 },\r\n        { \"x\": 76.375, \"y\": 41.46341463414634 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"77\": {\r\n      \"id\": 77,\r\n      \"from\": \"9\",\r\n      \"fromCity\": \"Bucuresti\",\r\n      \"to\": \"21\",\r\n      \"toCity\": \"Kyiv\",\r\n      \"elements\": [\r\n        { \"x\": 77, \"y\": 45.40337711069418 },\r\n        { \"x\": 75.875, \"y\": 50.28142589118198 },\r\n        { \"x\": 74.75, \"y\": 55.34709193245778 },\r\n        { \"x\": 73.75, \"y\": 60.0375234521576 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"78\": {\r\n      \"id\": 78,\r\n      \"from\": \"43\",\r\n      \"fromCity\": \"Warszawa\",\r\n      \"to\": \"21\",\r\n      \"toCity\": \"Kyiv\",\r\n      \"elements\": [\r\n        { \"x\": 66.25, \"y\": 35.45966228893058 },\r\n        { \"x\": 69.25, \"y\": 38.46153846153847 },\r\n        { \"x\": 72.75, \"y\": 39.39962476547842 },\r\n        { \"x\": 76.25, \"y\": 39.39962476547842 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"79\": {\r\n      \"id\": 79,\r\n      \"from\": \"21\",\r\n      \"fromCity\": \"Kyiv\",\r\n      \"to\": \"45\",\r\n      \"toCity\": \"Wilno\",\r\n      \"elements\": [\r\n        { \"x\": 77.5, \"y\": 31.894934333958723 },\r\n        { \"x\": 79, \"y\": 36.39774859287054 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"80\": {\r\n      \"id\": 80,\r\n      \"from\": \"43\",\r\n      \"fromCity\": \"Warszawa\",\r\n      \"to\": \"45\",\r\n      \"toCity\": \"Wilno\",\r\n      \"elements\": [\r\n        { \"x\": 66.25, \"y\": 30.0187617260788 },\r\n        { \"x\": 69.125, \"y\": 26.82926829268293 },\r\n        { \"x\": 72.625, \"y\": 27.954971857410882 }\r\n      ],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"81\": {\r\n      \"id\": 81,\r\n      \"from\": \"32\",\r\n      \"fromCity\": \"Riga\",\r\n      \"to\": \"45\",\r\n      \"toCity\": \"Wilno\",\r\n      \"elements\": [\r\n        { \"x\": 67.5, \"y\": 13.883677298311445 },\r\n        { \"x\": 68.125, \"y\": 19.324577861163228 },\r\n        { \"x\": 70.5, \"y\": 23.452157598499063 },\r\n        { \"x\": 73.375, \"y\": 26.07879924953096 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"82\": {\r\n      \"id\": 82,\r\n      \"from\": \"41\",\r\n      \"fromCity\": \"Stockholm\",\r\n      \"to\": \"31\",\r\n      \"toCity\": \"Petrograd\",\r\n      \"elements\": [\r\n        { \"x\": 58.12500000000001, \"y\": 9.193245778611631 },\r\n        { \"x\": 60.62499999999999, \"y\": 7.879924953095685 },\r\n        { \"x\": 63.87500000000001, \"y\": 6.191369606003752 },\r\n        { \"x\": 67.625, \"y\": 6.191369606003752 },\r\n        { \"x\": 70.875, \"y\": 6.191369606003752 },\r\n        { \"x\": 74.5, \"y\": 6.191369606003752 },\r\n        { \"x\": 78, \"y\": 6.191369606003752 },\r\n        { \"x\": 81.5, \"y\": 7.5046904315197 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"83\": {\r\n      \"id\": 83,\r\n      \"from\": \"32\",\r\n      \"fromCity\": \"Riga\",\r\n      \"to\": \"31\",\r\n      \"toCity\": \"Petrograd\",\r\n      \"elements\": [\r\n        { \"x\": 70.5, \"y\": 10.506566604127581 },\r\n        { \"x\": 73.875, \"y\": 10.318949343339586 },\r\n        { \"x\": 77.375, \"y\": 9.943714821763603 },\r\n        { \"x\": 81, \"y\": 9.943714821763603 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"84\": {\r\n      \"id\": 84,\r\n      \"from\": \"45\",\r\n      \"fromCity\": \"Wilno\",\r\n      \"to\": \"31\",\r\n      \"toCity\": \"Petrograd\",\r\n      \"elements\": [\r\n        { \"x\": 82.625, \"y\": 13.133208255159476 },\r\n        { \"x\": 80.625, \"y\": 17.26078799249531 },\r\n        { \"x\": 78.625, \"y\": 21.388367729831145 },\r\n        { \"x\": 76.5, \"y\": 25.70356472795497 }\r\n      ],\r\n      \"color\": \"blue\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"85\": {\r\n      \"id\": 85,\r\n      \"from\": \"45\",\r\n      \"fromCity\": \"Wilno\",\r\n      \"to\": \"37\",\r\n      \"toCity\": \"Smolensk\",\r\n      \"elements\": [\r\n        { \"x\": 77.5, \"y\": 27.01688555347092 },\r\n        { \"x\": 79.875, \"y\": 24.953095684803 },\r\n        { \"x\": 82.625, \"y\": 27.954971857410882 }\r\n      ],\r\n      \"color\": \"yellow\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"86\": {\r\n      \"id\": 86,\r\n      \"from\": \"37\",\r\n      \"fromCity\": \"Smolensk\",\r\n      \"to\": \"21\",\r\n      \"toCity\": \"Kyiv\",\r\n      \"elements\": [\r\n        { \"x\": 85.625, \"y\": 33.771106941838646 },\r\n        { \"x\": 84.875, \"y\": 38.83677298311445 },\r\n        { \"x\": 81.5, \"y\": 40.71294559099437 }\r\n      ],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"87\": {\r\n      \"id\": 87,\r\n      \"from\": \"21\",\r\n      \"fromCity\": \"Kyiv\",\r\n      \"to\": \"19\",\r\n      \"toCity\": \"Kharkov\",\r\n      \"elements\": [\r\n        { \"x\": 79.75, \"y\": 44.46529080675422 },\r\n        { \"x\": 82.125, \"y\": 48.405253283302066 },\r\n        { \"x\": 85.5, \"y\": 49.71857410881801 },\r\n        { \"x\": 89.25, \"y\": 48.96810506566604 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"88\": {\r\n      \"id\": 88,\r\n      \"from\": \"19\",\r\n      \"fromCity\": \"Kharkov\",\r\n      \"to\": \"34\",\r\n      \"toCity\": \"Rostov\",\r\n      \"elements\": [\r\n        { \"x\": 94.5, \"y\": 48.405253283302066 },\r\n        { \"x\": 95.5, \"y\": 51.78236397748592 }\r\n      ],\r\n      \"color\": \"green\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"89\": {\r\n      \"id\": 89,\r\n      \"from\": \"34\",\r\n      \"fromCity\": \"Rostov\",\r\n      \"to\": \"36\",\r\n      \"toCity\": \"Sevastopol\",\r\n      \"elements\": [\r\n        { \"x\": 87.5, \"y\": 62.851782363977485 },\r\n        { \"x\": 88, \"y\": 57.5984990619137 },\r\n        { \"x\": 89.5, \"y\": 54.03377110694184 },\r\n        { \"x\": 92.875, \"y\": 54.971857410881796 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"90\": {\r\n      \"id\": 90,\r\n      \"from\": \"9\",\r\n      \"fromCity\": \"Bucuresti\",\r\n      \"to\": \"36\",\r\n      \"toCity\": \"Sevastopol\",\r\n      \"elements\": [\r\n        { \"x\": 75.5, \"y\": 61.72607879924953 },\r\n        { \"x\": 78.625, \"y\": 58.91181988742964 },\r\n        { \"x\": 82.25, \"y\": 59.849906191369605 },\r\n        { \"x\": 85.125, \"y\": 63.22701688555347 }\r\n      ],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"91\": {\r\n      \"id\": 91,\r\n      \"from\": \"34\",\r\n      \"fromCity\": \"Rostov\",\r\n      \"to\": \"39\",\r\n      \"toCity\": \"Sochi\",\r\n      \"elements\": [\r\n        { \"x\": 95.375, \"y\": 59.47467166979362 },\r\n        { \"x\": 95.125, \"y\": 64.54033771106941 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"92\": {\r\n      \"id\": 92,\r\n      \"from\": \"36\",\r\n      \"fromCity\": \"Sevastopol\",\r\n      \"to\": \"39\",\r\n      \"toCity\": \"Sochi\",\r\n      \"elements\": [\r\n        { \"x\": 89.25, \"y\": 66.97936210131333 },\r\n        { \"x\": 92.5, \"y\": 67.7298311444653 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 1\r\n    },\r\n    \"93\": {\r\n      \"id\": 93,\r\n      \"from\": \"36\",\r\n      \"fromCity\": \"Sevastopol\",\r\n      \"to\": \"12\",\r\n      \"toCity\": \"Constantinople\",\r\n      \"elements\": [\r\n        { \"x\": 79.75, \"y\": 78.98686679174483 },\r\n        { \"x\": 82.125, \"y\": 77.11069418386491 },\r\n        { \"x\": 84.5, \"y\": 75.23452157598499 },\r\n        { \"x\": 85.5, \"y\": 70.1688555347092 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 2\r\n    },\r\n    \"94\": {\r\n      \"id\": 94,\r\n      \"from\": \"36\",\r\n      \"fromCity\": \"Sevastopol\",\r\n      \"to\": \"16\",\r\n      \"toCity\": \"Erzurum\",\r\n      \"elements\": [\r\n        { \"x\": 86.875, \"y\": 70.1688555347092 },\r\n        { \"x\": 87.125, \"y\": 75.42213883677297 },\r\n        { \"x\": 88.5, \"y\": 80.48780487804879 },\r\n        { \"x\": 90.875, \"y\": 84.24015009380864 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 2\r\n    },\r\n    \"95\": {\r\n      \"id\": 95,\r\n      \"from\": \"39\",\r\n      \"fromCity\": \"Sochi\",\r\n      \"to\": \"16\",\r\n      \"toCity\": \"Erzurum\",\r\n      \"elements\": [\r\n        { \"x\": 94.625, \"y\": 72.79549718574108 },\r\n        { \"x\": 94.25, \"y\": 77.6735459662289 },\r\n        { \"x\": 93.625, \"y\": 82.92682926829268 }\r\n      ],\r\n      \"color\": \"red\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"96\": {\r\n      \"id\": 96,\r\n      \"from\": \"16\",\r\n      \"fromCity\": \"Erzurum\",\r\n      \"to\": \"2\",\r\n      \"toCity\": \"Angora\",\r\n      \"elements\": [\r\n        { \"x\": 88, \"y\": 91.55722326454033 },\r\n        { \"x\": 91.5, \"y\": 92.3076923076923 },\r\n        { \"x\": 93.75, \"y\": 90.0562851782364 }\r\n      ],\r\n      \"color\": \"black\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"97\": {\r\n      \"id\": 97,\r\n      \"from\": \"2\",\r\n      \"fromCity\": \"Angora\",\r\n      \"to\": \"12\",\r\n      \"toCity\": \"Constantinople\",\r\n      \"elements\": [\r\n        { \"x\": 80.625, \"y\": 84.42776735459663 },\r\n        { \"x\": 83.375, \"y\": 87.4296435272045 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"98\": {\r\n      \"id\": 98,\r\n      \"from\": \"2\",\r\n      \"fromCity\": \"Angora\",\r\n      \"to\": \"38\",\r\n      \"toCity\": \"Smyrna\",\r\n      \"elements\": [\r\n        { \"x\": 76.875, \"y\": 93.80863039399625 },\r\n        { \"x\": 80.25, \"y\": 93.62101313320825 },\r\n        { \"x\": 83.75, \"y\": 91.74484052532833 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"99\": {\r\n      \"id\": 99,\r\n      \"from\": \"37\",\r\n      \"fromCity\": \"Smolensk\",\r\n      \"to\": \"26\",\r\n      \"toCity\": \"Moskva\",\r\n      \"elements\": [\r\n        { \"x\": 87.5, \"y\": 30.206378986866795 },\r\n        { \"x\": 91, \"y\": 28.517823639774857 }\r\n      ],\r\n      \"color\": \"orange\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"100\": {\r\n      \"id\": 100,\r\n      \"from\": \"31\",\r\n      \"fromCity\": \"Petrograd\",\r\n      \"to\": \"26\",\r\n      \"toCity\": \"Moskva\",\r\n      \"elements\": [\r\n        { \"x\": 86.25, \"y\": 10.694183864915573 },\r\n        { \"x\": 89.5, \"y\": 13.320825515947469 },\r\n        { \"x\": 91.625, \"y\": 17.636022514071296 },\r\n        { \"x\": 92.625, \"y\": 23.076923076923077 }\r\n      ],\r\n      \"color\": \"white\",\r\n      \"locomotive\": 0\r\n    },\r\n    \"101\": {\r\n      \"id\": 101,\r\n      \"from\": \"26\",\r\n      \"fromCity\": \"Moskva\",\r\n      \"to\": \"19\",\r\n      \"toCity\": \"Kharkov\",\r\n      \"elements\": [\r\n        { \"x\": 94.25, \"y\": 30.0187617260788 },\r\n        { \"x\": 95.375, \"y\": 35.0844277673546 },\r\n        { \"x\": 95.125, \"y\": 40.52532833020638 },\r\n        { \"x\": 93.375, \"y\": 45.0281425891182 }\r\n      ],\r\n      \"color\": \"gray\",\r\n      \"locomotive\": 0\r\n    }\r\n  },\r\n  destinations: {\r\n    \"1\": {\r\n      \"id\": \"1\",\r\n      \"from\": \"3\",\r\n      \"to\": \"2\",\r\n      \"fromCity\": \"Athina\",\r\n      \"toCity\": \"Angora\",\r\n      \"value\": \"5\",\r\n    },\r\n    \"2\": {\r\n      \"id\": \"2\",\r\n      \"from\": \"10\",\r\n      \"to\": \"40\",\r\n      \"fromCity\": \"Budapest\",\r\n      \"toCity\": \"Sofia\",\r\n      \"value\": \"5\",\r\n    },\r\n    \"3\": {\r\n      \"id\": \"3\",\r\n      \"from\": \"18\",\r\n      \"to\": \"20\",\r\n      \"fromCity\": \"Frankfurt\",\r\n      \"toCity\": \"Kobenhavn\",\r\n      \"value\": \"5\",\r\n    },\r\n    \"4\": {\r\n      \"id\": \"4\",\r\n      \"from\": \"34\",\r\n      \"to\": \"16\",\r\n      \"fromCity\": \"Rostov\",\r\n      \"toCity\": \"Erzurum\",\r\n      \"value\": \"5\",\r\n    },\r\n    \"5\": {\r\n      \"id\": \"5\",\r\n      \"from\": \"40\",\r\n      \"to\": \"38\",\r\n      \"fromCity\": \"Sofia\",\r\n      \"toCity\": \"Smyrna\",\r\n      \"value\": \"5\",\r\n    },\r\n    \"6\": {\r\n      \"id\": \"6\",\r\n      \"from\": \"21\",\r\n      \"to\": \"31\",\r\n      \"fromCity\": \"Kyiv\",\r\n      \"toCity\": \"Petrograd\",\r\n      \"value\": \"6\",\r\n    },\r\n    \"7\": {\r\n      \"id\": \"7\",\r\n      \"from\": \"47\",\r\n      \"to\": \"7\",\r\n      \"fromCity\": \"Zurich\",\r\n      \"toCity\": \"Brindisi\",\r\n      \"value\": \"6\",\r\n    },\r\n    \"8\": {\r\n      \"id\": \"8\",\r\n      \"from\": \"47\",\r\n      \"to\": \"10\",\r\n      \"fromCity\": \"Zurich\",\r\n      \"toCity\": \"Budapest\",\r\n      \"value\": \"6\",\r\n    },\r\n    \"9\": {\r\n      \"id\": \"9\",\r\n      \"from\": \"43\",\r\n      \"to\": \"37\",\r\n      \"fromCity\": \"Warszawa\",\r\n      \"toCity\": \"Smolensk\",\r\n      \"value\": \"6\",\r\n    },\r\n    \"10\": {\r\n      \"id\": \"10\",\r\n      \"from\": \"46\",\r\n      \"to\": \"7\",\r\n      \"fromCity\": \"Zagrab\",\r\n      \"toCity\": \"Brindisi\",\r\n      \"value\": \"6\",\r\n    },\r\n    \"11\": {\r\n      \"id\": \"11\",\r\n      \"from\": \"30\",\r\n      \"to\": \"46\",\r\n      \"fromCity\": \"Paris\",\r\n      \"toCity\": \"Zagrab\",\r\n      \"value\": \"7\",\r\n    },\r\n    \"12\": {\r\n      \"id\": \"12\",\r\n      \"from\": \"6\",\r\n      \"to\": \"25\",\r\n      \"fromCity\": \"Brest\",\r\n      \"toCity\": \"Marseille\",\r\n      \"value\": \"7\",\r\n    },\r\n    \"13\": {\r\n      \"id\": \"13\",\r\n      \"from\": \"23\",\r\n      \"to\": \"5\",\r\n      \"fromCity\": \"London\",\r\n      \"toCity\": \"Berlin\",\r\n      \"value\": \"7\",\r\n    },\r\n    \"14\": {\r\n      \"id\": \"14\",\r\n      \"from\": \"15\",\r\n      \"to\": \"30\",\r\n      \"fromCity\": \"Edinburgh\",\r\n      \"toCity\": \"Paris\",\r\n      \"value\": \"7\",\r\n    },\r\n    \"15\": {\r\n      \"id\": \"15\",\r\n      \"from\": \"1\",\r\n      \"to\": \"29\",\r\n      \"fromCity\": \"Amsterdam\",\r\n      \"toCity\": \"Pamplona\",\r\n      \"value\": \"7\",\r\n    },\r\n    \"16\": {\r\n      \"id\": \"16\",\r\n      \"from\": \"33\",\r\n      \"to\": \"38\",\r\n      \"fromCity\": \"Roma\",\r\n      \"toCity\": \"Smyrna\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"17\": {\r\n      \"id\": \"17\",\r\n      \"from\": \"28\",\r\n      \"to\": \"12\",\r\n      \"fromCity\": \"Palermo\",\r\n      \"toCity\": \"Constantinople\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"18\": {\r\n      \"id\": \"18\",\r\n      \"from\": \"35\",\r\n      \"to\": \"36\",\r\n      \"fromCity\": \"Sarajevo\",\r\n      \"toCity\": \"Sevastopol\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"19\": {\r\n      \"id\": \"19\",\r\n      \"from\": \"24\",\r\n      \"to\": \"14\",\r\n      \"fromCity\": \"Madrid\",\r\n      \"toCity\": \"Dieppe\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"20\": {\r\n      \"id\": \"20\",\r\n      \"from\": \"4\",\r\n      \"to\": \"8\",\r\n      \"fromCity\": \"Barcelona\",\r\n      \"toCity\": \"Bruxelles\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"21\": {\r\n      \"id\": \"21\",\r\n      \"from\": \"30\",\r\n      \"to\": \"44\",\r\n      \"fromCity\": \"Paris\",\r\n      \"toCity\": \"Wien\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"22\": {\r\n      \"id\": \"22\",\r\n      \"from\": \"4\",\r\n      \"to\": \"27\",\r\n      \"fromCity\": \"Barcelona\",\r\n      \"toCity\": \"Munchen\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"23\": {\r\n      \"id\": \"23\",\r\n      \"from\": \"6\",\r\n      \"to\": \"42\",\r\n      \"fromCity\": \"Brest\",\r\n      \"toCity\": \"Venezia\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"24\": {\r\n      \"id\": \"24\",\r\n      \"from\": \"37\",\r\n      \"to\": \"34\",\r\n      \"fromCity\": \"Smolensk\",\r\n      \"toCity\": \"Rostov\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"25\": {\r\n      \"id\": \"25\",\r\n      \"from\": \"25\",\r\n      \"to\": \"17\",\r\n      \"fromCity\": \"Marseille\",\r\n      \"toCity\": \"Essen\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"26\": {\r\n      \"id\": \"26\",\r\n      \"from\": \"21\",\r\n      \"to\": \"39\",\r\n      \"fromCity\": \"Kyiv\",\r\n      \"toCity\": \"Sochi\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"27\": {\r\n      \"id\": \"27\",\r\n      \"from\": \"24\",\r\n      \"to\": \"47\",\r\n      \"fromCity\": \"Madrid\",\r\n      \"toCity\": \"Zurich\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"28\": {\r\n      \"id\": \"28\",\r\n      \"from\": \"5\",\r\n      \"to\": \"9\",\r\n      \"fromCity\": \"Berlin\",\r\n      \"toCity\": \"Bucuresti\",\r\n      \"value\": \"8\",\r\n    },\r\n    \"29\": {\r\n      \"id\": \"29\",\r\n      \"from\": \"8\",\r\n      \"to\": \"13\",\r\n      \"fromCity\": \"Bruxelles\",\r\n      \"toCity\": \"Danzig\",\r\n      \"value\": \"9\",\r\n    },\r\n    \"30\": {\r\n      \"id\": \"30\",\r\n      \"from\": \"5\",\r\n      \"to\": \"33\",\r\n      \"fromCity\": \"Berlin\",\r\n      \"toCity\": \"Roma\",\r\n      \"value\": \"9\",\r\n    },\r\n    \"31\": {\r\n      \"id\": \"31\",\r\n      \"from\": \"2\",\r\n      \"to\": \"19\",\r\n      \"fromCity\": \"Angora\",\r\n      \"toCity\": \"Kharkov\",\r\n      \"value\": \"10\",\r\n    },\r\n    \"32\": {\r\n      \"id\": \"32\",\r\n      \"from\": \"32\",\r\n      \"to\": \"9\",\r\n      \"fromCity\": \"Riga\",\r\n      \"toCity\": \"Bucuresti\",\r\n      \"value\": \"10\",\r\n    },\r\n    \"33\": {\r\n      \"id\": \"33\",\r\n      \"from\": \"17\",\r\n      \"to\": \"21\",\r\n      \"fromCity\": \"Essen\",\r\n      \"toCity\": \"Kyiv\",\r\n      \"value\": \"10\",\r\n    },\r\n    \"34\": {\r\n      \"id\": \"34\",\r\n      \"from\": \"42\",\r\n      \"to\": \"12\",\r\n      \"fromCity\": \"Venezia\",\r\n      \"toCity\": \"Constantinople\",\r\n      \"value\": \"10\",\r\n    },\r\n    \"35\": {\r\n      \"id\": \"35\",\r\n      \"from\": \"23\",\r\n      \"to\": \"44\",\r\n      \"fromCity\": \"London\",\r\n      \"toCity\": \"Wien\",\r\n      \"value\": \"10\",\r\n    },\r\n    \"36\": {\r\n      \"id\": \"36\",\r\n      \"from\": \"3\",\r\n      \"to\": \"45\",\r\n      \"fromCity\": \"Athina\",\r\n      \"toCity\": \"Wilno\",\r\n      \"value\": \"11\",\r\n    },\r\n    \"37\": {\r\n      \"id\": \"37\",\r\n      \"from\": \"41\",\r\n      \"to\": \"44\",\r\n      \"fromCity\": \"Stockholm\",\r\n      \"toCity\": \"Wien\",\r\n      \"value\": \"11\",\r\n    },\r\n    \"38\": {\r\n      \"id\": \"38\",\r\n      \"from\": \"5\",\r\n      \"to\": \"26\",\r\n      \"fromCity\": \"Berlin\",\r\n      \"toCity\": \"Moskva\",\r\n      \"value\": \"12\",\r\n    },\r\n    \"39\": {\r\n      \"id\": \"39\",\r\n      \"from\": \"1\",\r\n      \"to\": \"45\",\r\n      \"fromCity\": \"Amsterdam\",\r\n      \"toCity\": \"Wilno\",\r\n      \"value\": \"12\",\r\n    },\r\n    \"40\": {\r\n      \"id\": \"40\",\r\n      \"from\": \"18\",\r\n      \"to\": \"37\",\r\n      \"fromCity\": \"Frankfurt\",\r\n      \"toCity\": \"Smolensk\",\r\n      \"value\": \"13\",\r\n    }\r\n  },\r\n  longDestinations: {\r\n    \"1\": {\r\n      \"id\": \"1\",\r\n      \"from\": \"22\",\r\n      \"to\": \"13\",\r\n      \"fromCity\": \"Lisboa\",\r\n      \"toCity\": \"Danzig\",\r\n      \"value\": \"20\",\r\n    },\r\n    \"2\": {\r\n      \"id\": \"2\",\r\n      \"from\": \"6\",\r\n      \"to\": \"31\",\r\n      \"fromCity\": \"Brest\",\r\n      \"toCity\": \"Petrograd\",\r\n      \"value\": \"20\",\r\n    },\r\n    \"3\": {\r\n      \"id\": \"3\",\r\n      \"from\": \"28\",\r\n      \"to\": \"26\",\r\n      \"fromCity\": \"Palermo\",\r\n      \"toCity\": \"Moskva\",\r\n      \"value\": \"20\",\r\n    },\r\n    \"4\": {\r\n      \"id\": \"4\",\r\n      \"from\": \"20\",\r\n      \"to\": \"16\",\r\n      \"fromCity\": \"Kobenhavn\",\r\n      \"toCity\": \"Erzurum\",\r\n      \"value\": \"21\",\r\n    },\r\n    \"5\": {\r\n      \"id\": \"5\",\r\n      \"from\": \"15\",\r\n      \"to\": \"3\",\r\n      \"fromCity\": \"Edinburgh\",\r\n      \"toCity\": \"Athina\",\r\n      \"value\": \"21\",\r\n    },\r\n    \"6\": {\r\n      \"id\": \"6\",\r\n      \"from\": \"11\",\r\n      \"to\": \"41\",\r\n      \"fromCity\": \"Cadiz\",\r\n      \"toCity\": \"Stockholm\",\r\n      \"value\": \"21\",\r\n    }\r\n  }\r\n}","import { currentSocketId } from \"../socket/reducer\";\r\n\r\nexport function selectPlayers(state) {\r\n  return state.players;\r\n}\r\n\r\nexport function selectCurrentPlayer(state) {\r\n  return selectPlayers(state)[state.game.currentPlayerId];\r\n}\r\n\r\nexport function selectLocalPlayer(state) {\r\n  return selectPlayers(state).find(p => p.socketId === currentSocketId());\r\n}\r\n\r\nexport function selectAllBuiltConnections(state) {\r\n  const players = selectPlayers(state);\r\n\r\n  const builtConnections = [];\r\n  for (let player of players) {\r\n    if (player.builtConnections.length > 0) {\r\n      builtConnections.push({\r\n        color: player.color,\r\n        connections: player.builtConnections,\r\n      });\r\n    }\r\n  }\r\n  return builtConnections;\r\n}\r\n","import { ticketToRideData } from \"../data/ticket-to-ride-data\";\r\n\r\nexport function findPathBetweenCities(startCityId, builtConnections) {\r\n  const citiesPI = new Array(\r\n    Object.values(ticketToRideData.cities).length + 1\r\n  ).fill(0);\r\n  const citiesD = new Array(\r\n    Object.values(ticketToRideData.cities).length + 1\r\n  ).fill(100);\r\n\r\n  const checkedEdges = [];\r\n  const queue = [];\r\n  queue.push(startCityId);\r\n  citiesD[startCityId] = 0;\r\n\r\n  while (queue.length > 0) {\r\n    const currCity = queue[0];\r\n\r\n    for (let connectionId of builtConnections) {\r\n      if (checkedEdges.includes(connectionId)) continue;\r\n\r\n      const connection = ticketToRideData.connections[connectionId];\r\n\r\n      if (connection.from === currCity || connection.to === currCity) {\r\n        const from = connection.from === currCity;\r\n        const cityId = from ? connection.to : connection.from;\r\n        if (citiesD[cityId] === 100 || citiesD[cityId] < citiesD[currCity]) {\r\n          citiesD[cityId] = citiesD[currCity] + 1;\r\n          citiesPI[cityId] = currCity;\r\n          queue.push(cityId);\r\n        }\r\n\r\n        checkedEdges.push(connectionId);\r\n      }\r\n    }\r\n    queue.shift();\r\n  }\r\n\r\n  return { pi: citiesPI, d: citiesD };\r\n}\r\n\r\nexport function hasConnectionBetweenCities(\r\n  startCityId,\r\n  endCityId,\r\n  builtConnections\r\n) {\r\n  const { pi, d } = findPathBetweenCities(startCityId, builtConnections);\r\n  let completed = false;\r\n  if (d[endCityId] !== 100) {\r\n    let city = endCityId;\r\n    while (city !== 0 && city !== startCityId) {\r\n      city = pi[city];\r\n    }\r\n    if (city === startCityId) {\r\n      completed = true;\r\n    }\r\n  }\r\n\r\n  return completed;\r\n}\r\n","import classNames from \"classnames\";\r\nimport { motion } from \"framer-motion\";\r\nimport React from \"react\";\r\n\r\nfunction CityMarker({ city, setChosenCity, active, neighbour, ticketShow }) {\r\n  const left = \"calc(\" + city.x + \"% - 0.6rem)\";\r\n  const top = \"calc(\" + city.y + \"% - 0.6rem)\";\r\n\r\n  return (\r\n    <motion.span\r\n      className={classNames(\"position-absolute\", \"dot\")}\r\n      animate={{\r\n        transition: { duration: 0.15 },\r\n        scale: 1.0,\r\n        backgroundColor: active ? \"#ffffff\" : \"#2e2e2e\",\r\n        borderColor: ticketShow ? \"#008FFF\" : active ? \"#2e2e2e\" : \"#ffffff\",\r\n        borderWidth: neighbour || ticketShow ? \"0.2rem\" : \"0rem\",\r\n      }}\r\n      whileHover={{ scale: 1.2 }}\r\n      style={{\r\n        left: left,\r\n        top: top,\r\n        borderStyle: \"solid\",\r\n      }}\r\n      onClick={() => {\r\n        setChosenCity(city.city);\r\n      }}\r\n    ></motion.span>\r\n  );\r\n}\r\n\r\nexport default CityMarker;\r\n","import classNames from \"classnames\";\r\nimport { motion } from \"framer-motion\";\r\nimport React from \"react\";\r\n\r\nfunction ConnectionMarker({ color, connection, ticketShow }) {\r\n  const markers = connection.elements.map((coordinate, i) => (\r\n    <motion.span\r\n      key={i}\r\n      className={classNames(\"position-absolute\", \"dot\")}\r\n      style={{\r\n        left: \"calc(\" + coordinate.x + \"% - 0.6rem)\",\r\n        top: \"calc(\" + coordinate.y + \"% - 0.6rem)\",\r\n        backgroundColor: color,\r\n        scale: 2.0,\r\n        borderStyle: \"solid\",\r\n        borderColor: \"#008FFF\",\r\n        borderWidth: \"0rem\"\r\n      }}\r\n      whileHover={{ scale: 1.3 }}\r\n      animate={{\r\n        transition: { duration: (ticketShow ? 0.15 : 0.5) },\r\n        scale: 1.0,\r\n        borderWidth: ticketShow ? \"0.2rem\" : \"0rem\",\r\n      }}\r\n    ></motion.span>\r\n  ));\r\n\r\n  return <>{markers}</>;\r\n}\r\n\r\nexport default ConnectionMarker;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { ticketToRideData } from \"../../../data/ticket-to-ride-data\";\r\nimport {\r\n  selectAllBuiltConnections,\r\n  selectLocalPlayer,\r\n} from \"../../../state/players/selector\";\r\nimport { findPathBetweenCities } from \"../../../util/pathfinder\";\r\nimport CityMarker from \"./CityMarker\";\r\nimport ConnectionMarker from \"./ConnectionMarker\";\r\n\r\nfunction Map({ chosenCity, setChosenCity, showTicketCities }) {\r\n  const ticketData = showTicketCities;\r\n  const localPlayer = useSelector(selectLocalPlayer);\r\n  const neighbours = Object.values(ticketToRideData.connections)\r\n    .filter(\r\n      (connection) =>\r\n        connection.fromCity === chosenCity || connection.toCity === chosenCity\r\n    )\r\n    .map((connection) => {\r\n      return connection.fromCity === chosenCity\r\n        ? connection.toCity\r\n        : connection.fromCity;\r\n    });\r\n  const allBuiltConnections = useSelector(selectAllBuiltConnections);\r\n  const builtConnections = localPlayer.builtConnections;\r\n\r\n  const showConnections = [];\r\n  if (ticketData) {\r\n    \r\n    const {pi} = findPathBetweenCities(ticketData.from, builtConnections);\r\n    const completed = localPlayer.completedTickets.find(ticket => (ticket.id+1) === (+ticketData.id));\r\n\r\n    if (completed) {\r\n      let city = ticketData.to;\r\n      while (city !== 0 && city !== ticketData.from) {\r\n        for (let connectionId of builtConnections) {\r\n          const connection = ticketToRideData.connections[connectionId];\r\n          if (\r\n            (connection.from === city && connection.to === pi[city]) ||\r\n            (connection.to === city && connection.from === pi[city])\r\n          ) {\r\n            showConnections.push(connectionId);\r\n            break;\r\n          }\r\n        }\r\n        city = pi[city];\r\n      }\r\n    }\r\n  }\r\n\r\n  const connectionElements = [];\r\n  allBuiltConnections.forEach(({ color, connections }) => {\r\n    connections.forEach((connectionId) => {\r\n      const connectionData = Object.values(ticketToRideData.connections)[\r\n        connectionId - 1\r\n      ];\r\n      connectionElements.push(\r\n        <ConnectionMarker\r\n          key={connectionData.id}\r\n          color={color}\r\n          connection={connectionData}\r\n          ticketShow={showConnections.includes(connectionId)}\r\n        />\r\n      );\r\n    });\r\n  });\r\n\r\n  const cities = Object.values(ticketToRideData.cities).map((city) => (\r\n    <CityMarker\r\n      key={city.id}\r\n      city={city}\r\n      chosenCity={chosenCity}\r\n      setChosenCity={setChosenCity}\r\n      active={chosenCity === city.city}\r\n      neighbour={neighbours.findIndex((value) => city.city === value) !== -1}\r\n      ticketShow={\r\n        ticketData &&\r\n        (ticketData.fromCity === city.city ||\r\n          ticketData.toCity === city.city ||\r\n          showConnections.some(\r\n            (c) =>\r\n              Object.values(ticketToRideData.connections)[c - 1].fromCity ===\r\n                city.city ||\r\n              Object.values(ticketToRideData.connections)[c - 1].toCity ===\r\n                city.city\r\n          ))\r\n      }\r\n    />\r\n  ));\r\n  return (\r\n    <div className=\"px-auto mx-auto\">\r\n      <div className=\"container position-relative mx-0 px-0\">\r\n        <img src=\"map.png\" className=\"map-img\" alt=\"\" />\r\n        {Object.values(cities)}\r\n        {connectionElements}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Map;\r\n","import { CardStates } from \"../../domain/card\";\r\nimport { Colors } from \"../../domain/colors\";\r\nimport { selectLocalPlayer, selectPlayers } from \"../players/selector\";\r\n\r\nexport function selectDeck(state) {\r\n  return state.deck;\r\n}\r\n\r\nexport function selectFreeCards(state) {\r\n  return selectDeck(state).filter((card) => card.cardState === CardStates.DECK);\r\n}\r\n\r\nexport function selectAllPlayerCards(state) {\r\n  const deck = selectDeck(state).filter((card) => card.cardState >= CardStates.PLAYERS[0]);\r\n  const players = selectPlayers(state);\r\n\r\n  const output = [];\r\n  for(let player of players) {\r\n    output.push({playerId: player.id, cards: getPlayerCards(deck, player.id)});\r\n  }\r\n  return output;\r\n}\r\n\r\nexport function selectLocalPlayerCards(state) {\r\n  const player = selectLocalPlayer(state);\r\n\r\n  return getPlayerCards(selectDeck(state), player.id);\r\n}\r\n\r\nexport function selectPublicCards(state) {\r\n  return selectDeck(state).filter((card) => CardStates.PUBLIC.includes(card.cardState));\r\n}\r\n\r\nexport function selectTopCardOfDeck(state) {\r\n  const deck = selectDeck(state).filter((card) => card.cardState === CardStates.DECK);\r\n  return deck[0];\r\n}\r\n\r\nfunction getPlayerCards(deck, cardState) {\r\n  const cards = deck.filter(\r\n    (card) => card.cardState === cardState\r\n  );\r\n\r\n  const outputCards = [];\r\n  for (let color of Object.values(Colors)) {\r\n    const amount = cards.filter((c) => c.color === color).length;\r\n      outputCards.push({ color, amount });\r\n  }\r\n\r\n  return outputCards;\r\n}\r\n","import React from \"react\";\r\nimport { GiPokerHand } from \"react-icons/gi\";\r\nimport { BiTrain } from \"react-icons/bi\";\r\nimport { IoTicket } from \"react-icons/io5\";\r\nimport { FaUser, FaClock } from \"react-icons/fa\";\r\nimport classNames from \"classnames\";\r\n\r\nfunction PlayerIndicator({ player, active, cards }) {\r\n  const cardSum = cards.reduce((sum, {_, amount}) => sum + amount,0);\r\n  return (\r\n    <div className={classNames('card', 'my-2', 'py-1', {'active': active})}>\r\n      <div className=\"row justify-content-between m-0 px-2\">\r\n        <span>\r\n          <FaUser color={player.color} /> {player.name} ({player.points})\r\n        </span>\r\n        <span>\r\n          <IoTicket /> {player.tickets.length}\r\n        </span>\r\n      </div>\r\n      <div className=\"row justify-content-end m-0 px-2\">\r\n        <span>\r\n          <BiTrain />\r\n          {player.remainingCars}\r\n        </span>\r\n      </div>\r\n      <div className=\"row justify-content-between m-0 px-2\">\r\n        <span>\r\n          <GiPokerHand /> {cardSum}\r\n        </span>\r\n        <span>\r\n          <FaClock /> {player.round}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PlayerIndicator;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectAllPlayerCards } from \"../../../../state/deck/selector\";\r\nimport {\r\n  selectCurrentPlayer,\r\n  selectPlayers,\r\n} from \"../../../../state/players/selector\";\r\nimport PlayerIndicator from \"./PlayerIndicator\";\r\n\r\nfunction PlayerIndicatorPanel() {\r\n  const players = useSelector(selectPlayers);\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const allPlayerCards = useSelector(selectAllPlayerCards);\r\n\r\n  const playerIndicators = players.map((player, i) => (\r\n    <PlayerIndicator\r\n      key={i}\r\n      player={player}\r\n      active={player === currentPlayer}\r\n      cards={allPlayerCards.find((cards) => cards.playerId === player.id).cards}\r\n    ></PlayerIndicator>\r\n  ));\r\n  return (\r\n    <div>\r\n      <span>Játékosok</span>\r\n      {playerIndicators}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PlayerIndicatorPanel;\r\n","export function selectGame(state) {\r\n    return state.game;\r\n}","import React, { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction shadeColor(color, percent) {\r\n  var R = parseInt(color.substring(1, 3), 16);\r\n  var G = parseInt(color.substring(3, 5), 16);\r\n  var B = parseInt(color.substring(5, 7), 16);\r\n\r\n  R = parseInt((R * (100 + percent)) / 100);\r\n  G = parseInt((G * (100 + percent)) / 100);\r\n  B = parseInt((B * (100 + percent)) / 100);\r\n\r\n  R = R < 255 ? R : 255;\r\n  G = G < 255 ? G : 255;\r\n  B = B < 255 ? B : 255;\r\n\r\n  var RR = R.toString(16).length === 1 ? \"0\" + R.toString(16) : R.toString(16);\r\n  var GG = G.toString(16).length === 1 ? \"0\" + G.toString(16) : G.toString(16);\r\n  var BB = B.toString(16).length === 1 ? \"0\" + B.toString(16) : B.toString(16);\r\n\r\n  return \"#\" + RR + GG + BB;\r\n}\r\n\r\nfunction useDestroy() {\r\n  const [destroy, setDestroy] = useState(false);\r\n\r\n  const setDestroyed = () => {\r\n    if (destroy) return false;\r\n\r\n    setDestroy(true);\r\n    setTimeout(() => {\r\n      setDestroy(false);\r\n    }, 500);\r\n    return true;\r\n  };\r\n\r\n  return { destroy, setDestroyed };\r\n}\r\n\r\nfunction Card({ cardData, onClick = {}, clickable}) {\r\n  const { destroy, setDestroyed } = useDestroy();\r\n\r\n  return (\r\n    <motion.button\r\n      className=\"game-card card my-2 mx-1 p-0\"\r\n      whileHover={{\r\n        transition: { duration: 0.15 },\r\n        scale: clickable ? 1.1 : 1, \r\n      }}\r\n      whileTap={{ scale: clickable ? 0.9 : 1}}\r\n      variants={{\r\n        destroy: {\r\n          opacity: 0,\r\n          x: \"-50%\",\r\n          scale: 2,\r\n          transition: { duration: 0.25 },\r\n        },\r\n        simple: {\r\n          opacity: 1,\r\n          x: 0,\r\n          scale: 1,\r\n          transition: { duration: 0.25 },\r\n        },\r\n      }}\r\n      animate={(destroy && \"destroy\") || \"simple\"}\r\n      onClick={() => {\r\n          if (onClick()) {\r\n            setDestroyed();\r\n          }\r\n      }}\r\n      style={\r\n        cardData && {\r\n          background:\r\n            \"linear-gradient(135deg,\" +\r\n            cardData.color +\r\n            \",\" +\r\n            shadeColor(cardData.color, -40) +\r\n            \")\",\r\n            x: \"-50%\",\r\n            opacity: 0\r\n        }\r\n      }\r\n    ></motion.button>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages } from \"../../../../api/socket\";\r\nimport { CardStates } from \"../../../../domain/card\";\r\nimport { Colors } from \"../../../../domain/colors\";\r\nimport { GameStates } from \"../../../../domain/game\";\r\nimport { updateCard } from \"../../../../state/deck/actions\";\r\nimport { selectPublicCards } from \"../../../../state/deck/selector\";\r\nimport { setGameState } from \"../../../../state/game/actions\";\r\nimport { selectGame } from \"../../../../state/game/selector\";\r\nimport { addHistory } from \"../../../../state/players/actions\";\r\nimport {\r\n  selectCurrentPlayer,\r\n  selectLocalPlayer,\r\n} from \"../../../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../../../state/socket/actions\";\r\nimport Card from \"../../Card\";\r\n\r\nfunction PublicCardsPanel({ changeShowNotificationModal }) {\r\n  const cards = useSelector(selectPublicCards);\r\n  const game = useSelector(selectGame);\r\n  const [waiting, setWaiting] = useState(false);\r\n\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const localPlayer = useSelector(selectLocalPlayer);\r\n  const dispatch = useDispatch();\r\n\r\n  const cardsComponents = [...Array(5).keys()].map((i) => {\r\n    const cardData = cards.find(\r\n      (card) => card.cardState === CardStates.PUBLIC[i]\r\n    );\r\n    return (\r\n      <Card\r\n        key={i}\r\n        cardData={cardData}\r\n        clickable={!waiting}\r\n        onClick={() => {\r\n          if (waiting || !cardData) return;\r\n\r\n          if (\r\n            (currentPlayer === localPlayer &&\r\n              game.gameState === GameStates.USER_BEGIN) ||\r\n            (game.gameState === GameStates.DRAW_CARDS &&\r\n              cardData.color !== Colors.LOCOMOTIVE)\r\n          ) {\r\n            setTimeout(() => {\r\n              dispatch(\r\n                addHistory(\r\n                  currentPlayer.id,\r\n                  \"Kártyát húzott: \" +\r\n                    Object.keys(Colors).find(\r\n                      (c) => Colors[c] === cardData.color\r\n                    )\r\n                )\r\n              );\r\n              dispatch(\r\n                updateCard({ ...cardData, cardState: currentPlayer.id })\r\n              );\r\n              setWaiting(false);\r\n            }, 250);\r\n            setWaiting(true);\r\n            dispatch(\r\n              setGameState(\r\n                game.gameState === GameStates.USER_BEGIN\r\n                  ? cardData.color === Colors.LOCOMOTIVE\r\n                    ? GameStates.DRAW_CARD2\r\n                    : GameStates.DRAW_CARDS\r\n                  : GameStates.DRAW_CARD2\r\n              )\r\n            );\r\n            dispatch(\r\n              wsSendMessage(\r\n                ClientMessages.SYNC_STATE,\r\n                [\r\n                  game.id,\r\n                  { game: game },\r\n                  true,\r\n                ],\r\n                function () {}\r\n              )\r\n            );\r\n            return true;\r\n          } else {\r\n            changeShowNotificationModal(\"Most nem tudsz új kártyát húzni.\");\r\n          }\r\n          return false;\r\n        }}\r\n      ></Card>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"mx-auto\">Felfedett vasútkocsi-kártyák</div>\r\n      <div className=\"my-2 p-0 mx-auto\">{cardsComponents}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PublicCardsPanel;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages } from \"../../../../api/socket\";\r\nimport { Colors } from \"../../../../domain/colors\";\r\nimport { GameStates } from \"../../../../domain/game\";\r\nimport { updateCard } from \"../../../../state/deck/actions\";\r\nimport {\r\n  selectFreeCards,\r\n  selectTopCardOfDeck,\r\n} from \"../../../../state/deck/selector\";\r\nimport { setGameState } from \"../../../../state/game/actions\";\r\nimport { selectGame } from \"../../../../state/game/selector\";\r\nimport { addHistory } from \"../../../../state/players/actions\";\r\nimport { selectCurrentPlayer, selectLocalPlayer } from \"../../../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../../../state/socket/actions\";\r\n\r\nfunction DeckPanel() {\r\n  const dispatch = useDispatch();\r\n  const freeCardsNumber = useSelector(selectFreeCards).length;\r\n  const topCardOfDeck = useSelector(selectTopCardOfDeck);\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const game = useSelector(selectGame);\r\n\r\n  const localPlayer = useSelector(selectLocalPlayer);\r\n\r\n  return (\r\n    <>\r\n      <span>Húzópakli</span>\r\n      <button\r\n        className=\"game-card card my-2 mx-1 p-0 border\"\r\n        style={{ backgroundColor: \"#333333\" }}\r\n        onClick={() => {\r\n          if (\r\n            (game.gameState === GameStates.USER_BEGIN ||\r\n            game.gameState === GameStates.DRAW_CARDS) && currentPlayer === localPlayer\r\n          ) {\r\n            dispatch(\r\n              updateCard({ ...topCardOfDeck, cardState: currentPlayer.id })\r\n            );\r\n            dispatch(addHistory(currentPlayer.id, \"Kártyát húzott: \"+Object.keys(Colors).find(c => Colors[c] === topCardOfDeck.color)));\r\n            dispatch(\r\n              setGameState(\r\n                game.gameState === GameStates.USER_BEGIN\r\n                  ? GameStates.DRAW_CARDS\r\n                  : GameStates.DRAW_CARD2\r\n              )\r\n            );\r\n            dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [game.id, {game: game}, true], function() {} ));\r\n          }\r\n        }}\r\n      >\r\n        <span\r\n          className=\"game-card card w-100 h-100 border\"\r\n          style={{ backgroundColor: \"#333333\", top: \"-0.2rem\" }}\r\n        >\r\n          <span\r\n            className=\"game-card card w-100 h-100 border-0\"\r\n            style={{ backgroundColor: \"#999999\", top: \"-0.2rem\" }}\r\n          >\r\n            {freeCardsNumber}\r\n          </span>\r\n        </span>\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DeckPanel;\r\n","import React from \"react\";\r\nimport { IoArrowForwardCircleSharp } from \"react-icons/io5\";\r\nimport classNames from \"classnames\";\r\n\r\nfunction TicketCard({ ticketData, long, completed }) {\r\n  return (\r\n    <div\r\n      className={classNames(\"card ticket-card\", {\r\n        completed: completed,\r\n      })}\r\n    >\r\n      <div className=\"h-100 d-flex flex-row\">\r\n        <div className=\"my-auto ml-1\">\r\n          <IoArrowForwardCircleSharp className=\"\" size={50} />\r\n        </div>\r\n        <div className=\"my-auto ml-1 text-left\">\r\n          <span>{ticketData.fromCity}</span>\r\n          <br />\r\n          <span>{ticketData.toCity}</span>\r\n        </div>\r\n      </div>\r\n      {long && <small>Hosszú cél</small>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TicketCard;\r\n","import { motion } from \"framer-motion\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages, GameActionTypes } from \"../../../../api/socket\";\r\nimport { ticketToRideData } from \"../../../../data/ticket-to-ride-data\";\r\nimport { selectGame } from \"../../../../state/game/selector\";\r\nimport { addHistory, addTicket } from \"../../../../state/players/actions\";\r\nimport { selectCurrentPlayer, selectPlayers } from \"../../../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../../../state/socket/actions\";\r\nimport TicketCard from \"../../TicketCard\";\r\n\r\nfunction TicketDeckModal({ setShowModal, setShowTicketCities }) {\r\n  const [selectedTickets, setSelectedTickets] = useState([]);\r\n  const [ticketDatas, setTicketDatas] = useState([]);\r\n\r\n  const dispatch = useDispatch();\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const game = useSelector(selectGame);\r\n  const players = useSelector(selectPlayers);\r\n\r\n  useEffect(() => {\r\n    const datas = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      const id = Math.floor(Math.random() * 46);\r\n      const long = id >= 40;\r\n      datas.push({ id: long ? id - 40 : id, long });\r\n    }\r\n    \r\n    setTicketDatas(datas);\r\n  }, [dispatch]);\r\n\r\n  const ticketElements = ticketDatas.map((data, i) => {\r\n    const ticketData = Object.values(\r\n      data.long\r\n        ? ticketToRideData.longDestinations\r\n        : ticketToRideData.destinations\r\n    )[data.id];\r\n\r\n    return (\r\n      <motion.a\r\n        key={i}\r\n        className=\"btn mx-4\"\r\n        variants={{ selected: { scale: 1.2 }, simple: { scale: 1 } }}\r\n        animate={\r\n          selectedTickets.findIndex(t => t === i) > -1 ? \"selected\" : \"simple\"\r\n        }\r\n        transition={{ duration: 1 }}\r\n        onClick={() => {\r\n          const findId = selectedTickets.findIndex((t) => t === i);\r\n          if (findId > -1) {\r\n            selectedTickets.splice(findId, 1);\r\n            setSelectedTickets([...selectedTickets]);\r\n          } else {\r\n            setSelectedTickets([...selectedTickets, i]);\r\n          }\r\n        }}\r\n        onMouseEnter={() => {\r\n          setShowTicketCities(ticketData);\r\n        }}\r\n        onMouseLeave={() => {\r\n          setShowTicketCities(null);\r\n        }}\r\n      >\r\n        <TicketCard\r\n          ticketData={ticketData}\r\n          long={data.long}\r\n          completed={false}\r\n        ></TicketCard>\r\n      </motion.a>\r\n    );\r\n  });\r\n\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"position-absolute w-100 h-100 d-flex flex-col align-items-end\"\r\n        style={{\r\n          backgroundColor: \"#00000022\",\r\n          top: 0,\r\n          left: 0,\r\n          zIndex: 999,\r\n        }}\r\n      >\r\n        <motion.div\r\n          className=\"col py-4\"\r\n          style={{\r\n            backgroundColor: \"#00000088\",\r\n            opacity: 0,\r\n          }}\r\n          animate={{ opacity: 1 }}\r\n        >\r\n          <div>{ticketElements}</div>\r\n          <div className=\"mt-4\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn button-orange\"\r\n              onClick={() => {\r\n                for (let selectedTicket of selectedTickets) {\r\n                  dispatch(addTicket(currentPlayer.id, {id: ticketDatas[selectedTicket].id, long: ticketDatas[selectedTicket].long}, true));\r\n                }\r\n                setShowModal(false);\r\n                dispatch(addHistory(currentPlayer.id, selectedTickets.length + \" db új célkártyát húzott\", true));\r\n                dispatch(wsSendMessage(ClientMessages.SYNC_ACTION, [game.id, {type: GameActionTypes.NEXT_TURN}, false], function() {}));\r\n                dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [game.id, {players, game}, true], function() {} ));\r\n              }}\r\n              disabled={selectedTickets.length === 0}\r\n            >\r\n              Elfogad\r\n            </button>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TicketDeckModal;\r\n","import React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { GameStates } from \"../../../../domain/game\";\r\nimport { selectGame } from \"../../../../state/game/selector\";\r\nimport { selectCurrentPlayer, selectLocalPlayer } from \"../../../../state/players/selector\";\r\nimport TicketDeckModal from \"./TicketDeckModal\";\r\n\r\nfunction TicketDeckPanel({ setShowTicketCities, changeShowNotificationModal }) {\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const game = useSelector(selectGame)\r\n\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const localPlayer = useSelector(selectLocalPlayer);\r\n\r\n  return (\r\n    <>\r\n      <span>Célok húzópaklija</span>\r\n      <button\r\n        className=\"game-card card my-2 mx-1 p-0 border\"\r\n        style={{ backgroundColor: \"#333333\" }}\r\n        onClick={() => {\r\n          if(game.gameState === GameStates.USER_BEGIN && localPlayer === currentPlayer){\r\n            setShowModal(true);\r\n          } else {\r\n            changeShowNotificationModal(\"Most nem tudsz új célokat húzni.\");\r\n          }\r\n        }}\r\n      >\r\n        <span\r\n          className=\"game-card card w-100 h-100 border\"\r\n          style={{ backgroundColor: \"#333333\", top: \"-0.2rem\" }}\r\n        >\r\n          <span\r\n            className=\"game-card card w-100 h-100 border-0\"\r\n            style={{ backgroundColor: \"#999999\", top: \"-0.2rem\" }}\r\n          ></span>\r\n        </span>\r\n      </button>\r\n      {showModal && (\r\n        <TicketDeckModal\r\n          setShowModal={setShowModal}\r\n          setShowTicketCities={setShowTicketCities}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TicketDeckPanel;\r\n","import React from \"react\";\r\n\r\nfunction shadeColor(color, percent) {\r\n  var R = parseInt(color.substring(1, 3), 16);\r\n  var G = parseInt(color.substring(3, 5), 16);\r\n  var B = parseInt(color.substring(5, 7), 16);\r\n\r\n  R = parseInt((R * (100 + percent)) / 100);\r\n  G = parseInt((G * (100 + percent)) / 100);\r\n  B = parseInt((B * (100 + percent)) / 100);\r\n\r\n  R = R < 255 ? R : 255;\r\n  G = G < 255 ? G : 255;\r\n  B = B < 255 ? B : 255;\r\n\r\n  var RR = R.toString(16).length === 1 ? \"0\" + R.toString(16) : R.toString(16);\r\n  var GG = G.toString(16).length === 1 ? \"0\" + G.toString(16) : G.toString(16);\r\n  var BB = B.toString(16).length === 1 ? \"0\" + B.toString(16) : B.toString(16);\r\n\r\n  return \"#\" + RR + GG + BB;\r\n}\r\n\r\nfunction CurrentPlayerCard({ color, amount }) {\r\n  return (\r\n    <button\r\n      className=\"player-card card my-2 mx-1 p-0\"\r\n      style={{\r\n        background:\r\n          \"linear-gradient(135deg,\" +\r\n          color +\r\n          \",\" +\r\n          shadeColor(color, -40) +\r\n          \")\",\r\n      }}\r\n    >\r\n      <span className=\"text-white ml-auto mb-auto mt-1 mr-2\">{amount}</span>\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default CurrentPlayerCard;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectLocalPlayerCards } from \"../../../../state/deck/selector\";\r\nimport CurrentPlayerCard from \"../../CurrentPlayerCard\";\r\n\r\nfunction CurrentPlayerCardsPanel() {\r\n  const cards = useSelector(selectLocalPlayerCards);\r\n  const currentPlayerCards = cards.filter((card) => card.amount > 0).map((card, i) => (\r\n    <CurrentPlayerCard key={i} color={card.color} amount={card.amount}></CurrentPlayerCard>\r\n  ));\r\n  return (\r\n    <>\r\n      <div>Aktuális játékos kártyái</div>\r\n      <div className=\"row justify-content-center\">{currentPlayerCards}</div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CurrentPlayerCardsPanel;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectLocalPlayer } from \"../../../../state/players/selector\";\r\n\r\nfunction HistoryPanel() {\r\n  const currentPlayer = useSelector(selectLocalPlayer);\r\n  const histories = currentPlayer.history;\r\n  const historyComponents = histories.map((history, i) => <div key={i}>{history}</div>);\r\n  return (\r\n    <div className=\"col mx-0 px-0\">\r\n      <div className=\"mx-auto\">History</div>\r\n      <div className=\"col px-0\">{historyComponents}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HistoryPanel;\r\n","import React from \"react\";\r\nimport { TiArrowLeftThick, TiArrowRightThick } from \"react-icons/ti\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { ticketToRideData } from \"../../../../data/ticket-to-ride-data\";\r\nimport { selectLocalPlayer } from \"../../../../state/players/selector\";\r\nimport TicketCard from \"../../TicketCard\";\r\n\r\nfunction CurrentPlayerTicketPanel({\r\n  currentTicketShow,\r\n  changeCurrentTicketShow,\r\n  setShowTicketCities,\r\n}) {\r\n  const localPlayer = useSelector(selectLocalPlayer);\r\n  const selectedTicket = localPlayer.tickets[currentTicketShow];\r\n  const ticketData = Object.values(selectedTicket.long ? ticketToRideData.longDestinations : ticketToRideData.destinations)[\r\n    selectedTicket.id\r\n  ];\r\n\r\n  const completed = localPlayer.completedTickets.some(ticket => ticket.id === selectedTicket.id);\r\n  return (\r\n    <>\r\n      <div>Aktuális játékos céljai</div>\r\n      <div className=\"row justify-content-center\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn p-0\"\r\n          onMouseEnter={() => {\r\n            setShowTicketCities(ticketData);\r\n          }}\r\n          onMouseLeave={() => {\r\n            setShowTicketCities(null);\r\n          }}\r\n        >\r\n          <TicketCard ticketData={ticketData} completed={completed} long={selectedTicket.long}></TicketCard>\r\n        </button>\r\n      </div>\r\n      <div className=\"row justify-content-between px-4\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn text-white\"\r\n          onClick={() => {\r\n            changeCurrentTicketShow(-1);\r\n          }}\r\n        >\r\n          <TiArrowLeftThick />\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn text-white\"\r\n          onClick={() => {\r\n            changeCurrentTicketShow(1);\r\n          }}\r\n        >\r\n          <TiArrowRightThick />\r\n        </button>\r\n      </div>{\" \"}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CurrentPlayerTicketPanel;\r\n","import { motion } from \"framer-motion\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages, GameActionTypes } from \"../../api/socket\";\r\nimport { ticketToRideData } from \"../../data/ticket-to-ride-data\";\r\nimport { Colors } from \"../../domain/colors\";\r\nimport { removeCard } from \"../../state/deck/actions\";\r\nimport { selectLocalPlayerCards } from \"../../state/deck/selector\";\r\nimport { setEndTurn } from \"../../state/game/actions\";\r\nimport { selectGame } from \"../../state/game/selector\";\r\nimport { addBuiltConnection, addCompletedTicket, addHistory } from \"../../state/players/actions\";\r\nimport { selectCurrentPlayer } from \"../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../state/socket/actions\";\r\nimport { hasConnectionBetweenCities } from \"../../util/pathfinder\";\r\nimport CurrentPlayerCard from \"./CurrentPlayerCard\";\r\n\r\nfunction BuildModal({ closeModal, buildableConnection }) {\r\n  const currentPlayerCards = useSelector(selectLocalPlayerCards);\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const game = useSelector(selectGame);\r\n  const connection = ticketToRideData.connections[buildableConnection];\r\n  const dispatch = useDispatch();\r\n\r\n  const combinationData = [];\r\n  const locomotives = Math.min(\r\n    currentPlayerCards.find((card) => card.color === Colors.LOCOMOTIVE).amount,\r\n    connection.elements.length\r\n  );\r\n  if (connection.color === \"gray\") {\r\n    for (let card of currentPlayerCards.filter((card) => card.color !== Colors.LOCOMOTIVE)) {\r\n      if (\r\n        card.amount > 0 &&\r\n        card.amount + locomotives >= connection.elements.length\r\n      ) {\r\n        const colorTrains = Math.min(card.amount, connection.elements.length);\r\n        const missingTrains = connection.elements.length - colorTrains;\r\n\r\n        let len =\r\n          colorTrains + locomotives - (connection.elements.length - 1);\r\n\r\n        if(locomotives >= connection.elements.length){\r\n          len--;\r\n        }\r\n\r\n        for (let i = 0; i < len; i++) {\r\n          combinationData.push({\r\n            color: card.color,\r\n            amount: connection.elements.length - missingTrains - i,\r\n            locomotives: missingTrains + i,\r\n          });\r\n        }\r\n      }\r\n    }\r\n    \r\n    if(locomotives >= connection.elements.length){\r\n      combinationData.push({\r\n        color: Colors.LOCOMOTIVE,\r\n        amount: 0,\r\n        locomotives: connection.elements.length\r\n      });\r\n    }\r\n  } else {\r\n    const colorTrains = Math.min(\r\n      currentPlayerCards.find(\r\n        (card) => card.color === Colors[connection.color.toUpperCase()]\r\n      ).amount,\r\n      connection.elements.length\r\n    );\r\n    const missingTrains = connection.elements.length - colorTrains;\r\n\r\n    const len = colorTrains + locomotives - (connection.elements.length - 1);\r\n\r\n    for (let i = 0; i < len; i++) {\r\n      combinationData.push({\r\n        color: Colors[connection.color.toUpperCase()],\r\n        amount: connection.elements.length - missingTrains - i,\r\n        locomotives: missingTrains + i,\r\n      });\r\n    }\r\n  }\r\n  const combinations = combinationData.map(\r\n    ({ color, amount, locomotives }, i) => {\r\n      const cards = [];\r\n      let cardId = 0;\r\n      for (let i = 0; i < amount; i++) {\r\n        cards.push(\r\n          <CurrentPlayerCard\r\n            key={cardId++}\r\n            color={color}\r\n            amount={1}\r\n          ></CurrentPlayerCard>\r\n        );\r\n      }\r\n      for (let i = 0; i < locomotives; i++) {\r\n        cards.push(\r\n          <CurrentPlayerCard\r\n            key={cardId++}\r\n            color={Colors.LOCOMOTIVE}\r\n            amount={1}\r\n          ></CurrentPlayerCard>\r\n        );\r\n      }\r\n      return (\r\n        <div className=\"d-flex flex-column justify-content-center\" key={i}>\r\n          <div className=\"row\">{cards}</div>\r\n          <button\r\n            className=\"btn button-orange m-auto\"\r\n            onClick={() => {\r\n              if (amount > 0) {\r\n                dispatch(removeCard(currentPlayer.id, color, amount));\r\n              }\r\n              if (locomotives > 0) {\r\n                dispatch(\r\n                  removeCard(\r\n                    currentPlayer.id,\r\n                    Colors.LOCOMOTIVE,\r\n                    locomotives\r\n                  )\r\n                );\r\n              }\r\n              dispatch(addBuiltConnection(currentPlayer.id, connection.id, true));\r\n              dispatch(addHistory(currentPlayer.id, \"Megépített egy útvonalat: \"+ connection.fromCity + \" - \" + connection.toCity, true));\r\n\r\n              for(let ticket of currentPlayer.tickets) {\r\n                if(!currentPlayer.completedTickets.find((t) => t.id === ticket.id)){\r\n                  const ticketData = Object.values(\r\n                    ticket.long\r\n                      ? ticketToRideData.longDestinations\r\n                      : ticketToRideData.destinations\r\n                  )[ticket.id];\r\n\r\n                  if(hasConnectionBetweenCities(ticketData.from, ticketData.to, [...currentPlayer.builtConnections, connection.id])){\r\n                    dispatch(addCompletedTicket(currentPlayer.id, ticket, true));\r\n                  }\r\n                }\r\n              }\r\n\r\n              if(currentPlayer.remainingCars - connection.elements.length <= 2) {\r\n                dispatch(setEndTurn(currentPlayer.round+2, true));\r\n              }\r\n\r\n              dispatch(wsSendMessage(ClientMessages.SYNC_ACTION, [game.id, {type: GameActionTypes.NEXT_TURN}, false], function() {}));\r\n              \r\n              closeModal();\r\n            }}\r\n          >\r\n            Választ\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n  );\r\n  return (\r\n    <>\r\n      <motion.div\r\n        className=\"position-absolute w-100 h-100 d-flex flex-col justify-content-center align-items-center\"\r\n        style={{\r\n          backgroundColor: \"#00000088\",\r\n          top: 0,\r\n          left: 0,\r\n          zIndex: 999,\r\n          opacity: 0,\r\n        }}\r\n        animate={{ opacity: 1 }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col\">{combinations}</div>\r\n        </div>\r\n      </motion.div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default BuildModal;\r\n","import { motion } from \"framer-motion\";\r\nimport React from \"react\";\r\nimport { FaUser } from \"react-icons/fa\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages } from \"../../api/socket\";\r\nimport { ticketToRideData } from \"../../data/ticket-to-ride-data\";\r\nimport { AppStates } from \"../../domain/app\";\r\nimport { selectGame } from \"../../state/game/selector\";\r\nimport { selectPlayers } from \"../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../state/socket/actions\";\r\n\r\nfunction EndGameModal({ setAppState, showTicketCities, setShowTicketCities }) {\r\n  const players = useSelector(selectPlayers);\r\n  const dispatch = useDispatch();\r\n  const game = useSelector(selectGame);\r\n\r\n  const summaryComponents = players.map((player, i) => {\r\n\r\n    const ticketsValues = player.tickets.reduce((sum, ticket) => {\r\n      const ticketData = Object.values(\r\n        ticket.long\r\n          ? ticketToRideData.longDestinations\r\n          : ticketToRideData.destinations\r\n      )[ticket.id];\r\n      const contains = player.completedTickets.includes(ticket);\r\n      return sum + (contains ? +ticketData.value : -+ticketData.value);\r\n    }, 0);\r\n\r\n    const tickets = player.tickets.map((ticket, j) => {\r\n      const ticketData = Object.values(\r\n        ticket.long\r\n          ? ticketToRideData.longDestinations\r\n          : ticketToRideData.destinations\r\n      )[ticket.id];\r\n\r\n      return (\r\n        <span\r\n          key={j}\r\n          className=\"mx-1 d-inline-block\"\r\n          style={{\r\n            backgroundColor: player.completedTickets.find(\r\n              (t) => t.id === ticket.id && t.long === ticket.long\r\n            )\r\n              ? \"green\"\r\n              : \"red\",\r\n            width: \"1.5rem\",\r\n            height: \"1rem\",\r\n          }}\r\n          onMouseEnter={() => setShowTicketCities(ticketData)}\r\n          onMouseLeave={() => setShowTicketCities(null)}\r\n        ></span>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <tr key={i}>\r\n        <td className=\"text-left\">\r\n          <FaUser color={player.color} /> {player.name}\r\n        </td>\r\n        <td className=\"text-center\">{player.points + ticketsValues}</td>\r\n        <td className=\"text-center px-5\">\r\n          <div>{ticketsValues}</div>\r\n          <div className=\"text-left\">{tickets}</div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <motion.div\r\n        className=\"position-absolute w-100 h-100 d-flex flex-col justify-content-center align-items-center\"\r\n        style={{\r\n          backgroundColor: \"#00000088\",\r\n          top: 0,\r\n          left: 0,\r\n          zIndex: 999,\r\n          opacity: 0,\r\n        }}\r\n        animate={{ opacity: showTicketCities ? 0.2 : 1 }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card card-login mx-auto text-center\">\r\n              <div className=\"card-header mx-auto\">\r\n                <span className=\"logo_title mt-5\">Játék vége</span>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <table className=\"\">\r\n                  <thead className=\"text-white\">\r\n                    <tr>\r\n                      <th>Név</th>\r\n                      <th>Utak pontértéke</th>\r\n                      <th>Célok pontértéke</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>{summaryComponents}</tbody>\r\n                </table>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn button-silver\"\r\n                  onClick={() => {\r\n                    \r\n                    dispatch(wsSendMessage(ClientMessages.LEAVE_ROOM, [game.id], function() {\r\n                      setAppState(AppStates.MAIN_PAGE);\r\n                    } ));\r\n                  }\r\n                  }\r\n                >\r\n                  Vissza a főmenübe\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EndGameModal;\r\n","import { motion } from \"framer-motion\";\r\n\r\nfunction NotificationModal({ message }) {\r\n  return (\r\n    <>\r\n      <motion.div\r\n        className=\"position-absolute\"\r\n        style={{\r\n          backgroundColor: \"#00000088\",\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          zIndex: 999,\r\n          opacity: 0,\r\n          transform: 'translate(-50%, -50%)',\r\n          padding: '1rem',\r\n          border: 'white solid 0.1rem',\r\n          borderRadius: '0.75rem',\r\n        }}\r\n        animate={{\r\n          opacity: 1\r\n        }}\r\n      >\r\n        {message}\r\n      </motion.div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NotificationModal;\r\n","import React, { useEffect } from \"react\";\r\nimport { useState, useRef } from \"react\";\r\nimport Map from \"./map/Map\";\r\nimport { ticketToRideData } from \"../../data/ticket-to-ride-data\";\r\nimport PlayerIndicatorPanel from \"./panel/player-indicator/PlayerIndicatorPanel\";\r\nimport PublicCardsPanel from \"./panel/public-cards/PublicCardsPanel\";\r\nimport DeckPanel from \"./panel/deck-panel/DeckPanel\";\r\nimport TicketDeckPanel from \"./panel/ticket-deck-panel/TicketDeckPanel\";\r\nimport CurrentPlayerCardsPanel from \"./panel/current-player-cards-panel/CurrentPlayerCardsPanel\";\r\nimport HistoryPanel from \"./panel/history-panel/HistoryPanel\";\r\nimport CurrentPlayerTicketPanel from \"./panel/current-player-ticket-panel/CurrentPlayerTicketPanel\";\r\nimport BuildModal from \"./BuildModal\";\r\nimport EndGameModal from \"./EndGameModal\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectGame } from \"../../state/game/selector\";\r\nimport { Colors } from \"../../domain/colors\";\r\nimport {\r\n  selectAllBuiltConnections,\r\n  selectCurrentPlayer,\r\n  selectLocalPlayer,\r\n} from \"../../state/players/selector\";\r\nimport {\r\n  nextGameTurn,\r\n  setEndTurn,\r\n  setGameState,\r\n} from \"../../state/game/actions\";\r\nimport { setDeck } from \"../../state/deck/actions\";\r\nimport { selectLocalPlayerCards } from \"../../state/deck/selector\";\r\nimport NotificationModal from \"./NotificationModal\";\r\nimport { GameStates } from \"../../domain/game\";\r\nimport { wsSubscribeChannel } from \"../../state/socket/actions\";\r\nimport { GameActionTypes, ServerMessages } from \"../../api/socket\";\r\nimport {\r\n  addBuiltConnection,\r\n  addCompletedTicket,\r\n  addHistory,\r\n  addTicket,\r\n} from \"../../state/players/actions\";\r\n\r\nfunction useNotificationModalShow() {\r\n  const [showNotificationModal, setShowNotificationModal] = useState(false);\r\n  const [notificationMessage, setNotificationMessage] = useState(\"\");\r\n\r\n  const changeShowNotificationModal = (message) => {\r\n    if (showNotificationModal) return;\r\n\r\n    setTimeout(() => {\r\n      setShowNotificationModal(false);\r\n    }, 1000);\r\n    setNotificationMessage(message);\r\n    setShowNotificationModal(true);\r\n  };\r\n  return {\r\n    showNotificationModal,\r\n    notificationMessage,\r\n    changeShowNotificationModal,\r\n  };\r\n}\r\n\r\nfunction useBuildModalShow() {\r\n  const [showBuildModal, setShowBuildModal] = useState(false);\r\n  const [buildableConnection, setBuildableConnection] = useState(-1);\r\n\r\n  const changeShowBuildModal = (show, connectionId) => {\r\n    setBuildableConnection(connectionId);\r\n    setShowBuildModal(show);\r\n  };\r\n\r\n  return { showBuildModal, buildableConnection, changeShowBuildModal };\r\n}\r\n\r\nfunction useCurrentTicketShow(localPlayerTickets) {\r\n  const [currentTicketShow, setCurrentTicketShow] = useState(0);\r\n  const id = useRef(0);\r\n\r\n  const changeCurrentTicketShow = (changeValue) => {\r\n    id.current += changeValue;\r\n\r\n    if (id.current < 0) {\r\n      id.current = localPlayerTickets.length - 1;\r\n    } else if (id.current > localPlayerTickets.length - 1) {\r\n      id.current = 0;\r\n    }\r\n\r\n    setCurrentTicketShow(id.current);\r\n  };\r\n\r\n  return {\r\n    currentTicketShow,\r\n    changeCurrentTicketShow,\r\n  };\r\n}\r\n\r\nfunction GamePage({ setAppState }) {\r\n  const game = useSelector(selectGame);\r\n\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const localPlayer = useSelector(selectLocalPlayer);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      wsSubscribeChannel(ServerMessages.ACTION_SENT, (resp) => {\r\n        const payload = resp.action.payload;\r\n        switch (resp.action.type) {\r\n          case GameActionTypes.NEXT_TURN:\r\n            dispatch(nextGameTurn());\r\n            break;\r\n          case GameActionTypes.ADD_BUILT_CONNECTION:\r\n            dispatch(\r\n              addBuiltConnection(payload.playerId, payload.connectionId)\r\n            );\r\n            break;\r\n          case GameActionTypes.ADD_TICKET:\r\n            dispatch(addTicket(payload.playerId, payload.ticket));\r\n            break;\r\n          case GameActionTypes.ADD_HISTORY:\r\n            dispatch(addHistory(payload.playerId, payload.historyElement));\r\n            break;\r\n          case GameActionTypes.ADD_COMPLETED_TICKET:\r\n            dispatch(addCompletedTicket(payload.playerId, payload.ticket));\r\n            break;\r\n          case GameActionTypes.END_TURN:\r\n            dispatch(setEndTurn(payload));\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      })\r\n    );\r\n    dispatch(\r\n      wsSubscribeChannel(ServerMessages.STATE_CHANGED, (resp) => {\r\n        const state = resp.state;\r\n        if (state.deck) {\r\n          dispatch(setDeck(state.deck));\r\n        }\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  const localPlayerTickets = localPlayer.tickets;\r\n  const allBuiltConnections = useSelector(selectAllBuiltConnections);\r\n  const localPlayerCards = useSelector(selectLocalPlayerCards);\r\n\r\n  const [showTicketCities, setShowTicketCities] = useState(null);\r\n  const { currentTicketShow, changeCurrentTicketShow } = useCurrentTicketShow(\r\n    localPlayerTickets\r\n  );\r\n\r\n  const {\r\n    showBuildModal,\r\n    buildableConnection,\r\n    changeShowBuildModal,\r\n  } = useBuildModalShow();\r\n  const {\r\n    showNotificationModal,\r\n    notificationMessage,\r\n    changeShowNotificationModal,\r\n  } = useNotificationModalShow();\r\n\r\n  const [chosenCity, setChosenCity] = useState(null);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"h-100 w-100 d-flex flex-column\">\r\n        <div className=\"flex-grow-1 d-flex flex-row mt-2\">\r\n          <div className=\"side-bar text-center d-flex flex-column\">\r\n            <PlayerIndicatorPanel />\r\n          </div>\r\n          <div className=\"flex-grow-1 text-center px-2 d-flex align-items-center\">\r\n            <Map\r\n              chosenCity={chosenCity}\r\n              setChosenCity={(city) => {\r\n                if (\r\n                  localPlayer !== currentPlayer ||\r\n                  (game.gameState !== GameStates.USER_BEGIN &&\r\n                    game.gameState !== GameStates.BUILD_LINE)\r\n                ) {\r\n                  changeShowNotificationModal(\"Most nem tudsz építeni.\");\r\n                  return;\r\n                }\r\n                if (city === chosenCity) {\r\n                  setChosenCity(null);\r\n                  dispatch(setGameState(GameStates.USER_BEGIN));\r\n                } else if (chosenCity) {\r\n                  const occupiedConnections = allBuiltConnections.flatMap(\r\n                    ({ _, connections }) => connections\r\n                  );\r\n\r\n                  const connection = Object.values(\r\n                    ticketToRideData.connections\r\n                  ).find(\r\n                    (connection) =>\r\n                      (connection.fromCity === city &&\r\n                        connection.toCity === chosenCity) ||\r\n                      (connection.fromCity === chosenCity &&\r\n                        connection.toCity === city)\r\n                  );\r\n                  if (connection.elements.length > localPlayer.remainingCars) {\r\n                    changeShowNotificationModal(\"Nincs elég vagonod.\");\r\n                    return;\r\n                  }\r\n                  let hasEnoughCards =\r\n                    connection &&\r\n                    localPlayerCards.some(\r\n                      ({ color, amount }) =>\r\n                        (connection.color === \"gray\" ||\r\n                          color === Colors[connection.color.toUpperCase()] ||\r\n                          color === Colors.LOCOMOTIVE) &&\r\n                        amount >= connection.elements.length\r\n                    );\r\n                  if (!hasEnoughCards) {\r\n                    const locomotives = localPlayerCards.find(\r\n                      (card) => card.color === Colors.LOCOMOTIVE\r\n                    ).amount;\r\n\r\n                    if (connection.color === \"gray\") {\r\n                      hasEnoughCards = localPlayerCards.some(\r\n                        ({ _, amount }) =>\r\n                          locomotives + amount >= connection.elements.length\r\n                      );\r\n                    } else {\r\n                      const colorTrains = localPlayerCards.find(\r\n                        (card) =>\r\n                          card.color === Colors[connection.color.toUpperCase()]\r\n                      ).amount;\r\n\r\n                      hasEnoughCards =\r\n                        colorTrains + locomotives >= connection.elements.length;\r\n                    }\r\n                  }\r\n\r\n                  if (\r\n                    connection &&\r\n                    !occupiedConnections.includes(connection.id) &&\r\n                    hasEnoughCards\r\n                  ) {\r\n                    changeShowBuildModal(true, connection.id);\r\n                  } else {\r\n                    dispatch(setGameState(GameStates.USER_BEGIN));\r\n                    changeShowNotificationModal(\r\n                      \"Ezt a vonalat nem tudod megépíteni.\"\r\n                    );\r\n                  }\r\n                  setChosenCity(null);\r\n                } else {\r\n                  setChosenCity(city);\r\n                  dispatch(setGameState(GameStates.BUILD_LINE));\r\n                }\r\n              }}\r\n              showTicketCities={showTicketCities}\r\n            ></Map>\r\n          </div>\r\n          <div className=\"side-bar text-center d-flex flex-column align-items-center\">\r\n            <div>\r\n              <PublicCardsPanel\r\n                changeShowNotificationModal={changeShowNotificationModal}\r\n              />\r\n            </div>\r\n            <div>\r\n              <DeckPanel></DeckPanel>\r\n            </div>\r\n            <div className=\"mt-auto mb-4\">\r\n              <TicketDeckPanel\r\n                setShowTicketCities={setShowTicketCities}\r\n                changeShowNotificationModal={changeShowNotificationModal}\r\n              ></TicketDeckPanel>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"bottom-bar d-flex flex-row\">\r\n          <div className=\"side-bar text-center d-flex flex-column\">\r\n            <CurrentPlayerTicketPanel\r\n              currentTicketShow={currentTicketShow}\r\n              changeCurrentTicketShow={changeCurrentTicketShow}\r\n              setShowTicketCities={setShowTicketCities}\r\n            ></CurrentPlayerTicketPanel>\r\n          </div>\r\n          <div className=\"flex-grow-1 text-center px-2 col\">\r\n            <CurrentPlayerCardsPanel />\r\n          </div>\r\n          <div className=\"side-bar text-center d-flex flex-column\">\r\n            <HistoryPanel />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {showNotificationModal && (\r\n        <NotificationModal message={notificationMessage} />\r\n      )}\r\n      {showBuildModal && (\r\n        <BuildModal\r\n          buildableConnection={buildableConnection}\r\n          closeModal={() => {\r\n            changeShowBuildModal(false, -1);\r\n          }}\r\n        ></BuildModal>\r\n      )}\r\n      {game.gameState === GameStates.END_GAME && (\r\n        <EndGameModal\r\n          setAppState={setAppState}\r\n          showTicketCities={showTicketCities}\r\n          setShowTicketCities={setShowTicketCities}\r\n        ></EndGameModal>\r\n      )}\r\n    </>\r\n  );\r\n}\r\nGamePage.propTypes = {};\r\n\r\nexport default GamePage;\r\n","import \"./App.css\";\nimport { useEffect, useState } from \"react\";\nimport Layout from \"./views/layout/Layout\";\nimport MainPage from \"./views/main/MainPage\";\nimport LobbyPage from \"./views/lobby/LobbyPage\";\nimport GamePage from \"./views/game/GamePage\";\nimport { AppStates } from \"./domain/app\";\nimport { useDispatch } from \"react-redux\";\nimport { wsConnect } from \"./state/socket/actions\";\n\nfunction renderPage(appState, setAppState) {\n  switch (appState) {\n    case AppStates.MAIN_PAGE:\n      return <MainPage setAppState={setAppState}></MainPage>;\n    case AppStates.WAITING_FOR_PLAYERS:\n      return <LobbyPage setAppState={setAppState}></LobbyPage>;\n    case AppStates.IN_GAME:\n      return <GamePage setAppState={setAppState}></GamePage>;\n    default:\n      return <MainPage setAppState={setAppState}></MainPage>;\n  }\n}\n\nfunction App() {\n  const [appState, setAppState] = useState(AppStates.MAIN_PAGE);\n  const [gameRoom, setGameRoom] = useState(null);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    //  dispatch(wsConnect(\"http://webprogramozas.inf.elte.hu:3031\"));\n    dispatch(wsConnect(process.env.BACKEND_SERVER || \"http://localhost:3031\"));\n  }, [dispatch]);\n\n  return (\n    <Layout>{renderPage(appState, setAppState, gameRoom, setGameRoom)}</Layout>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { CardStates } from \"../../domain/card\";\r\nimport { Colors } from \"../../domain/colors\";\r\nimport { REMOVE_CARD_FROM_PLAYER, SET_DECK, UPDATE_CARD } from \"./actions\";\r\n\r\nconst initialState = [];\r\nexport function deckReducer(state = initialState, action) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_DECK:\r\n      return payload;\r\n    case UPDATE_CARD:\r\n      return updateCard(state, payload);\r\n    case REMOVE_CARD_FROM_PLAYER:\r\n      const { playerId, color, amount } = payload;\r\n      return removeCardFromPlayer(state, playerId, color, amount);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction refreshPublicCards(deck) {\r\n  let newDeck = [...deck];\r\n  let publicCards = newDeck.filter((card) =>\r\n    CardStates.PUBLIC.includes(card.cardState)\r\n  );\r\n\r\n  for (let i = 0; i < CardStates.PUBLIC.length; i++) {\r\n    if (!publicCards.some((card) => card.cardState === CardStates.PUBLIC[i])) {\r\n      for (let card of newDeck) {\r\n        if (card.cardState === CardStates.DECK) {\r\n          card.cardState = CardStates.PUBLIC[i];\r\n          publicCards.push(card);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (\r\n    publicCards.filter((card) => card.color === Colors.LOCOMOTIVE).length >= 3\r\n  ) {\r\n    newDeck = newDeck.map((card) => {\r\n      if (CardStates.PUBLIC.includes(card.cardState))\r\n        return {...card, cardState: CardStates.REMOVED};\r\n\r\n      return card;\r\n    });\r\n    return refreshPublicCards(newDeck);\r\n  }\r\n\r\n  return newDeck;\r\n}\r\n\r\nfunction updateCard(deck, updatedCard) {\r\n  let isPublicCard = false;\r\n  let updatedDeck = deck.map((card) => {\r\n    if (card.id === updatedCard.id) {\r\n      if (card.cardState <= CardStates.PUBLIC[0]) {\r\n        isPublicCard = true;\r\n      }\r\n      return updatedCard;\r\n    } else {\r\n      return card;\r\n    }\r\n  });\r\n  if (isPublicCard) {\r\n    updatedDeck = refreshPublicCards(updatedDeck);\r\n  }\r\n\r\n  return updatedDeck;\r\n}\r\n\r\nfunction removeCardFromPlayer(deck, playerId, color, amount) {\r\n  let updatedCards = 0;\r\n  let updatedDeck = deck.map((card) => {\r\n    if (\r\n      updatedCards < amount &&\r\n      card.cardState === playerId &&\r\n      card.color === color\r\n    ) {\r\n      updatedCards++;\r\n      return { ...card, cardState: CardStates.REMOVED };\r\n    }\r\n    return card;\r\n  });\r\n  return updatedDeck;\r\n}","import { GameStates } from \"../../domain/game\";\r\nimport { NEXT_TURN, SET_END_TURN, SET_GAME, SET_GAME_STATE } from \"./actions\";\r\n\r\nconst initialState = {};\r\n\r\nexport function gameReducer(state = initialState, action) {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case SET_GAME:\r\n      return payload;\r\n    case SET_GAME_STATE:\r\n      return { ...state, gameState: payload };\r\n    case NEXT_TURN:\r\n      const nextPlayerId = (state.currentPlayerId + 1) % state.playerNumber;\r\n      return {\r\n        ...state,\r\n        currentPlayerId: nextPlayerId,\r\n        gameState: GameStates.USER_BEGIN,\r\n      };\r\n    case SET_END_TURN:\r\n      return { ...state, endTurn: payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { SET_ROOM } from \"./actions\";\r\n\r\nconst initialState = {\r\n  roomId: -1,\r\n  roomSize: -1,\r\n  players: [],\r\n};\r\n\r\nexport function lobbyReducer(state = initialState, action) {\r\n  const { type, payload } = action;\r\n  let newState;\r\n  switch (type) {\r\n    case SET_ROOM:\r\n      const { roomId, roomSize, players } = payload;\r\n      newState = { roomId, roomSize, players };\r\n      break;\r\n    default:\r\n      newState = state;\r\n      break;\r\n  }\r\n  return newState;\r\n}","import { ticketToRideData } from \"../../data/ticket-to-ride-data\";\r\nimport {\r\n  ADD_BUILT_CONNECTION,\r\n  ADD_COMPLETED_TICKET,\r\n  ADD_HISTORY,\r\n  ADD_TICKET,\r\n  NEXT_PLAYER_TURN,\r\n  SET_PLAYERS,\r\n} from \"./actions\";\r\n\r\nconst initialState = [];\r\n\r\nexport function playersReducer(state = initialState, action) {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case SET_PLAYERS:\r\n      return payload;\r\n    case NEXT_PLAYER_TURN:\r\n      return nextTurn(state, payload);\r\n    case ADD_TICKET:\r\n      return addTicket(state, payload);\r\n    case ADD_BUILT_CONNECTION:\r\n      return addBuiltConnection(state, payload);\r\n    case ADD_HISTORY:\r\n      return addHistory(state, payload);\r\n    case ADD_COMPLETED_TICKET:\r\n      return addCompletedTicket(state, payload);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction addCompletedTicket(state, payload) {\r\n  const { playerId, ticket } = payload;\r\n\r\n  const ticketData = Object.values(\r\n    ticket.long\r\n      ? ticketToRideData.longDestinations\r\n      : ticketToRideData.destinations\r\n  )[ticket.id];\r\n\r\n  return state.map((player) => {\r\n    if (player.id === playerId) {\r\n      return {\r\n        ...player,\r\n        completedTickets: [...player.completedTickets, ticket],\r\n        points: player.points + +ticketData.value,\r\n      };\r\n    }\r\n    return player;\r\n  });\r\n}\r\n\r\nfunction nextTurn(state, payload) {\r\n  const currentPlayerId = payload;\r\n  return state.map((player) => {\r\n    if (player.id === currentPlayerId) {\r\n      return { ...player, round: player.round + 1 };\r\n    }\r\n    return player;\r\n  });\r\n}\r\n\r\nfunction addTicket(state, payload) {\r\n  const { playerId, ticket } = payload;\r\n\r\n  return state.map((player) => {\r\n    if (player.id === playerId) {\r\n      return {\r\n        ...player,\r\n        tickets: [...player.tickets, ticket],\r\n      };\r\n    }\r\n    return player;\r\n  });\r\n}\r\n\r\nfunction addHistory(state, payload) {\r\n  const { playerId, historyElement } = payload;\r\n  return state.map((player) => {\r\n    if (player.id === playerId) {\r\n      return {\r\n        ...player,\r\n        history: [historyElement, ...player.history].slice(0, 2),\r\n      };\r\n    }\r\n    return player;\r\n  });\r\n}\r\n\r\nfunction addBuiltConnection(state, payload) {\r\n  const { playerId, connectionId } = payload;\r\n  const connection = Object.values(ticketToRideData.connections)[\r\n    connectionId - 1\r\n  ];\r\n  const CONNECTION_VALUES = [1, 2, 4, 7, 0, 15, 21];\r\n\r\n  return state.map((player) => {\r\n    if (player.id === playerId) {\r\n      return {\r\n        ...player,\r\n        points:\r\n          player.points + CONNECTION_VALUES[connection.elements.length - 1],\r\n        builtConnections: [...player.builtConnections, connectionId],\r\n        remainingCars: player.remainingCars - connection.elements.length,\r\n      };\r\n    }\r\n    return player;\r\n  });\r\n}\r\n","import { applyMiddleware, combineReducers, createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from \"redux-thunk\";\r\nimport { deckReducer } from \"./deck/reducer\";\r\nimport { gameReducer } from \"./game/reducer\";\r\nimport { lobbyReducer } from \"./lobby/reducer\";\r\nimport { playersReducer } from \"./players/reducer\";\r\nimport { socketMiddleware } from \"./socket/reducer\";\r\n\r\nexport const store = createStore(\r\n    combineReducers({\r\n        players: playersReducer,\r\n        game: gameReducer,\r\n        deck: deckReducer,\r\n        lobby: lobbyReducer\r\n    }),\r\n    composeWithDevTools(\r\n      applyMiddleware(thunk, socketMiddleware)\r\n    ),\r\n);","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./state/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}