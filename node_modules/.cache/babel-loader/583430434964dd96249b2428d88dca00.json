{"ast":null,"code":"import _objectSpread from\"C:/Win11/Programming/Other/ticket-to-ride-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{ClientMessages}from\"../../../../api/socket\";import{Colors}from\"../../../../domain/colors\";import{GameStates}from\"../../../../domain/game\";import{updateCard}from\"../../../../state/deck/actions\";import{selectFreeCards,selectTopCardOfDeck}from\"../../../../state/deck/selector\";import{setGameState}from\"../../../../state/game/actions\";import{selectGame}from\"../../../../state/game/selector\";import{addHistory}from\"../../../../state/players/actions\";import{selectCurrentPlayer,selectLocalPlayer}from\"../../../../state/players/selector\";import{wsSendMessage}from\"../../../../state/socket/actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DeckPanel(){var dispatch=useDispatch();var freeCardsNumber=useSelector(selectFreeCards).length;var topCardOfDeck=useSelector(selectTopCardOfDeck);var currentPlayer=useSelector(selectCurrentPlayer);var game=useSelector(selectGame);var localPlayer=useSelector(selectLocalPlayer);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"H\\xFAz\\xF3pakli\"}),/*#__PURE__*/_jsx(\"button\",{className:\"game-card card my-2 mx-1 p-0 border\",style:{backgroundColor:\"#333333\"},onClick:function onClick(){if((game.gameState===GameStates.USER_BEGIN||game.gameState===GameStates.DRAW_CARDS)&&currentPlayer===localPlayer){dispatch(updateCard(_objectSpread(_objectSpread({},topCardOfDeck),{},{cardState:currentPlayer.id})));dispatch(addHistory(currentPlayer.id,\"Kártyát húzott: \"+Object.keys(Colors).find(function(c){return Colors[c]===topCardOfDeck.color;})));dispatch(setGameState(game.gameState===GameStates.USER_BEGIN?GameStates.DRAW_CARDS:GameStates.DRAW_CARD2));dispatch(wsSendMessage(ClientMessages.SYNC_STATE,[game.id,{game:game},true],function(){}));}},children:/*#__PURE__*/_jsx(\"span\",{className:\"game-card card w-100 h-100 border\",style:{backgroundColor:\"#333333\",top:\"-0.2rem\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"game-card card w-100 h-100 border-0\",style:{backgroundColor:\"#999999\",top:\"-0.2rem\"},children:freeCardsNumber})})})]});}export default DeckPanel;","map":{"version":3,"names":["React","useDispatch","useSelector","ClientMessages","Colors","GameStates","updateCard","selectFreeCards","selectTopCardOfDeck","setGameState","selectGame","addHistory","selectCurrentPlayer","selectLocalPlayer","wsSendMessage","DeckPanel","dispatch","freeCardsNumber","length","topCardOfDeck","currentPlayer","game","localPlayer","backgroundColor","gameState","USER_BEGIN","DRAW_CARDS","cardState","id","Object","keys","find","c","color","DRAW_CARD2","SYNC_STATE","top"],"sources":["C:/Win11/Programming/Other/ticket-to-ride-app/src/views/game/panel/deck-panel/DeckPanel.js"],"sourcesContent":["import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages } from \"../../../../api/socket\";\r\nimport { Colors } from \"../../../../domain/colors\";\r\nimport { GameStates } from \"../../../../domain/game\";\r\nimport { updateCard } from \"../../../../state/deck/actions\";\r\nimport {\r\n  selectFreeCards,\r\n  selectTopCardOfDeck,\r\n} from \"../../../../state/deck/selector\";\r\nimport { setGameState } from \"../../../../state/game/actions\";\r\nimport { selectGame } from \"../../../../state/game/selector\";\r\nimport { addHistory } from \"../../../../state/players/actions\";\r\nimport { selectCurrentPlayer, selectLocalPlayer } from \"../../../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../../../state/socket/actions\";\r\n\r\nfunction DeckPanel() {\r\n  const dispatch = useDispatch();\r\n  const freeCardsNumber = useSelector(selectFreeCards).length;\r\n  const topCardOfDeck = useSelector(selectTopCardOfDeck);\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const game = useSelector(selectGame);\r\n\r\n  const localPlayer = useSelector(selectLocalPlayer);\r\n\r\n  return (\r\n    <>\r\n      <span>Húzópakli</span>\r\n      <button\r\n        className=\"game-card card my-2 mx-1 p-0 border\"\r\n        style={{ backgroundColor: \"#333333\" }}\r\n        onClick={() => {\r\n          if (\r\n            (game.gameState === GameStates.USER_BEGIN ||\r\n            game.gameState === GameStates.DRAW_CARDS) && currentPlayer === localPlayer\r\n          ) {\r\n            dispatch(\r\n              updateCard({ ...topCardOfDeck, cardState: currentPlayer.id })\r\n            );\r\n            dispatch(addHistory(currentPlayer.id, \"Kártyát húzott: \"+Object.keys(Colors).find(c => Colors[c] === topCardOfDeck.color)));\r\n            dispatch(\r\n              setGameState(\r\n                game.gameState === GameStates.USER_BEGIN\r\n                  ? GameStates.DRAW_CARDS\r\n                  : GameStates.DRAW_CARD2\r\n              )\r\n            );\r\n            dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [game.id, {game: game}, true], function() {} ));\r\n          }\r\n        }}\r\n      >\r\n        <span\r\n          className=\"game-card card w-100 h-100 border\"\r\n          style={{ backgroundColor: \"#333333\", top: \"-0.2rem\" }}\r\n        >\r\n          <span\r\n            className=\"game-card card w-100 h-100 border-0\"\r\n            style={{ backgroundColor: \"#999999\", top: \"-0.2rem\" }}\r\n          >\r\n            {freeCardsNumber}\r\n          </span>\r\n        </span>\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DeckPanel;\r\n"],"mappings":"kIAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,cAAc,KAAQ,wBAAwB,CACvD,OAASC,MAAM,KAAQ,2BAA2B,CAClD,OAASC,UAAU,KAAQ,yBAAyB,CACpD,OAASC,UAAU,KAAQ,gCAAgC,CAC3D,OACEC,eAAe,CACfC,mBAAmB,KACd,iCAAiC,CACxC,OAASC,YAAY,KAAQ,gCAAgC,CAC7D,OAASC,UAAU,KAAQ,iCAAiC,CAC5D,OAASC,UAAU,KAAQ,mCAAmC,CAC9D,OAASC,mBAAmB,CAAEC,iBAAiB,KAAQ,oCAAoC,CAC3F,OAASC,aAAa,KAAQ,kCAAkC,CAAC,6IAEjE,QAASC,UAAS,EAAG,CACnB,GAAMC,SAAQ,CAAGf,WAAW,EAAE,CAC9B,GAAMgB,gBAAe,CAAGf,WAAW,CAACK,eAAe,CAAC,CAACW,MAAM,CAC3D,GAAMC,cAAa,CAAGjB,WAAW,CAACM,mBAAmB,CAAC,CACtD,GAAMY,cAAa,CAAGlB,WAAW,CAACU,mBAAmB,CAAC,CACtD,GAAMS,KAAI,CAAGnB,WAAW,CAACQ,UAAU,CAAC,CAEpC,GAAMY,YAAW,CAAGpB,WAAW,CAACW,iBAAiB,CAAC,CAElD,mBACE,wCACE,yCAAsB,cACtB,eACE,SAAS,CAAC,qCAAqC,CAC/C,KAAK,CAAE,CAAEU,eAAe,CAAE,SAAU,CAAE,CACtC,OAAO,CAAE,kBAAM,CACb,GACE,CAACF,IAAI,CAACG,SAAS,GAAKnB,UAAU,CAACoB,UAAU,EACzCJ,IAAI,CAACG,SAAS,GAAKnB,UAAU,CAACqB,UAAU,GAAKN,aAAa,GAAKE,WAAW,CAC1E,CACAN,QAAQ,CACNV,UAAU,gCAAMa,aAAa,MAAEQ,SAAS,CAAEP,aAAa,CAACQ,EAAE,GAAG,CAC9D,CACDZ,QAAQ,CAACL,UAAU,CAACS,aAAa,CAACQ,EAAE,CAAE,kBAAkB,CAACC,MAAM,CAACC,IAAI,CAAC1B,MAAM,CAAC,CAAC2B,IAAI,CAAC,SAAAC,CAAC,QAAI5B,OAAM,CAAC4B,CAAC,CAAC,GAAKb,aAAa,CAACc,KAAK,GAAC,CAAC,CAAC,CAC3HjB,QAAQ,CACNP,YAAY,CACVY,IAAI,CAACG,SAAS,GAAKnB,UAAU,CAACoB,UAAU,CACpCpB,UAAU,CAACqB,UAAU,CACrBrB,UAAU,CAAC6B,UAAU,CAC1B,CACF,CACDlB,QAAQ,CAACF,aAAa,CAACX,cAAc,CAACgC,UAAU,CAAE,CAACd,IAAI,CAACO,EAAE,CAAE,CAACP,IAAI,CAAEA,IAAI,CAAC,CAAE,IAAI,CAAC,CAAE,UAAW,CAAC,CAAC,CAAE,CAAC,CACnG,CACF,CAAE,uBAEF,aACE,SAAS,CAAC,mCAAmC,CAC7C,KAAK,CAAE,CAAEE,eAAe,CAAE,SAAS,CAAEa,GAAG,CAAE,SAAU,CAAE,uBAEtD,aACE,SAAS,CAAC,qCAAqC,CAC/C,KAAK,CAAE,CAAEb,eAAe,CAAE,SAAS,CAAEa,GAAG,CAAE,SAAU,CAAE,UAErDnB,eAAe,EACX,EACF,EACA,GACR,CAEP,CAEA,cAAeF,UAAS"},"metadata":{},"sourceType":"module"}