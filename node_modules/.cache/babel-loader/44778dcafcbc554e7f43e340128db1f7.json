{"ast":null,"code":"import{motion}from\"framer-motion\";import React from\"react\";import{FaUser}from\"react-icons/fa\";import{useDispatch,useSelector}from\"react-redux\";import{ClientMessages}from\"../../api/socket\";import{ticketToRideData}from\"../../data/ticket-to-ride-data\";import{AppStates}from\"../../domain/app\";import{selectGame}from\"../../state/game/selector\";import{selectPlayers}from\"../../state/players/selector\";import{wsSendMessage}from\"../../state/socket/actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EndGameModal(_ref){var setAppState=_ref.setAppState,showTicketCities=_ref.showTicketCities,setShowTicketCities=_ref.setShowTicketCities;var players=useSelector(selectPlayers);var dispatch=useDispatch();var game=useSelector(selectGame);var summaryComponents=players.map(function(player,i){var ticketsValues=player.tickets.reduce(function(sum,ticket){var ticketData=Object.values(ticket.long?ticketToRideData.longDestinations:ticketToRideData.destinations)[ticket.id];var contains=player.completedTickets.includes(ticket);return sum+(contains?+ticketData.value:-+ticketData.value);},0);var tickets=player.tickets.map(function(ticket,j){var ticketData=Object.values(ticket.long?ticketToRideData.longDestinations:ticketToRideData.destinations)[ticket.id];return/*#__PURE__*/_jsx(\"span\",{className:\"mx-1 d-inline-block\",style:{backgroundColor:player.completedTickets.find(function(t){return t.id===ticket.id&&t.long===ticket.long;})?\"green\":\"red\",width:\"1.5rem\",height:\"1rem\"},onMouseEnter:function onMouseEnter(){return setShowTicketCities(ticketData);},onMouseLeave:function onMouseLeave(){return setShowTicketCities(null);}},j);});return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"text-left\",children:[/*#__PURE__*/_jsx(FaUser,{color:player.color}),\" \",player.name]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:player.points+ticketsValues}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-center px-5\",children:[/*#__PURE__*/_jsx(\"div\",{children:ticketsValues}),/*#__PURE__*/_jsx(\"div\",{className:\"text-left\",children:tickets})]})]},i);});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(motion.div,{className:\"position-absolute w-100 h-100 d-flex flex-col justify-content-center align-items-center\",style:{backgroundColor:\"#00000088\",top:0,left:0,zIndex:999,opacity:0},animate:{opacity:showTicketCities?0.2:1},children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card card-login mx-auto text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header mx-auto\",children:/*#__PURE__*/_jsx(\"span\",{className:\"logo_title mt-5\",children:\"J\\xE1t\\xE9k v\\xE9ge\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-white\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"N\\xE9v\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Utak pont\\xE9rt\\xE9ke\"}),/*#__PURE__*/_jsx(\"th\",{children:\"C\\xE9lok pont\\xE9rt\\xE9ke\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:summaryComponents})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn button-silver\",onClick:function onClick(){dispatch(wsSendMessage(ClientMessages.LEAVE_ROOM,[game.id],function(){setAppState(AppStates.MAIN_PAGE);}));},children:\"Vissza a f\\u0151men\\xFCbe\"})]})]})})})})});}export default EndGameModal;","map":{"version":3,"names":["motion","React","FaUser","useDispatch","useSelector","ClientMessages","ticketToRideData","AppStates","selectGame","selectPlayers","wsSendMessage","EndGameModal","setAppState","showTicketCities","setShowTicketCities","players","dispatch","game","summaryComponents","map","player","i","ticketsValues","tickets","reduce","sum","ticket","ticketData","Object","values","long","longDestinations","destinations","id","contains","completedTickets","includes","value","j","backgroundColor","find","t","width","height","color","name","points","top","left","zIndex","opacity","LEAVE_ROOM","MAIN_PAGE"],"sources":["C:/Win11/Programming/Other/ticket-to-ride-app/src/views/game/EndGameModal.js"],"sourcesContent":["import { motion } from \"framer-motion\";\r\nimport React from \"react\";\r\nimport { FaUser } from \"react-icons/fa\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages } from \"../../api/socket\";\r\nimport { ticketToRideData } from \"../../data/ticket-to-ride-data\";\r\nimport { AppStates } from \"../../domain/app\";\r\nimport { selectGame } from \"../../state/game/selector\";\r\nimport { selectPlayers } from \"../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../state/socket/actions\";\r\n\r\nfunction EndGameModal({ setAppState, showTicketCities, setShowTicketCities }) {\r\n  const players = useSelector(selectPlayers);\r\n  const dispatch = useDispatch();\r\n  const game = useSelector(selectGame);\r\n\r\n  const summaryComponents = players.map((player, i) => {\r\n\r\n    const ticketsValues = player.tickets.reduce((sum, ticket) => {\r\n      const ticketData = Object.values(\r\n        ticket.long\r\n          ? ticketToRideData.longDestinations\r\n          : ticketToRideData.destinations\r\n      )[ticket.id];\r\n      const contains = player.completedTickets.includes(ticket);\r\n      return sum + (contains ? +ticketData.value : -+ticketData.value);\r\n    }, 0);\r\n\r\n    const tickets = player.tickets.map((ticket, j) => {\r\n      const ticketData = Object.values(\r\n        ticket.long\r\n          ? ticketToRideData.longDestinations\r\n          : ticketToRideData.destinations\r\n      )[ticket.id];\r\n\r\n      return (\r\n        <span\r\n          key={j}\r\n          className=\"mx-1 d-inline-block\"\r\n          style={{\r\n            backgroundColor: player.completedTickets.find(\r\n              (t) => t.id === ticket.id && t.long === ticket.long\r\n            )\r\n              ? \"green\"\r\n              : \"red\",\r\n            width: \"1.5rem\",\r\n            height: \"1rem\",\r\n          }}\r\n          onMouseEnter={() => setShowTicketCities(ticketData)}\r\n          onMouseLeave={() => setShowTicketCities(null)}\r\n        ></span>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <tr key={i}>\r\n        <td className=\"text-left\">\r\n          <FaUser color={player.color} /> {player.name}\r\n        </td>\r\n        <td className=\"text-center\">{player.points + ticketsValues}</td>\r\n        <td className=\"text-center px-5\">\r\n          <div>{ticketsValues}</div>\r\n          <div className=\"text-left\">{tickets}</div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <motion.div\r\n        className=\"position-absolute w-100 h-100 d-flex flex-col justify-content-center align-items-center\"\r\n        style={{\r\n          backgroundColor: \"#00000088\",\r\n          top: 0,\r\n          left: 0,\r\n          zIndex: 999,\r\n          opacity: 0,\r\n        }}\r\n        animate={{ opacity: showTicketCities ? 0.2 : 1 }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <div className=\"card card-login mx-auto text-center\">\r\n              <div className=\"card-header mx-auto\">\r\n                <span className=\"logo_title mt-5\">Játék vége</span>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <table className=\"\">\r\n                  <thead className=\"text-white\">\r\n                    <tr>\r\n                      <th>Név</th>\r\n                      <th>Utak pontértéke</th>\r\n                      <th>Célok pontértéke</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>{summaryComponents}</tbody>\r\n                </table>\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn button-silver\"\r\n                  onClick={() => {\r\n                    \r\n                    dispatch(wsSendMessage(ClientMessages.LEAVE_ROOM, [game.id], function() {\r\n                      setAppState(AppStates.MAIN_PAGE);\r\n                    } ));\r\n                  }\r\n                  }\r\n                >\r\n                  Vissza a főmenübe\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EndGameModal;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}