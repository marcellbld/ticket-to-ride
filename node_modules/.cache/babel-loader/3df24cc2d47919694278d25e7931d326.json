{"ast":null,"code":"var _jsxFileName = \"C:\\\\Win11\\\\Programming\\\\Other\\\\ticket-to-ride-app\\\\src\\\\views\\\\game\\\\panel\\\\ticket-deck-panel\\\\TicketDeckModal.js\",\n  _s = $RefreshSig$();\nimport { motion } from \"framer-motion\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ClientMessages, GameActionTypes } from \"../../../../api/socket\";\nimport { ticketToRideData } from \"../../../../data/ticket-to-ride-data\";\nimport { selectGame } from \"../../../../state/game/selector\";\nimport { addHistory, addTicket } from \"../../../../state/players/actions\";\nimport { selectCurrentPlayer, selectPlayers } from \"../../../../state/players/selector\";\nimport { wsSendMessage } from \"../../../../state/socket/actions\";\nimport TicketCard from \"../../TicketCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction TicketDeckModal(_ref) {\n  _s();\n  let {\n    setShowModal,\n    setShowTicketCities\n  } = _ref;\n  const [selectedTickets, setSelectedTickets] = useState([]);\n  const [ticketDatas, setTicketDatas] = useState([]);\n  const dispatch = useDispatch();\n  const currentPlayer = useSelector(selectCurrentPlayer);\n  const game = useSelector(selectGame);\n  const players = useSelector(selectPlayers);\n  useEffect(() => {\n    const datas = [];\n    for (let i = 0; i < 3; i++) {\n      const id = Math.floor(Math.random() * 46);\n      const long = id >= 40;\n      datas.push({\n        id: long ? id - 40 : id,\n        long\n      });\n    }\n    setTicketDatas(datas);\n  }, [dispatch]);\n  const ticketElements = ticketDatas.map((data, i) => {\n    const ticketData = Object.values(data.long ? ticketToRideData.longDestinations : ticketToRideData.destinations)[data.id];\n    return /*#__PURE__*/_jsxDEV(motion.a, {\n      className: \"btn mx-4\",\n      variants: {\n        selected: {\n          scale: 1.2\n        },\n        simple: {\n          scale: 1\n        }\n      },\n      animate: selectedTickets.findIndex(t => t === i) > -1 ? \"selected\" : \"simple\",\n      transition: {\n        duration: 1\n      },\n      onClick: () => {\n        const findId = selectedTickets.findIndex(t => t === i);\n        if (findId > -1) {\n          selectedTickets.splice(findId, 1);\n          setSelectedTickets([...selectedTickets]);\n        } else {\n          setSelectedTickets([...selectedTickets, i]);\n        }\n      },\n      onMouseEnter: () => {\n        setShowTicketCities(ticketData);\n      },\n      onMouseLeave: () => {\n        setShowTicketCities(null);\n      },\n      children: /*#__PURE__*/_jsxDEV(TicketCard, {\n        ticketData: ticketData,\n        long: data.long,\n        completed: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"position-absolute w-100 h-100 d-flex flex-col align-items-end\",\n      style: {\n        backgroundColor: \"#00000022\",\n        top: 0,\n        left: 0,\n        zIndex: 999\n      },\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"col py-4\",\n        style: {\n          backgroundColor: \"#00000088\",\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: ticketElements\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn button-orange\",\n            onClick: () => {\n              for (let selectedTicket of selectedTickets) {\n                dispatch(addTicket(currentPlayer.id, {\n                  id: ticketDatas[selectedTicket].id,\n                  long: ticketDatas[selectedTicket].long\n                }, true));\n              }\n              setShowModal(false);\n              dispatch(addHistory(currentPlayer.id, selectedTickets.length + \" db új célkártyát húzott\", true));\n              dispatch(wsSendMessage(ClientMessages.SYNC_ACTION, [game.id, {\n                type: GameActionTypes.NEXT_TURN\n              }, false], function () {}));\n              dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [game.id, {\n                players,\n                game\n              }, true], function () {}));\n            },\n            disabled: selectedTickets.length === 0,\n            children: \"Elfogad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(TicketDeckModal, \"gOD5wcnCf08kGtcQH+m+hPIb9MU=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n_c = TicketDeckModal;\nexport default TicketDeckModal;\nvar _c;\n$RefreshReg$(_c, \"TicketDeckModal\");","map":{"version":3,"names":["motion","React","useEffect","useState","useDispatch","useSelector","ClientMessages","GameActionTypes","ticketToRideData","selectGame","addHistory","addTicket","selectCurrentPlayer","selectPlayers","wsSendMessage","TicketCard","TicketDeckModal","setShowModal","setShowTicketCities","selectedTickets","setSelectedTickets","ticketDatas","setTicketDatas","dispatch","currentPlayer","game","players","datas","i","id","Math","floor","random","long","push","ticketElements","map","data","ticketData","Object","values","longDestinations","destinations","selected","scale","simple","findIndex","t","duration","findId","splice","backgroundColor","top","left","zIndex","opacity","selectedTicket","length","SYNC_ACTION","type","NEXT_TURN","SYNC_STATE"],"sources":["C:/Win11/Programming/Other/ticket-to-ride-app/src/views/game/panel/ticket-deck-panel/TicketDeckModal.js"],"sourcesContent":["import { motion } from \"framer-motion\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages, GameActionTypes } from \"../../../../api/socket\";\r\nimport { ticketToRideData } from \"../../../../data/ticket-to-ride-data\";\r\nimport { selectGame } from \"../../../../state/game/selector\";\r\nimport { addHistory, addTicket } from \"../../../../state/players/actions\";\r\nimport { selectCurrentPlayer, selectPlayers } from \"../../../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../../../state/socket/actions\";\r\nimport TicketCard from \"../../TicketCard\";\r\n\r\nfunction TicketDeckModal({ setShowModal, setShowTicketCities }) {\r\n  const [selectedTickets, setSelectedTickets] = useState([]);\r\n  const [ticketDatas, setTicketDatas] = useState([]);\r\n\r\n  const dispatch = useDispatch();\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const game = useSelector(selectGame);\r\n  const players = useSelector(selectPlayers);\r\n\r\n  useEffect(() => {\r\n    const datas = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      const id = Math.floor(Math.random() * 46);\r\n      const long = id >= 40;\r\n      datas.push({ id: long ? id - 40 : id, long });\r\n    }\r\n    \r\n    setTicketDatas(datas);\r\n  }, [dispatch]);\r\n\r\n  const ticketElements = ticketDatas.map((data, i) => {\r\n    const ticketData = Object.values(\r\n      data.long\r\n        ? ticketToRideData.longDestinations\r\n        : ticketToRideData.destinations\r\n    )[data.id];\r\n\r\n    return (\r\n      <motion.a\r\n        key={i}\r\n        className=\"btn mx-4\"\r\n        variants={{ selected: { scale: 1.2 }, simple: { scale: 1 } }}\r\n        animate={\r\n          selectedTickets.findIndex(t => t === i) > -1 ? \"selected\" : \"simple\"\r\n        }\r\n        transition={{ duration: 1 }}\r\n        onClick={() => {\r\n          const findId = selectedTickets.findIndex((t) => t === i);\r\n          if (findId > -1) {\r\n            selectedTickets.splice(findId, 1);\r\n            setSelectedTickets([...selectedTickets]);\r\n          } else {\r\n            setSelectedTickets([...selectedTickets, i]);\r\n          }\r\n        }}\r\n        onMouseEnter={() => {\r\n          setShowTicketCities(ticketData);\r\n        }}\r\n        onMouseLeave={() => {\r\n          setShowTicketCities(null);\r\n        }}\r\n      >\r\n        <TicketCard\r\n          ticketData={ticketData}\r\n          long={data.long}\r\n          completed={false}\r\n        ></TicketCard>\r\n      </motion.a>\r\n    );\r\n  });\r\n\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"position-absolute w-100 h-100 d-flex flex-col align-items-end\"\r\n        style={{\r\n          backgroundColor: \"#00000022\",\r\n          top: 0,\r\n          left: 0,\r\n          zIndex: 999,\r\n        }}\r\n      >\r\n        <motion.div\r\n          className=\"col py-4\"\r\n          style={{\r\n            backgroundColor: \"#00000088\",\r\n            opacity: 0,\r\n          }}\r\n          animate={{ opacity: 1 }}\r\n        >\r\n          <div>{ticketElements}</div>\r\n          <div className=\"mt-4\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn button-orange\"\r\n              onClick={() => {\r\n                for (let selectedTicket of selectedTickets) {\r\n                  dispatch(addTicket(currentPlayer.id, {id: ticketDatas[selectedTicket].id, long: ticketDatas[selectedTicket].long}, true));\r\n                }\r\n                setShowModal(false);\r\n                dispatch(addHistory(currentPlayer.id, selectedTickets.length + \" db új célkártyát húzott\", true));\r\n                dispatch(wsSendMessage(ClientMessages.SYNC_ACTION, [game.id, {type: GameActionTypes.NEXT_TURN}, false], function() {}));\r\n                dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [game.id, {players, game}, true], function() {} ));\r\n              }}\r\n              disabled={selectedTickets.length === 0}\r\n            >\r\n              Elfogad\r\n            </button>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TicketDeckModal;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}