{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Win11/Programming/Other/ticket-to-ride-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _toConsumableArray from\"C:/Win11/Programming/Other/ticket-to-ride-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Win11/Programming/Other/ticket-to-ride-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{motion}from\"framer-motion\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{ClientMessages,GameActionTypes}from\"../../../../api/socket\";import{ticketToRideData}from\"../../../../data/ticket-to-ride-data\";import{selectGame}from\"../../../../state/game/selector\";import{addHistory,addTicket}from\"../../../../state/players/actions\";import{selectCurrentPlayer,selectPlayers}from\"../../../../state/players/selector\";import{wsSendMessage}from\"../../../../state/socket/actions\";import TicketCard from\"../../TicketCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function TicketDeckModal(_ref){var setShowModal=_ref.setShowModal,setShowTicketCities=_ref.setShowTicketCities;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedTickets=_useState2[0],setSelectedTickets=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),ticketDatas=_useState4[0],setTicketDatas=_useState4[1];var dispatch=useDispatch();var currentPlayer=useSelector(selectCurrentPlayer);var game=useSelector(selectGame);var players=useSelector(selectPlayers);useEffect(function(){var datas=[];for(var i=0;i<3;i++){var id=Math.floor(Math.random()*46);var long=id>=40;datas.push({id:long?id-40:id,long:long});}setTicketDatas(datas);},[dispatch]);var ticketElements=ticketDatas.map(function(data,i){var ticketData=Object.values(data.long?ticketToRideData.longDestinations:ticketToRideData.destinations)[data.id];return/*#__PURE__*/_jsx(motion.a,{className:\"btn mx-4\",variants:{selected:{scale:1.2},simple:{scale:1}},animate:selectedTickets.findIndex(function(t){return t===i;})>-1?\"selected\":\"simple\",transition:{duration:1},onClick:function onClick(){var findId=selectedTickets.findIndex(function(t){return t===i;});if(findId>-1){selectedTickets.splice(findId,1);setSelectedTickets(_toConsumableArray(selectedTickets));}else{setSelectedTickets([].concat(_toConsumableArray(selectedTickets),[i]));}},onMouseEnter:function onMouseEnter(){setShowTicketCities(ticketData);},onMouseLeave:function onMouseLeave(){setShowTicketCities(null);},children:/*#__PURE__*/_jsx(TicketCard,{ticketData:ticketData,long:data.long,completed:false})},i);});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute w-100 h-100 d-flex flex-col align-items-end\",style:{backgroundColor:\"#00000022\",top:0,left:0,zIndex:999},children:/*#__PURE__*/_jsxs(motion.div,{className:\"col py-4\",style:{backgroundColor:\"#00000088\",opacity:0},animate:{opacity:1},children:[/*#__PURE__*/_jsx(\"div\",{children:ticketElements}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn button-orange\",onClick:function onClick(){var _iterator=_createForOfIteratorHelper(selectedTickets),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var selectedTicket=_step.value;dispatch(addTicket(currentPlayer.id,{id:ticketDatas[selectedTicket].id,long:ticketDatas[selectedTicket].long},true));}}catch(err){_iterator.e(err);}finally{_iterator.f();}setShowModal(false);dispatch(addHistory(currentPlayer.id,selectedTickets.length+\" db új célkártyát húzott\",true));dispatch(wsSendMessage(ClientMessages.SYNC_ACTION,[game.id,{type:GameActionTypes.NEXT_TURN},false],function(){}));dispatch(wsSendMessage(ClientMessages.SYNC_STATE,[game.id,{players:players,game:game},true],function(){}));},disabled:selectedTickets.length===0,children:\"Elfogad\"})})]})})});}export default TicketDeckModal;","map":{"version":3,"names":["motion","React","useEffect","useState","useDispatch","useSelector","ClientMessages","GameActionTypes","ticketToRideData","selectGame","addHistory","addTicket","selectCurrentPlayer","selectPlayers","wsSendMessage","TicketCard","TicketDeckModal","setShowModal","setShowTicketCities","selectedTickets","setSelectedTickets","ticketDatas","setTicketDatas","dispatch","currentPlayer","game","players","datas","i","id","Math","floor","random","long","push","ticketElements","map","data","ticketData","Object","values","longDestinations","destinations","selected","scale","simple","findIndex","t","duration","findId","splice","backgroundColor","top","left","zIndex","opacity","selectedTicket","length","SYNC_ACTION","type","NEXT_TURN","SYNC_STATE"],"sources":["C:/Win11/Programming/Other/ticket-to-ride-app/src/views/game/panel/ticket-deck-panel/TicketDeckModal.js"],"sourcesContent":["import { motion } from \"framer-motion\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages, GameActionTypes } from \"../../../../api/socket\";\r\nimport { ticketToRideData } from \"../../../../data/ticket-to-ride-data\";\r\nimport { selectGame } from \"../../../../state/game/selector\";\r\nimport { addHistory, addTicket } from \"../../../../state/players/actions\";\r\nimport { selectCurrentPlayer, selectPlayers } from \"../../../../state/players/selector\";\r\nimport { wsSendMessage } from \"../../../../state/socket/actions\";\r\nimport TicketCard from \"../../TicketCard\";\r\n\r\nfunction TicketDeckModal({ setShowModal, setShowTicketCities }) {\r\n  const [selectedTickets, setSelectedTickets] = useState([]);\r\n  const [ticketDatas, setTicketDatas] = useState([]);\r\n\r\n  const dispatch = useDispatch();\r\n  const currentPlayer = useSelector(selectCurrentPlayer);\r\n  const game = useSelector(selectGame);\r\n  const players = useSelector(selectPlayers);\r\n\r\n  useEffect(() => {\r\n    const datas = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      const id = Math.floor(Math.random() * 46);\r\n      const long = id >= 40;\r\n      datas.push({ id: long ? id - 40 : id, long });\r\n    }\r\n    \r\n    setTicketDatas(datas);\r\n  }, [dispatch]);\r\n\r\n  const ticketElements = ticketDatas.map((data, i) => {\r\n    const ticketData = Object.values(\r\n      data.long\r\n        ? ticketToRideData.longDestinations\r\n        : ticketToRideData.destinations\r\n    )[data.id];\r\n\r\n    return (\r\n      <motion.a\r\n        key={i}\r\n        className=\"btn mx-4\"\r\n        variants={{ selected: { scale: 1.2 }, simple: { scale: 1 } }}\r\n        animate={\r\n          selectedTickets.findIndex(t => t === i) > -1 ? \"selected\" : \"simple\"\r\n        }\r\n        transition={{ duration: 1 }}\r\n        onClick={() => {\r\n          const findId = selectedTickets.findIndex((t) => t === i);\r\n          if (findId > -1) {\r\n            selectedTickets.splice(findId, 1);\r\n            setSelectedTickets([...selectedTickets]);\r\n          } else {\r\n            setSelectedTickets([...selectedTickets, i]);\r\n          }\r\n        }}\r\n        onMouseEnter={() => {\r\n          setShowTicketCities(ticketData);\r\n        }}\r\n        onMouseLeave={() => {\r\n          setShowTicketCities(null);\r\n        }}\r\n      >\r\n        <TicketCard\r\n          ticketData={ticketData}\r\n          long={data.long}\r\n          completed={false}\r\n        ></TicketCard>\r\n      </motion.a>\r\n    );\r\n  });\r\n\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"position-absolute w-100 h-100 d-flex flex-col align-items-end\"\r\n        style={{\r\n          backgroundColor: \"#00000022\",\r\n          top: 0,\r\n          left: 0,\r\n          zIndex: 999,\r\n        }}\r\n      >\r\n        <motion.div\r\n          className=\"col py-4\"\r\n          style={{\r\n            backgroundColor: \"#00000088\",\r\n            opacity: 0,\r\n          }}\r\n          animate={{ opacity: 1 }}\r\n        >\r\n          <div>{ticketElements}</div>\r\n          <div className=\"mt-4\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn button-orange\"\r\n              onClick={() => {\r\n                for (let selectedTicket of selectedTickets) {\r\n                  dispatch(addTicket(currentPlayer.id, {id: ticketDatas[selectedTicket].id, long: ticketDatas[selectedTicket].long}, true));\r\n                }\r\n                setShowModal(false);\r\n                dispatch(addHistory(currentPlayer.id, selectedTickets.length + \" db új célkártyát húzott\", true));\r\n                dispatch(wsSendMessage(ClientMessages.SYNC_ACTION, [game.id, {type: GameActionTypes.NEXT_TURN}, false], function() {}));\r\n                dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [game.id, {players, game}, true], function() {} ));\r\n              }}\r\n              disabled={selectedTickets.length === 0}\r\n            >\r\n              Elfogad\r\n            </button>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TicketDeckModal;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}