{"ast":null,"code":"var _jsxFileName = \"C:\\\\Win11\\\\Programming\\\\Other\\\\ticket-to-ride-app\\\\src\\\\views\\\\lobby\\\\LobbyPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ClientMessages, ServerMessages } from \"../../api/socket\";\nimport { AppStates } from \"../../domain/app\";\nimport { CardStates } from \"../../domain/card\";\nimport { Colors } from \"../../domain/colors\";\nimport { GameStates } from \"../../domain/game\";\nimport { setDeck } from \"../../state/deck/actions\";\nimport { setGame } from \"../../state/game/actions\";\nimport { setRoom } from \"../../state/lobby/actions\";\nimport { selectLobbyRoom } from \"../../state/lobby/selector\";\nimport { setPlayers } from \"../../state/players/actions\";\nimport { wsSendMessage, wsSubscribeChannel, wsUnsubscribeChannel } from \"../../state/socket/actions\";\nimport { currentSocketId } from \"../../state/socket/reducer\";\nimport { shuffle } from \"../../util/shuffle\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction useRoomIsFull(initialValue, setAppState) {\n  _s();\n  const [roomIsFull, setRoomIsFull] = useState(initialValue);\n  const [startTimer, setStartTimer] = useState(1.0);\n  useEffect(() => {\n    const timer = roomIsFull && setInterval(() => {\n      setStartTimer(startTimer - 1);\n      if (startTimer <= 0) {\n        clearInterval(timer);\n        setAppState(AppStates.IN_GAME);\n      }\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [startTimer, roomIsFull, setAppState]);\n  const changeRoomIsFull = newValue => {\n    setRoomIsFull(newValue);\n  };\n  return {\n    startTimer,\n    roomIsFull,\n    changeRoomIsFull\n  };\n}\n_s(useRoomIsFull, \"D4nyJTANz9c/wLu2Q6C+ZjucDzI=\");\nfunction startGame(dispatch, lobbyRoom) {\n  const game = {\n    id: lobbyRoom.roomId,\n    currentPlayerId: 0,\n    playerNumber: lobbyRoom.players.length,\n    publicCards: [],\n    gameState: GameStates.USER_BEGIN,\n    endTurn: -1\n  };\n  const players = lobbyRoom.players.map((player, i) => {\n    const playerTickets = [];\n    playerTickets.push({\n      id: Math.floor(Math.random() * 6),\n      long: true\n    });\n    while (playerTickets.length < 6) {\n      let randomId = Math.floor(Math.random() * 40);\n      if (!playerTickets.find(ticket => ticket.id === randomId && ticket.long === false)) {\n        playerTickets.push({\n          id: randomId,\n          long: false\n        });\n      }\n    }\n    return {\n      id: i,\n      name: player.name,\n      socketId: player.id,\n      points: 0,\n      remainingCars: 45,\n      cards: [],\n      tickets: playerTickets,\n      completedTickets: [],\n      round: 0,\n      color: Object.values(Colors)[i],\n      builtConnections: [],\n      history: []\n    };\n  });\n  players[0].round = 1;\n  const colorNumber = Object.keys(Colors).length - 1;\n  let cardId = 0;\n  const randomDeck = [...Array(colorNumber * 12).keys()].map(i => {\n    return {\n      id: cardId++,\n      color: Object.values(Colors)[i % colorNumber],\n      cardState: CardStates.DECK\n    };\n  });\n  randomDeck.push(...[...Array(14).keys()].map(_ => {\n    return {\n      id: cardId++,\n      color: Colors.LOCOMOTIVE,\n      cardState: CardStates.DECK\n    };\n  }));\n  shuffle(randomDeck);\n  for (let i = 0; i < players.length; i++) {\n    for (let j = 0; j < 5; j++) {\n      randomDeck[i * 5 + j].cardState = i;\n    }\n  }\n  for (let i = 0; i < 5; i++) {\n    randomDeck[players.length * 5 + i].cardState = CardStates.PUBLIC[i];\n  }\n  dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [game.id, {\n    game: game,\n    deck: randomDeck,\n    players: players\n  }, false], function () {}));\n}\nfunction LobbyPage(_ref) {\n  _s2();\n  let {\n    setAppState\n  } = _ref;\n  const lobbyRoom = useSelector(selectLobbyRoom);\n  const {\n    startTimer,\n    roomIsFull,\n    changeRoomIsFull\n  } = useRoomIsFull(false, setAppState);\n  const dispatch = useDispatch();\n  const socketId = currentSocketId();\n  useEffect(() => {\n    console.log(\"USE EFFECT\");\n    dispatch(wsSubscribeChannel(ServerMessages.STATE_CHANGED, function (data) {\n      if (data.state.game) {\n        dispatch(setGame(data.state.game));\n        dispatch(setDeck(data.state.deck));\n        dispatch(setPlayers(data.state.players));\n        dispatch(wsUnsubscribeChannel(ServerMessages.STATE_CHANGED));\n      } else {\n        const room = data.state;\n        dispatch(setRoom(room.roomId, room.roomSize, room.players));\n      }\n    }));\n  }, [dispatch]);\n  if (!roomIsFull) {\n    const full = lobbyRoom.players.length === +lobbyRoom.roomSize;\n    if (full) {\n      changeRoomIsFull(full);\n      if (lobbyRoom.players[0] && lobbyRoom.players[0].id === socketId) {\n        startGame(dispatch, lobbyRoom);\n      }\n    }\n  }\n  const playerElements = lobbyRoom.players.map((_ref2, i) => {\n    let {\n      _,\n      name\n    } = _ref2;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: name\n    }, i + 1, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 5\n    }, this);\n  });\n  playerElements.unshift( /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-orange\",\n    children: \"Players\"\n  }, 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 26\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-100 d-flex flex-column align-items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-5 position-absolute col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: \"Szoba azonos\\xEDt\\xF3:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h2 text-orange text-center\",\n        children: lobbyRoom.roomId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"position-absolute\",\n      style: {\n        top: \"40%\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"position-relative text-center\",\n        children: roomIsFull ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Kezd\\u0151dik a j\\xE1t\\xE9k\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: startTimer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lds-ring\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Waiting for players...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-auto text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: playerElements\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: !roomIsFull && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn button-orange px-5 mx-auto\",\n          onClick: () => {\n            dispatch(wsSendMessage(ClientMessages.SYNC_STATE, [lobbyRoom.roomId, {\n              ...lobbyRoom,\n              players: lobbyRoom.players.filter(p => p.id !== socketId)\n            }, false], function () {\n              setAppState(AppStates.MAIN_PAGE);\n            }));\n          },\n          children: \"Vissza\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n_s2(LobbyPage, \"VAviVCa9gRRbZwuexw/6Bo3Ffzs=\", false, function () {\n  return [useSelector, useRoomIsFull, useDispatch];\n});\n_c = LobbyPage;\nLobbyPage.propTypes = {};\nexport default LobbyPage;\nvar _c;\n$RefreshReg$(_c, \"LobbyPage\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","ClientMessages","ServerMessages","AppStates","CardStates","Colors","GameStates","setDeck","setGame","setRoom","selectLobbyRoom","setPlayers","wsSendMessage","wsSubscribeChannel","wsUnsubscribeChannel","currentSocketId","shuffle","useRoomIsFull","initialValue","setAppState","roomIsFull","setRoomIsFull","startTimer","setStartTimer","timer","setInterval","clearInterval","IN_GAME","changeRoomIsFull","newValue","startGame","dispatch","lobbyRoom","game","id","roomId","currentPlayerId","playerNumber","players","length","publicCards","gameState","USER_BEGIN","endTurn","map","player","i","playerTickets","push","Math","floor","random","long","randomId","find","ticket","name","socketId","points","remainingCars","cards","tickets","completedTickets","round","color","Object","values","builtConnections","history","colorNumber","keys","cardId","randomDeck","Array","cardState","DECK","_","LOCOMOTIVE","j","PUBLIC","SYNC_STATE","deck","LobbyPage","console","log","STATE_CHANGED","data","state","room","roomSize","full","playerElements","unshift","top","filter","p","MAIN_PAGE","propTypes"],"sources":["C:/Win11/Programming/Other/ticket-to-ride-app/src/views/lobby/LobbyPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { ClientMessages, ServerMessages } from \"../../api/socket\";\r\nimport { AppStates } from \"../../domain/app\";\r\nimport { CardStates } from \"../../domain/card\";\r\nimport { Colors } from \"../../domain/colors\";\r\nimport { GameStates } from \"../../domain/game\";\r\nimport { setDeck } from \"../../state/deck/actions\";\r\nimport { setGame } from \"../../state/game/actions\";\r\nimport { setRoom } from \"../../state/lobby/actions\";\r\nimport { selectLobbyRoom } from \"../../state/lobby/selector\";\r\nimport { setPlayers } from \"../../state/players/actions\";\r\nimport {\r\n  wsSendMessage,\r\n  wsSubscribeChannel,\r\n  wsUnsubscribeChannel,\r\n} from \"../../state/socket/actions\";\r\nimport { currentSocketId } from \"../../state/socket/reducer\";\r\nimport { shuffle } from \"../../util/shuffle\";\r\n\r\nfunction useRoomIsFull(initialValue, setAppState) {\r\n  const [roomIsFull, setRoomIsFull] = useState(initialValue);\r\n  const [startTimer, setStartTimer] = useState(1.0);\r\n\r\n  useEffect(() => {\r\n    const timer =\r\n      roomIsFull &&\r\n      setInterval(() => {\r\n        setStartTimer(startTimer - 1);\r\n        if (startTimer <= 0) {\r\n          clearInterval(timer);\r\n          setAppState(AppStates.IN_GAME);\r\n        }\r\n      }, 1000);\r\n    return () => clearInterval(timer);\r\n  }, [startTimer, roomIsFull, setAppState]);\r\n\r\n  const changeRoomIsFull = (newValue) => {\r\n    setRoomIsFull(newValue);\r\n  };\r\n\r\n  return {\r\n    startTimer,\r\n    roomIsFull,\r\n    changeRoomIsFull,\r\n  };\r\n}\r\nfunction startGame(dispatch, lobbyRoom) {\r\n  const game = {\r\n    id: lobbyRoom.roomId,\r\n    currentPlayerId: 0,\r\n    playerNumber: lobbyRoom.players.length,\r\n    publicCards: [],\r\n    gameState: GameStates.USER_BEGIN,\r\n    endTurn: -1,\r\n  };\r\n  const players = lobbyRoom.players.map((player, i) => {\r\n    const playerTickets = [];\r\n    playerTickets.push({\r\n      id: Math.floor(Math.random() * 6),\r\n      long: true,\r\n    });\r\n    while (playerTickets.length < 6) {\r\n      let randomId = Math.floor(Math.random() * 40);\r\n      if (\r\n        !playerTickets.find(\r\n          (ticket) => ticket.id === randomId && ticket.long === false\r\n        )\r\n      ) {\r\n        playerTickets.push({ id: randomId, long: false });\r\n      }\r\n    }\r\n    return {\r\n      id: i,\r\n      name: player.name,\r\n      socketId: player.id,\r\n      points: 0,\r\n      remainingCars: 45,\r\n      cards: [],\r\n      tickets: playerTickets,\r\n      completedTickets: [],\r\n      round: 0,\r\n      color: Object.values(Colors)[i],\r\n      builtConnections: [],\r\n      history: [],\r\n    };\r\n  });\r\n  players[0].round = 1;\r\n  const colorNumber = Object.keys(Colors).length - 1;\r\n  let cardId = 0;\r\n  const randomDeck = [...Array(colorNumber * 12).keys()].map((i) => {\r\n    return {\r\n      id: cardId++,\r\n      color: Object.values(Colors)[i % colorNumber],\r\n      cardState: CardStates.DECK,\r\n    };\r\n  });\r\n  randomDeck.push(\r\n    ...[...Array(14).keys()].map((_) => {\r\n      return {\r\n        id: cardId++,\r\n        color: Colors.LOCOMOTIVE,\r\n        cardState: CardStates.DECK,\r\n      };\r\n    })\r\n  );\r\n  shuffle(randomDeck);\r\n\r\n  for (let i = 0; i < players.length; i++) {\r\n    for (let j = 0; j < 5; j++) {\r\n      randomDeck[i * 5 + j].cardState = i;\r\n    }\r\n  }\r\n  for (let i = 0; i < 5; i++) {\r\n    randomDeck[players.length * 5 + i].cardState = CardStates.PUBLIC[i];\r\n  }\r\n\r\n  dispatch(\r\n    wsSendMessage(\r\n      ClientMessages.SYNC_STATE,\r\n      [game.id, { game: game, deck: randomDeck, players: players }, false],\r\n      function () {}\r\n    )\r\n  );\r\n}\r\n\r\nfunction LobbyPage({ setAppState }) {\r\n  const lobbyRoom = useSelector(selectLobbyRoom);\r\n  const { startTimer, roomIsFull, changeRoomIsFull } = useRoomIsFull(\r\n    false,\r\n    setAppState\r\n  );\r\n  const dispatch = useDispatch();\r\n  const socketId = currentSocketId();\r\n\r\n  useEffect(() => {\r\n    console.log(\"USE EFFECT\");\r\n    dispatch(\r\n      wsSubscribeChannel(ServerMessages.STATE_CHANGED, function (data) {\r\n        if (data.state.game) {\r\n          dispatch(setGame(data.state.game));\r\n          dispatch(setDeck(data.state.deck));\r\n          dispatch(setPlayers(data.state.players));\r\n\r\n          dispatch(wsUnsubscribeChannel(ServerMessages.STATE_CHANGED));\r\n        } else {\r\n          const room = data.state;\r\n          dispatch(setRoom(room.roomId, room.roomSize, room.players));\r\n        }\r\n      })\r\n    );\r\n  }, [dispatch]);\r\n\r\n  if (!roomIsFull) {\r\n    const full = lobbyRoom.players.length === +lobbyRoom.roomSize;\r\n\r\n    if (full) {\r\n      changeRoomIsFull(full);\r\n      if (lobbyRoom.players[0] && lobbyRoom.players[0].id === socketId) {\r\n        startGame(dispatch, lobbyRoom);\r\n      }\r\n    }\r\n  }\r\n\r\n  const playerElements = lobbyRoom.players.map(({ _, name }, i) => (\r\n    <div key={i + 1} className=\"text-center\">\r\n      {name}\r\n    </div>\r\n  ));\r\n  playerElements.unshift(<div key={0} className=\"text-orange\">Players</div>);\r\n\r\n  return (\r\n    <div className=\"h-100 d-flex flex-column align-items-center\">\r\n      <div className=\"mt-5 position-absolute col\">\r\n        <div className=\"text-center\">Szoba azonosító:</div>\r\n        <div className=\"h2 text-orange text-center\">{lobbyRoom.roomId}</div>\r\n      </div>\r\n      <div className=\"position-absolute\" style={{ top: \"40%\" }}>\r\n        <div className=\"position-relative text-center\">\r\n          {roomIsFull ? (\r\n            <>\r\n              <div>Kezdődik a játék</div>\r\n              <div>{startTimer}</div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div className=\"lds-ring\">\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n              </div>\r\n              <div>\r\n                <span>Waiting for players...</span>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"mt-auto text-center\">\r\n        <div>{playerElements}</div>\r\n        <div className=\"mb-2\">\r\n          {!roomIsFull && (\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn button-orange px-5 mx-auto\"\r\n              onClick={() => {\r\n                dispatch(\r\n                  wsSendMessage(\r\n                    ClientMessages.SYNC_STATE,\r\n                    [\r\n                      lobbyRoom.roomId,\r\n                      {\r\n                        ...lobbyRoom,\r\n                        players: lobbyRoom.players.filter(\r\n                          (p) => p.id !== socketId\r\n                        ),\r\n                      },\r\n                      false,\r\n                    ],\r\n                    function () {\r\n                      setAppState(AppStates.MAIN_PAGE);\r\n                    }\r\n                  )\r\n                );\r\n              }}\r\n            >\r\n              Vissza\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nLobbyPage.propTypes = {};\r\n\r\nexport default LobbyPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}